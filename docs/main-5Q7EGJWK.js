var Sw=Object.defineProperty,Tw=Object.defineProperties;var Mw=Object.getOwnPropertyDescriptors;var yp=Object.getOwnPropertySymbols;var Aw=Object.prototype.hasOwnProperty,xw=Object.prototype.propertyIsEnumerable;var _p=(e,t,n)=>t in e?Sw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||={})Aw.call(t,n)&&_p(e,n,t[n]);if(yp)for(var n of yp(t))xw.call(t,n)&&_p(e,n,t[n]);return e},W=(e,t)=>Tw(e,Mw(t));var Ue=null,Ys=!1,yu=1,Rw=null,ze=Symbol("SIGNAL");function O(e){let t=Ue;return Ue=e,t}function Qs(){return Ue}var eo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function to(e){if(Ys)throw new Error("");if(Ue===null)return;Ue.consumerOnSignalRead(e);let t=Ue.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Ue.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Ue.producers,n!==void 0&&n.producer===e)){Ue.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Ue&&(!r||Ow(i,Ue)))return;let o=Kr(Ue),s={producer:e,consumer:Ue,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Ue.producersTail=s,t!==void 0?t.nextProducer=s:Ue.producers=s,o&&Dp(e,s)}function bp(){yu++}function _u(e){if(!(Kr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===yu)){if(!e.producerMustRecompute(e)&&!ea(e)){vu(e);return}e.producerRecomputeValue(e),vu(e)}}function bu(e){if(e.consumers===void 0)return;let t=Ys;Ys=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Nw(r)}}finally{Ys=t}}function wu(){return Ue?.consumerAllowSignalWrites!==!1}function Nw(e){e.dirty=!0,bu(e),e.consumerMarkedDirty?.(e)}function vu(e){e.dirty=!1,e.lastCleanEpoch=yu}function no(e){return e&&wp(e),O(e)}function wp(e){e.producersTail=void 0,e.recomputing=!0}function Xs(e,t){O(t),e&&Ep(e)}function Ep(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Kr(e))do n=Eu(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function ea(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(_u(n),r!==n.version))return!0}return!1}function ro(e){if(Kr(e)){let t=e.producers;for(;t!==void 0;)t=Eu(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Dp(e,t){let n=e.consumersTail,r=Kr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)Dp(i.producer,i)}function Eu(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Kr(t)){let o=t.producers;for(;o!==void 0;)o=Eu(o)}return n}function Kr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Du(e){Rw?.(e)}function Ow(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Cu(e,t){return Object.is(e,t)}function ta(e,t){let n=Object.create(kw);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(_u(n),to(n),n.value===Js)throw n.error;return n.value};return r[ze]=n,Du(n),r}var gu=Symbol("UNSET"),mu=Symbol("COMPUTING"),Js=Symbol("ERRORED"),kw=W(D({},eo),{value:gu,dirty:!0,error:null,equal:Cu,kind:"computed",producerMustRecompute(e){return e.value===gu||e.value===mu},producerRecomputeValue(e){if(e.value===mu)throw new Error("");let t=e.value;e.value=mu;let n=no(e),r,i=!1;try{r=e.computation(),O(null),i=t!==gu&&t!==Js&&r!==Js&&e.equal(t,r)}catch(o){r=Js,e.error=o}finally{Xs(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function Pw(){throw new Error}var Cp=Pw;function Ip(e){Cp(e)}function Iu(e){Cp=e}var Fw=null;function Su(e,t){let n=Object.create(na);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Sp(n);return r[ze]=n,Du(n),[r,s=>io(n,s),s=>Tp(n,s)]}function Sp(e){return to(e),e.value}function io(e,t){wu()||Ip(e),e.equal(e.value,t)||(e.value=t,Lw(e))}function Tp(e,t){wu()||Ip(e),io(e,t(e.value))}var na=W(D({},eo),{equal:Cu,value:void 0,kind:"signal"});function Lw(e){e.version++,bp(),bu(e),Fw?.(e)}function Tu(e){let t=O(null);try{return e()}finally{O(t)}}function V(e){return typeof e=="function"}function Zr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ra=Zr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function oo(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var xe=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(V(r))try{r()}catch(o){t=o instanceof ra?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Mp(o)}catch(s){t=t??[],s instanceof ra?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ra(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Mp(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&oo(n,t)}remove(t){let{_finalizers:n}=this;n&&oo(n,t),t instanceof e&&t._removeParent(this)}};xe.EMPTY=(()=>{let e=new xe;return e.closed=!0,e})();var Mu=xe.EMPTY;function ia(e){return e instanceof xe||e&&"closed"in e&&V(e.remove)&&V(e.add)&&V(e.unsubscribe)}function Mp(e){V(e)?e():e.unsubscribe()}var Ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Yr={setTimeout(e,t,...n){let{delegate:r}=Yr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Yr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function oa(e){Yr.setTimeout(()=>{let{onUnhandledError:t}=Ct;if(t)t(e);else throw e})}function Qn(){}var Ap=Au("C",void 0,void 0);function xp(e){return Au("E",void 0,e)}function Rp(e){return Au("N",e,void 0)}function Au(e,t,n){return{kind:e,value:t,error:n}}var Xn=null;function Jr(e){if(Ct.useDeprecatedSynchronousErrorHandling){let t=!Xn;if(t&&(Xn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=Xn;if(Xn=null,n)throw r}}else e()}function Np(e){Ct.useDeprecatedSynchronousErrorHandling&&Xn&&(Xn.errorThrown=!0,Xn.error=e)}var er=class extends xe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ia(t)&&t.add(this)):this.destination=Uw}static create(t,n,r){return new Qr(t,n,r)}next(t){this.isStopped?Ru(Rp(t),this):this._next(t)}error(t){this.isStopped?Ru(xp(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ru(Ap,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jw=Function.prototype.bind;function xu(e,t){return jw.call(e,t)}var Nu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){sa(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){sa(r)}else sa(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){sa(n)}}},Qr=class extends er{constructor(t,n,r){super();let i;if(V(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Ct.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&xu(t.next,o),error:t.error&&xu(t.error,o),complete:t.complete&&xu(t.complete,o)}):i=t}this.destination=new Nu(i)}};function sa(e){Ct.useDeprecatedSynchronousErrorHandling?Np(e):oa(e)}function Vw(e){throw e}function Ru(e,t){let{onStoppedNotification:n}=Ct;n&&Yr.setTimeout(()=>n(e,t))}var Uw={closed:!0,next:Qn,error:Vw,complete:Qn};var Xr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(e){return e}function Ou(...e){return ku(e)}function ku(e){return e.length===0?It:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var U=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=$w(n)?n:new Qr(n,r,i);return Jr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Op(r),new r((i,o)=>{let s=new Qr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Xr](){return this}pipe(...n){return ku(n)(this)}toPromise(n){return n=Op(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Op(e){var t;return(t=e??Ct.Promise)!==null&&t!==void 0?t:Promise}function Bw(e){return e&&V(e.next)&&V(e.error)&&V(e.complete)}function $w(e){return e&&e instanceof er||Bw(e)&&ia(e)}function Hw(e){return V(e?.lift)}function X(e){return t=>{if(Hw(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(e,t,n,r,i){return new Pu(e,t,n,r,i)}var Pu=class extends er{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var kp=Zr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=(()=>{class e extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new aa(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new kp}next(n){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Jr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Mu:(this.currentObservers=null,o.push(n),new xe(()=>{this.currentObservers=null,oo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new U;return n.source=this,n}}return e.create=(t,n)=>new aa(t,n),e})(),aa=class extends le{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Mu}};var Re=class extends le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Ne=new U(e=>e.complete());function Pp(e){return e&&V(e.schedule)}function Fp(e){return e[e.length-1]}function ca(e){return V(Fp(e))?e.pop():void 0}function Mn(e){return Pp(Fp(e))?e.pop():void 0}function nr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function la(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Lp(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function tr(e){return this instanceof tr?(this.v=e,this):new tr(e)}function jp(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(v,m){o.push([f,g,v,m])>1||c(f,g)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(g){h(o[0][3],g)}}function l(f){f.value instanceof tr?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Vp(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Lp=="function"?Lp(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var ua=e=>e&&typeof e.length=="number"&&typeof e!="function";function da(e){return V(e?.then)}function fa(e){return V(e[Xr])}function ha(e){return Symbol.asyncIterator&&V(e?.[Symbol.asyncIterator])}function pa(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function qw(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ga=qw();function ma(e){return V(e?.[ga])}function va(e){return jp(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield tr(n.read());if(i)return yield tr(void 0);yield yield tr(r)}}finally{n.releaseLock()}})}function ya(e){return V(e?.getReader)}function ye(e){if(e instanceof U)return e;if(e!=null){if(fa(e))return zw(e);if(ua(e))return Gw(e);if(da(e))return Ww(e);if(ha(e))return Up(e);if(ma(e))return Kw(e);if(ya(e))return Zw(e)}throw pa(e)}function zw(e){return new U(t=>{let n=e[Xr]();if(V(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Gw(e){return new U(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Ww(e){return new U(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,oa)})}function Kw(e){return new U(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Up(e){return new U(t=>{Yw(e,t).catch(n=>t.error(n))})}function Zw(e){return Up(va(e))}function Yw(e,t){var n,r,i,o;return la(this,void 0,void 0,function*(){try{for(n=Vp(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Ye(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function _a(e,t=0){return X((n,r)=>{n.subscribe(ee(r,i=>Ye(r,e,()=>r.next(i),t),()=>Ye(r,e,()=>r.complete(),t),i=>Ye(r,e,()=>r.error(i),t)))})}function ba(e,t=0){return X((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Bp(e,t){return ye(e).pipe(ba(t),_a(t))}function $p(e,t){return ye(e).pipe(ba(t),_a(t))}function Hp(e,t){return new U(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function qp(e,t){return new U(n=>{let r;return Ye(n,t,()=>{r=e[ga](),Ye(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>V(r?.return)&&r.return()})}function wa(e,t){if(!e)throw new Error("Iterable cannot be null");return new U(n=>{Ye(n,t,()=>{let r=e[Symbol.asyncIterator]();Ye(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zp(e,t){return wa(va(e),t)}function Gp(e,t){if(e!=null){if(fa(e))return Bp(e,t);if(ua(e))return Hp(e,t);if(da(e))return $p(e,t);if(ha(e))return wa(e,t);if(ma(e))return qp(e,t);if(ya(e))return zp(e,t)}throw pa(e)}function J(e,t){return t?Gp(e,t):ye(e)}function H(...e){let t=Mn(e);return J(e,t)}function Fu(e,t){let n=V(e)?e:()=>e,r=i=>i.error(n());return new U(t?i=>t.schedule(r,0,i):r)}function Ea(e){return!!e&&(e instanceof U||V(e.lift)&&V(e.subscribe))}var rr=Zr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function P(e,t){return X((n,r)=>{let i=0;n.subscribe(ee(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:Jw}=Array;function Qw(e,t){return Jw(t)?e(...t):e(t)}function Da(e){return P(t=>Qw(e,t))}var{isArray:Xw}=Array,{getPrototypeOf:eE,prototype:tE,keys:nE}=Object;function Ca(e){if(e.length===1){let t=e[0];if(Xw(t))return{args:t,keys:null};if(rE(t)){let n=nE(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function rE(e){return e&&typeof e=="object"&&eE(e)===tE}function Ia(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Lu(...e){let t=Mn(e),n=ca(e),{args:r,keys:i}=Ca(e);if(r.length===0)return J([],t);let o=new U(iE(r,t,i?s=>Ia(i,s):It));return n?o.pipe(Da(n)):o}function iE(e,t,n=It){return r=>{Wp(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Wp(t,()=>{let l=J(e[c],t),u=!1;l.subscribe(ee(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Wp(e,t,n){e?Ye(n,e,t):t()}function Kp(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{o&&t.next(g),l++;let v=!1;ye(n(g,u++)).subscribe(ee(t,m=>{i?.(m),o?f(m):t.next(m)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<r;){let m=c.shift();s?Ye(t,s,()=>p(m)):p(m)}h()}catch(m){t.error(m)}}))};return e.subscribe(ee(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Ge(e,t,n=1/0){return V(t)?Ge((r,i)=>P((o,s)=>t(r,o,i,s))(ye(e(r,i))),n):(typeof t=="number"&&(n=t),X((r,i)=>Kp(r,i,e,n)))}function Zp(e=1/0){return Ge(It,e)}function Yp(){return Zp(1)}function ei(...e){return Yp()(J(e,Mn(e)))}function so(e){return new U(t=>{ye(e()).subscribe(t)})}function ju(...e){let t=ca(e),{args:n,keys:r}=Ca(e),i=new U(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;ye(n[u]).subscribe(ee(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Ia(r,a):a),o.complete())}))}});return t?i.pipe(Da(t)):i}var an=new U(Qn);function Je(e,t){return X((n,r)=>{let i=0;n.subscribe(ee(r,o=>e.call(t,o,i++)&&r.next(o)))})}function ao(e){return X((t,n)=>{let r=null,i=!1,o;r=t.subscribe(ee(n,void 0,void 0,s=>{o=ye(e(s,ao(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function ti(e,t){return V(t)?Ge(e,t,1):Ge(e,1)}function Jp(e){return X((t,n)=>{let r=!1;t.subscribe(ee(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function We(e){return e<=0?()=>Ne:X((t,n)=>{let r=0;t.subscribe(ee(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Qp(e=oE){return X((t,n)=>{let r=!1;t.subscribe(ee(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function oE(){return new rr}function co(e){return X((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function cn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Je((i,o)=>e(i,o,r)):It,We(1),n?Jp(t):Qp(()=>new rr))}function Sa(e){return e<=0?()=>Ne:X((t,n)=>{let r=[];t.subscribe(ee(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Vu(...e){let t=Mn(e);return X((n,r)=>{(t?ei(e,n,t):ei(e,n)).subscribe(r)})}function Be(e,t){return X((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ee(r,c=>{i?.unsubscribe();let l=0,u=o++;ye(e(c,u)).subscribe(i=ee(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function lo(e){return X((t,n)=>{ye(e).subscribe(ee(n,()=>n.complete(),Qn)),!n.closed&&t.subscribe(n)})}function Ht(e,t,n){let r=V(e)||t||n?{next:e,error:t,complete:n}:e;return r?X((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ee(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var Uu;function Ta(){return Uu}function qt(e){let t=Uu;return Uu=e,t}var Xp=Symbol("NotFound");function ni(e){return e===Xp||e?.name==="\u0275NotFound"}var Na="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",C=class extends Error{code;constructor(t,n){super(dn(t,n)),this.code=t}};function cE(e){return`NG0${Math.abs(e)}`}function dn(e,t){return`${cE(e)}${t?": "+t:""}`}var mo=globalThis;function te(e){for(let t in e)if(e[t]===te)return t;throw Error("")}function ig(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function un(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(un).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Oa(e,t){return e?t?`${e} ${t}`:e:t||""}var lE=te({__forward_ref__:te});function St(e){return e.__forward_ref__=St,e.toString=function(){return un(this())},e}function Oe(e){return td(e)?e():e}function td(e){return typeof e=="function"&&e.hasOwnProperty(lE)&&e.__forward_ref__===St}function M(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ut(e){return{providers:e.providers||[],imports:e.imports||[]}}function vo(e){return uE(e,ka)}function nd(e){return vo(e)!==null}function uE(e,t){return e.hasOwnProperty(t)&&e[t]||null}function dE(e){let t=e?.[ka]??null;return t||null}function $u(e){return e&&e.hasOwnProperty(Aa)?e[Aa]:null}var ka=te({\u0275prov:te}),Aa=te({\u0275inj:te}),T=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=M({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rd(e){return e&&!!e.\u0275providers}var id=te({\u0275cmp:te}),od=te({\u0275dir:te}),sd=te({\u0275pipe:te}),ad=te({\u0275mod:te}),fo=te({\u0275fac:te}),lr=te({__NG_ELEMENT_ID__:te}),eg=te({__NG_ENV_ID__:te});function cd(e){return Pa(e,"@NgModule"),e[ad]||null}function Rn(e){return Pa(e,"@Component"),e[id]||null}function ld(e){return Pa(e,"@Directive"),e[od]||null}function og(e){return Pa(e,"@Pipe"),e[sd]||null}function Pa(e,t){if(e==null)throw new C(-919,!1)}function fn(e){return typeof e=="string"?e:e==null?"":String(e)}var sg=te({ngErrorCode:te}),fE=te({ngErrorMessage:te}),hE=te({ngTokenPath:te});function ud(e,t){return ag("",-200,t)}function Fa(e,t){throw new C(-201,!1)}function ag(e,t,n){let r=new C(t,e);return r[sg]=t,r[fE]=e,n&&(r[hE]=n),r}function pE(e){return e[sg]}var Hu;function cg(){return Hu}function et(e){let t=Hu;return Hu=e,t}function dd(e,t,n){let r=vo(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;Fa(e,"")}var gE={},ir=gE,mE="__NG_DI_FLAG__",qu=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=or(n)||0;try{return this.injector.get(t,r&8?null:ir,r)}catch(i){if(ni(i))return i;throw i}}};function vE(e,t=0){let n=Ta();if(n===void 0)throw new C(-203,!1);if(n===null)return dd(e,void 0,t);{let r=yE(t),i=n.retrieve(e,r);if(ni(i)){if(r.optional)return null;throw i}return i}}function R(e,t=0){return(cg()||vE)(Oe(e),t)}function y(e,t){return R(e,or(t))}function or(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function yE(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function zu(e){let t=[];for(let n=0;n<e.length;n++){let r=Oe(e[n]);if(Array.isArray(r)){if(r.length===0)throw new C(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=_E(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(R(i,o))}else t.push(R(r))}return t}function _E(e){return e[mE]}function sr(e,t){let n=e.hasOwnProperty(fo);return n?e[fo]:null}function La(e,t){e.forEach(n=>Array.isArray(n)?La(n,t):t(n))}function fd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function yo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function lg(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function ja(e,t,n){let r=ii(e,t);return r>=0?e[r|1]=n:(r=~r,lg(e,r,t,n)),r}function Va(e,t){let n=ii(e,t);if(n>=0)return e[n|1]}function ii(e,t){return bE(e,t,1)}function bE(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Nn={},Ke=[],ur=new T(""),hd=new T("",-1),pd=new T(""),ho=class{get(t,n=ir){if(n===ir){let i=ag("",-201);throw i.name="\u0275NotFound",i}return n}};function Tt(e){return{\u0275providers:e}}function ug(e){return Tt([{provide:ur,multi:!0,useValue:e}])}function dg(...e){return{\u0275providers:gd(!0,e),\u0275fromNgModule:!0}}function gd(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return La(t,s=>{let a=s;xa(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fg(i,o),n}function fg(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];md(i,o=>{t(o,r)})}}function xa(e,t,n,r){if(e=Oe(e),!e)return!1;let i=null,o=$u(e),s=!o&&Rn(e);if(!o&&!s){let c=e.ngModule;if(o=$u(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)xa(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;La(o.imports,u=>{xa(u,t,n,r)&&(l||=[],l.push(u))}),l!==void 0&&fg(l,t)}if(!a){let l=sr(i)||(()=>new i);t({provide:i,useFactory:l,deps:Ke},i),t({provide:pd,useValue:i,multi:!0},i),t({provide:ur,useValue:()=>R(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;md(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function md(e,t){for(let n of e)rd(n)&&(n=n.\u0275providers),Array.isArray(n)?md(n,t):t(n)}var wE=te({provide:String,useValue:te});function hg(e){return e!==null&&typeof e=="object"&&wE in e}function EE(e){return!!(e&&e.useExisting)}function DE(e){return!!(e&&e.useFactory)}function ar(e){return typeof e=="function"}function pg(e){return!!e.useClass}var _o=new T(""),Ma={},tg={},Bu;function bo(){return Bu===void 0&&(Bu=new ho),Bu}var ue=class{},cr=class extends ue{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Wu(t,s=>this.processProvider(s)),this.records.set(hd,ri(void 0,this)),i.has("environment")&&this.records.set(ue,ri(void 0,this));let o=this.records.get(_o);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pd,Ke,{self:!0}))}retrieve(t,n){let r=or(n)||0;try{return this.get(t,ir,r)}catch(i){if(ni(i))return i;throw i}}destroy(){uo(this),this._destroyed=!0;let t=O(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),O(t)}}onDestroy(t){return uo(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){uo(this);let n=qt(this),r=et(void 0),i;try{return t()}finally{qt(n),et(r)}}get(t,n=ir,r){if(uo(this),t.hasOwnProperty(eg))return t[eg](this);let i=or(r),o,s=qt(this),a=et(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=ME(t)&&vo(t);u&&this.injectableDefInScope(u)?l=ri(Gu(t),Ma):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?bo():this.parent;return n=i&8&&n===ir?null:n,c.get(t,n)}catch(c){let l=pE(c);throw l===-200||l===-201?new C(l,null):c}finally{et(a),qt(s)}}resolveInjectorInitializers(){let t=O(null),n=qt(this),r=et(void 0),i;try{let o=this.get(ur,Ke,{self:!0});for(let s of o)s()}finally{qt(n),et(r),O(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(un(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Oe(t);let n=ar(t)?t:Oe(t&&t.provide),r=IE(t);if(!ar(t)&&t.multi===!0){let i=this.records.get(n);i||(i=ri(void 0,Ma,!0),i.factory=()=>zu(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=O(null);try{if(n.value===tg)throw ud(un(t));return n.value===Ma&&(n.value=tg,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&TE(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{O(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Oe(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gu(e){let t=vo(e),n=t!==null?t.factory:sr(e);if(n!==null)return n;if(e instanceof T)throw new C(204,!1);if(e instanceof Function)return CE(e);throw new C(204,!1)}function CE(e){if(e.length>0)throw new C(204,!1);let n=dE(e);return n!==null?()=>n.factory(e):()=>new e}function IE(e){if(hg(e))return ri(void 0,e.useValue);{let t=vd(e);return ri(t,Ma)}}function vd(e,t,n){let r;if(ar(e)){let i=Oe(e);return sr(i)||Gu(i)}else if(hg(e))r=()=>Oe(e.useValue);else if(DE(e))r=()=>e.useFactory(...zu(e.deps||[]));else if(EE(e))r=(i,o)=>R(Oe(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Oe(e&&(e.useClass||e.provide));if(SE(e))r=()=>new i(...zu(e.deps));else return sr(i)||Gu(i)}return r}function uo(e){if(e.destroyed)throw new C(205,!1)}function ri(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function SE(e){return!!e.deps}function TE(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function ME(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Wu(e,t){for(let n of e)Array.isArray(n)?Wu(n,t):n&&rd(n)?Wu(n.\u0275providers,t):t(n)}function Te(e,t){let n;e instanceof cr?(uo(e),n=e):n=new qu(e);let r,i=qt(n),o=et(void 0);try{return t()}finally{qt(i),et(o)}}function gg(){return cg()!==void 0||Ta()!=null}var Mt=0,F=1,L=2,Se=3,dt=4,ft=5,oi=6,si=7,ge=8,hn=9,Gt=10,ce=11,ai=12,yd=13,dr=14,tt=15,fr=16,hr=17,pr=18,pn=19,_d=20,ln=21,Ua=22,wo=23,nt=24,gr=25,mr=26,Pe=27,mg=1,bd=6,On=7,Eo=8,Do=9,me=10;function Wt(e){return Array.isArray(e)&&typeof e[mg]=="object"}function At(e){return Array.isArray(e)&&e[mg]===!0}function wd(e){return(e.flags&4)!==0}function kn(e){return e.componentOffset>-1}function Co(e){return(e.flags&1)===1}function Kt(e){return!!e.template}function ci(e){return(e[L]&512)!==0}function vr(e){return(e[L]&256)===256}var vg="svg",yg="math";function ht(e){for(;Array.isArray(e);)e=e[Mt];return e}function Ed(e,t){return ht(t[e])}function xt(e,t){return ht(t[e.index])}function Io(e,t){return e.data[t]}function pt(e,t){let n=t[e];return Wt(n)?n:n[Mt]}function Ba(e){return(e[L]&128)===128}function _g(e){return At(e[Se])}function Zt(e,t){return t==null?null:e[t]}function Dd(e){e[hr]=0}function Cd(e){e[L]&1024||(e[L]|=1024,Ba(e)&&li(e))}function bg(e,t){for(;e>0;)t=t[dr],e--;return t}function So(e){return!!(e[L]&9216||e[nt]?.dirty)}function $a(e){e[Gt].changeDetectionScheduler?.notify(8),e[L]&64&&(e[L]|=1024),So(e)&&li(e)}function li(e){e[Gt].changeDetectionScheduler?.notify(0);let t=An(e);for(;t!==null&&!(t[L]&8192||(t[L]|=8192,!Ba(t)));)t=An(t)}function Id(e,t){if(vr(e))throw new C(911,!1);e[ln]===null&&(e[ln]=[]),e[ln].push(t)}function wg(e,t){if(e[ln]===null)return;let n=e[ln].indexOf(t);n!==-1&&e[ln].splice(n,1)}function An(e){let t=e[Se];return At(t)?t[Se]:t}function Eg(e){return e[si]??=[]}function Dg(e){return e.cleanup??=[]}var $={lFrame:Vg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ku=!1;function Cg(){return $.lFrame.elementDepthCount}function Ig(){$.lFrame.elementDepthCount++}function Sg(){$.lFrame.elementDepthCount--}function Sd(){return $.bindingsEnabled}function Tg(){return $.skipHydrationRootTNode!==null}function Mg(e){return $.skipHydrationRootTNode===e}function Ag(){$.skipHydrationRootTNode=null}function q(){return $.lFrame.lView}function Fe(){return $.lFrame.tView}function re(e){return $.lFrame.contextLView=e,e[ge]}function ie(e){return $.lFrame.contextLView=null,e}function Ze(){let e=Td();for(;e!==null&&e.type===64;)e=e.parent;return e}function Td(){return $.lFrame.currentTNode}function xg(){let e=$.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ui(e,t){let n=$.lFrame;n.currentTNode=e,n.isParent=t}function Md(){return $.lFrame.isParent}function Rg(){$.lFrame.isParent=!1}function Ad(){return Ku}function xd(e){let t=Ku;return Ku=e,t}function Ng(){let e=$.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Rd(){return $.lFrame.bindingIndex}function Og(e){return $.lFrame.bindingIndex=e}function yr(){return $.lFrame.bindingIndex++}function To(e){let t=$.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function kg(){return $.lFrame.inI18n}function Pg(e,t){let n=$.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ha(t)}function Fg(){return $.lFrame.currentDirectiveIndex}function Ha(e){$.lFrame.currentDirectiveIndex=e}function Lg(e){let t=$.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Nd(e){$.lFrame.currentQueryIndex=e}function AE(e){let t=e[F];return t.type===2?t.declTNode:t.type===1?e[ft]:null}function Od(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=AE(o),i===null||(o=o[dr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=$.lFrame=jg();return r.currentTNode=t,r.lView=e,!0}function qa(e){let t=jg(),n=e[F];$.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function jg(){let e=$.lFrame,t=e===null?null:e.child;return t===null?Vg(e):t}function Vg(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Ug(){let e=$.lFrame;return $.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var kd=Ug;function za(){let e=Ug();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Bg(e){return($.lFrame.contextLView=bg(e,$.lFrame.contextLView))[ge]}function Rt(){return $.lFrame.selectedIndex}function Pn(e){$.lFrame.selectedIndex=e}function Ga(){let e=$.lFrame;return Io(e.tView,e.selectedIndex)}function $g(){return $.lFrame.currentNamespace}var Hg=!0;function Wa(){return Hg}function Ka(e){Hg=e}function Zu(e,t=null,n=null,r){let i=Pd(e,t,n,r);return i.resolveInjectorInitializers(),i}function Pd(e,t=null,n=null,r,i=new Set){let o=[n||Ke,dg(e)];return r=r||(typeof e=="object"?void 0:un(e)),new cr(o,t||bo(),r||null,i)}var Qe=class e{static THROW_IF_NOT_FOUND=ir;static NULL=new ho;static create(t,n){if(Array.isArray(t))return Zu({name:""},n,t,"");{let r=t.name??"";return Zu({name:r},t.parent,t.providers,r)}}static \u0275prov=M({token:e,providedIn:"any",factory:()=>R(hd)});static __NG_ELEMENT_ID__=-1},ve=new T(""),gt=(()=>{class e{static __NG_ELEMENT_ID__=xE;static __NG_ENV_ID__=n=>n}return e})(),Yu=class extends gt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return vr(this._lView)}onDestroy(t){let n=this._lView;return Id(n,t),()=>wg(n,t)}};function xE(){return new Yu(q())}var qg=!1,zg=new T(""),gn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Re(!1);debugTaskTracker=y(zg,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new U(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),Ju=class extends le{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,gg()&&(this.destroyRef=y(gt,{optional:!0})??void 0,this.pendingTasks=y(gn,{optional:!0})??void 0)}emit(t){let n=O(null);try{super.next(t)}finally{O(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof xe&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_e=Ju;function Ra(...e){}function Fd(e){let t,n;function r(){e=Ra;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function Gg(e){return queueMicrotask(()=>e()),()=>{e=Ra}}var Ld="isAngularZone",po=Ld+"_ID",RE=0,ke=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _e(!1);onMicrotaskEmpty=new _e(!1);onStable=new _e(!1);onError=new _e(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=qg}=t;if(typeof Zone>"u")throw new C(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,kE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ld)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new C(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new C(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,NE,Ra,Ra);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},NE={};function jd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function OE(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Fd(()=>{e.callbackScheduled=!1,Qu(e),e.isCheckStableRunning=!0,jd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Qu(e)}function kE(e){let t=()=>{OE(e)},n=RE++;e._inner=e._inner.fork({name:"angular",properties:{[Ld]:!0,[po]:n,[po+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(PE(c))return r.invokeTask(o,s,a,c);try{return ng(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),rg(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return ng(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!FE(c)&&t(),rg(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Qu(e),jd(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Qu(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function ng(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rg(e){e._nesting--,jd(e)}var go=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _e;onMicrotaskEmpty=new _e;onStable=new _e;onError=new _e;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function PE(e){return Wg(e,"__ignore_ng_zone__")}function FE(e){return Wg(e,"__scheduler_tick__")}function Wg(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var zt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},rt=new T("",{factory:()=>{let e=y(ke),t=y(ue),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(zt),n.handleError(r))})}}}),Kg={provide:ur,useValue:()=>{let e=y(zt,{optional:!0})},multi:!0},LE=new T("",{factory:()=>{let e=y(ve).defaultView;if(!e)return;let t=y(rt),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),y(gt).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function Vd(){return Tt([ug(()=>{y(LE)})])}function Z(e,t){let[n,r,i]=Su(e,t?.equal),o=n,s=o[ze];return o.set=r,o.update=i,o.asReadonly=Zg.bind(o),o}function Zg(){let e=this[ze];if(e.readonlyFn===void 0){let t=()=>this();t[ze]=e,e.readonlyFn=t}return e.readonlyFn}var Za=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=jE}return e})();function jE(){return new Za(q(),Ze())}var xn=class{},Mo=new T("",{factory:()=>!0});var Ud=new T(""),Ya=(()=>{class e{internalPendingTasks=y(gn);scheduler=y(xn);errorHandler=y(rt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),Bd=(()=>{class e{static \u0275prov=M({token:e,providedIn:"root",factory:()=>new Xu})}return e})(),Xu=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},ed=class{[ze];constructor(t){this[ze]=t}destroy(){this[ze].destroy()}};function we(e){return Tu(e)}function Lo(e){return{toString:e}.toString()}function WE(e){return typeof e=="function"}function Im(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var nc=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},mn=(()=>{let e=()=>Sm;return e.ngInherit=!0,e})();function Sm(e){return e.type.prototype.ngOnChanges&&(e.setInput=ZE),KE}function KE(){let e=Mm(this),t=e?.current;if(t){let n=e.previous;if(n===Nn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function ZE(e,t,n,r,i){let o=this.declaredInputs[r],s=Mm(e)||YE(e,{previous:Nn,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new nc(l&&l.currentValue,n,c===Nn),Im(e,t,i,n)}var Tm="__ngSimpleChanges__";function Mm(e){return e[Tm]||null}function YE(e,t){return e[Tm]=t}var Yg=[];var ne=function(e,t=null,n){for(let r=0;r<Yg.length;r++){let i=Yg[r];i(e,t,n)}},Y=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(Y||{});function JE(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Sm(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Am(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Xa(e,t,n){xm(e,t,3,n)}function ec(e,t,n,r){(e[L]&3)===n&&xm(e,t,n,r)}function $d(e,t){let n=e[L];(n&3)===t&&(n&=16383,n+=1,e[L]=n)}function xm(e,t,n,r){let i=r!==void 0?e[hr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[hr]+=65536),(a<o||o==-1)&&(QE(e,n,t,c),e[hr]=(e[hr]&4294901760)+c+2),c++}function Jg(e,t){ne(Y.LifecycleHookStart,e,t);let n=O(null);try{t.call(e)}finally{O(n),ne(Y.LifecycleHookEnd,e,t)}}function QE(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[L]>>14<e[hr]>>16&&(e[L]&3)===t&&(e[L]+=16384,Jg(a,o)):Jg(a,o)}var fi=-1,br=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function XE(e){return(e.flags&8)!==0}function eD(e){return(e.flags&16)!==0}function tD(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];nD(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Rm(e){return e===3||e===4||e===6}function nD(e){return e.charCodeAt(0)===64}function Ro(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Qg(e,n,i,null,t[++r]):Qg(e,n,i,null,null))}}return e}function Qg(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function Nm(e){return e!==fi}function rc(e){return e&32767}function rD(e){return e>>16}function ic(e,t){let n=rD(e),r=t;for(;n>0;)r=r[dr],n--;return r}var Xd=!0;function Xg(e){let t=Xd;return Xd=e,t}var iD=256,Om=iD-1,km=5,oD=0,Yt={};function sD(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(lr)&&(r=n[lr]),r==null&&(r=n[lr]=oD++);let i=r&Om,o=1<<i;t.data[e+(i>>km)]|=o}function oc(e,t){let n=Pm(e,t);if(n!==-1)return n;let r=t[F];r.firstCreatePass&&(e.injectorIndex=t.length,Hd(r.data,e),Hd(t,null),Hd(r.blueprint,null));let i=Ef(e,t),o=e.injectorIndex;if(Nm(i)){let s=rc(i),a=ic(i,t),c=a[F].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function Hd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Pm(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Ef(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Um(i),r===null)return fi;if(n++,i=i[dr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return fi}function ef(e,t,n){sD(e,t,n)}function aD(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(Rm(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function Fm(e,t,n){if(n&8||e!==void 0)return e;Fa(t,"NodeInjector")}function Lm(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[hn],o=et(void 0);try{return i?i.get(t,r,n&8):dd(t,r,n&8)}finally{et(o)}}return Fm(r,t,n)}function jm(e,t,n,r=0,i){if(e!==null){if(t[L]&2048&&!(r&2)){let s=fD(e,t,n,r,Yt);if(s!==Yt)return s}let o=Vm(e,t,n,r,Yt);if(o!==Yt)return o}return Lm(t,n,r,i)}function Vm(e,t,n,r,i){let o=uD(n);if(typeof o=="function"){if(!Od(t,e,r))return r&1?Fm(i,n,r):Lm(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Fa(n);else return s}finally{kd()}}else if(typeof o=="number"){let s=null,a=Pm(e,t),c=fi,l=r&1?t[tt][ft]:null;for((a===-1||r&4)&&(c=a===-1?Ef(e,t):t[a+8],c===fi||!tm(r,!1)?a=-1:(s=t[F],a=rc(c),t=ic(c,t)));a!==-1;){let u=t[F];if(em(o,a,u.data)){let d=cD(a,t,n,s,r,l);if(d!==Yt)return d}c=t[a+8],c!==fi&&tm(r,t[F].data[a+8]===l)&&em(o,a,t)?(s=u,a=rc(c),t=ic(c,t)):a=-1}}return i}function cD(e,t,n,r,i,o){let s=t[F],a=s.data[e+8],c=r==null?kn(a)&&Xd:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=lD(a,s,n,c,l);return u!==null?sc(t,s,u,a,i):Yt}function lD(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=s[c];if(f&&Kt(f)&&f.type===n)return c}return null}function sc(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof br){let a=o;if(a.resolving)throw ud("");let c=Xg(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?et(a.injectImpl):null,h=Od(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&JE(n,s[n],t)}finally{d!==null&&et(d),Xg(c),a.resolving=!1,kd()}}return o}function uD(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(lr)?e[lr]:void 0;return typeof t=="number"?t>=0?t&Om:dD:t}function em(e,t,n){let r=1<<e;return!!(n[t+(e>>km)]&r)}function tm(e,t){return!(e&2)&&!(e&1&&t)}var _r=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return jm(this._tNode,this._lView,t,or(r),n)}};function dD(){return new _r(Ze(),q())}function vn(e){return Lo(()=>{let t=e.prototype.constructor,n=t[fo]||tf(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[fo]||tf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tf(e){return td(e)?()=>{let t=tf(Oe(e));return t&&t()}:sr(e)}function fD(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[L]&2048&&!ci(s);){let a=Vm(o,s,n,r|2,Yt);if(a!==Yt)return a;let c=o.parent;if(!c){let l=s[_d];if(l){let u=l.get(n,Yt,r);if(u!==Yt)return u}c=Um(s),s=s[dr]}o=c}return i}function Um(e){let t=e[F],n=t.type;return n===2?t.declTNode:n===1?e[ft]:null}function jo(e){return aD(Ze(),e)}function hD(){return _c(Ze(),q())}function _c(e,t){return new Qt(xt(e,t))}var Qt=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=hD}return e})();function Bm(e){return(e.flags&128)===128}var Df=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Df||{}),$m=new Map,pD=0;function gD(){return pD++}function mD(e){$m.set(e[pn],e)}function nf(e){$m.delete(e[pn])}var nm="__ngContext__";function hi(e,t){Wt(t)?(e[nm]=t[pn],mD(t)):e[nm]=t}function Hm(e){return zm(e[ai])}function qm(e){return zm(e[dt])}function zm(e){for(;e!==null&&!At(e);)e=e[dt];return e}var vD;function Cf(e){vD=e}var bc=new T("",{factory:()=>yD}),yD="ng";var wc=new T(""),Vo=new T("",{providedIn:"platform",factory:()=>"unknown"});var Ec=new T("",{factory:()=>y(ve).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Gm="r";var Wm="di";var Km=!1,Zm=new T("",{factory:()=>Km});var _D=(e,t,n,r)=>{};function bD(e,t,n,r){_D(e,t,n,r)}function If(e){return(e.flags&32)===32}var wD=()=>null;function Ym(e,t,n=!1){return wD(e,t,n)}function Jm(e,t){let n=e.contentQueries;if(n!==null){let r=O(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Nd(o),a.contentQueries(2,t[s],s)}}}finally{O(r)}}}function rf(e,t,n){Nd(0);let r=O(null);try{t(e,n)}finally{O(r)}}function Qm(e,t,n){if(wd(t)){let r=O(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{O(r)}}}var kt=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(kt||{});var Ja;function ED(){if(Ja===void 0&&(Ja=null,mo.trustedTypes))try{Ja=mo.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ja}function rm(e){return ED()?.createScriptURL(e)||e}var ac=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Na})`}};function Uo(e){return e instanceof ac?e.changingThisBreaksApplicationSecurity:e}function Sf(e,t){let n=Xm(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Na})`)}return n===t}function Xm(e){return e instanceof ac&&e.getTypeName()||null}var DD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ev(e){return e=String(e),e.match(DD)?e:"unsafe:"+e}function CD(e,t){return e.createText(t)}function ID(e,t,n){e.setValue(t,n)}function tv(e,t,n){return e.createElement(t,n)}function cc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function nv(e,t,n){e.appendChild(t,n)}function im(e,t,n,r,i){r!==null?cc(e,t,n,r,i):nv(e,t,n)}function rv(e,t,n,r){e.removeChild(null,t,n,r)}function SD(e,t,n){e.setAttribute(t,"style",n)}function TD(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function iv(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&tD(e,t,r),i!==null&&TD(e,t,i),o!==null&&SD(e,t,o)}var Dc=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(Dc||{});function ov(e){let t=av();return t?t.sanitize(Dc.URL,e)||"":Sf(e,"URL")?Uo(e):ev(fn(e))}function sv(e){let t=av();if(t)return rm(t.sanitize(Dc.RESOURCE_URL,e)||"");if(Sf(e,"ResourceURL"))return rm(Uo(e));throw new C(904,!1)}var MD=new Set(["embed","frame","iframe","media","script"]),AD=new Set(["base","link","script"]);function xD(e,t){return t==="src"&&MD.has(e)||t==="href"&&AD.has(e)||t==="xlink:href"&&e==="script"?sv:ov}function Tf(e,t,n){return xD(t,n)(e)}function av(){let e=q();return e&&e[Gt].sanitizer}function cv(e){return e instanceof Function?e():e}function RD(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var lv="ng-template";function ND(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&RD(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Mf(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Mf(e){return e.type===4&&e.value!==lv}function OD(e,t,n){let r=e.type===4&&!n?lv:e.value;return t===r}function kD(e,t,n){let r=4,i=e.attrs,o=i!==null?LD(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Nt(r)&&!Nt(c))return!1;if(s&&Nt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!OD(e,c,n)||c===""&&t.length===1){if(Nt(r))return!1;s=!0}}else if(r&8){if(i===null||!ND(e,i,c,n)){if(Nt(r))return!1;s=!0}}else{let l=t[++a],u=PD(c,i,Mf(e),n);if(u===-1){if(Nt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Nt(r))return!1;s=!0}}}}return Nt(r)||s}function Nt(e){return(e&1)===0}function PD(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return jD(t,e)}function FD(e,t,n=!1){for(let r=0;r<t.length;r++)if(kD(e,t[r],n))return!0;return!1}function LD(e){for(let t=0;t<e.length;t++){let n=e[t];if(Rm(n))return t}return e.length}function jD(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function om(e,t){return e?":not("+t.trim()+")":t}function VD(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nt(s)&&(t+=om(o,i),i=""),r=s,o=o||!Nt(r);n++}return i!==""&&(t+=om(o,i)),t}function UD(e){return e.map(VD).join(",")}function BD(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Nt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var $e={};function Af(e,t,n,r,i,o,s,a,c,l,u){let d=Pe+r,h=d+i,f=$D(d,h),p=typeof l=="function"?l():l;return f[F]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function $D(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:$e);return n}function HD(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Af(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function xf(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Mt]=i,d[L]=r|4|128|8|64|1024,(l!==null||e&&e[L]&2048)&&(d[L]|=2048),Dd(d),d[Se]=d[dr]=e,d[ge]=n,d[Gt]=s||e&&e[Gt],d[ce]=a||e&&e[ce],d[hn]=c||e&&e[hn]||null,d[ft]=o,d[pn]=gD(),d[oi]=u,d[_d]=l,d[tt]=t.type==2?e[tt]:d,d}function qD(e,t,n){let r=xt(t,e),i=HD(n),o=e[Gt].rendererFactory,s=Rf(e,xf(e,i,null,uv(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function uv(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function dv(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Rf(e,t){return e[ai]?e[yd][dt]=t:e[ai]=t,e[yd]=t,t}function S(e=1){fv(Fe(),q(),Rt()+e,!1)}function fv(e,t,n,r){if(!r)if((t[L]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Xa(t,o,n)}else{let o=e.preOrderHooks;o!==null&&ec(t,o,0,n)}Pn(n)}var Cc=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Cc||{});function of(e,t,n,r){let i=O(null);try{let[o,s,a]=e.inputs[n],c=null;(s&Cc.SignalBased)!==0&&(c=t[o][ze]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):Im(t,c,o,r)}finally{O(i)}}var Jt=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(Jt||{}),zD;function Nf(e,t){return zD(e,t)}var wr=new Set,Ic=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Ic||{}),yn=new T(""),sm=new Set;function Ln(e){sm.has(e)||(sm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Of=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),hv=[0,1,2,3],pv=(()=>{class e{ngZone=y(ke);scheduler=y(xn);errorHandler=y(zt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){y(yn,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ne(Y.AfterRenderHooksStart),this.executing=!0;for(let r of hv)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ne(Y.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[gr]??=[]).push(n),li(r),r[L]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Ic.AFTER_NEXT_RENDER,n):n()}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),lc=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[gr];t&&(this.view[gr]=t.filter(n=>n!==this))}};function Bo(e,t){let n=t?.injector??y(Qe);return Ln("NgAfterNextRender"),WD(e,n,t,!0)}function GD(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function WD(e,t,n,r){let i=t.get(Of);i.impl??=t.get(pv);let o=t.get(yn,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(gt):null,a=t.get(Za,null,{optional:!0}),c=new lc(i.impl,GD(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var gv=new T("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:y(ue)})});function mv(e,t,n){let r=e.get(gv);if(Array.isArray(t))for(let i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function KD(e,t){let n=e.get(gv);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function ZD(e,t){for(let[n,r]of t)mv(e,r.animateFns)}function am(e,t,n,r){let i=e?.[mr]?.enter;t!==null&&i&&i.has(n.index)&&ZD(r,i)}function di(e,t,n,r,i,o,s,a){if(i!=null){let c,l=!1;At(i)?c=i:Wt(i)&&(l=!0,i=i[Mt]);let u=ht(i);e===0&&r!==null?(am(a,r,o,n),s==null?nv(t,r,u):cc(t,r,u,s||null,!0)):e===1&&r!==null?(am(a,r,o,n),cc(t,r,u,s||null,!0)):e===2?cm(a,o,n,d=>{rv(t,u,l,d)}):e===3&&cm(a,o,n,()=>{t.destroyNode(u)}),c!=null&&cC(t,e,n,c,o,r,s)}}function YD(e,t){vv(e,t),t[Mt]=null,t[ft]=null}function JD(e,t,n,r,i,o){r[Mt]=i,r[ft]=t,Tc(e,r,n,1,i,o)}function vv(e,t){t[Gt].changeDetectionScheduler?.notify(9),Tc(e,t,t[ce],2,null,null)}function QD(e){let t=e[ai];if(!t)return qd(e[F],e);for(;t;){let n=null;if(Wt(t))n=t[ai];else{let r=t[me];r&&(n=r)}if(!n){for(;t&&!t[dt]&&t!==e;)Wt(t)&&qd(t[F],t),t=t[Se];t===null&&(t=e),Wt(t)&&qd(t[F],t),n=t&&t[dt]}t=n}}function kf(e,t){let n=e[Do],r=n.indexOf(t);n.splice(r,1)}function Sc(e,t){if(vr(t))return;let n=t[ce];n.destroyNode&&Tc(e,t,n,3,null,null),QD(t)}function qd(e,t){if(vr(t))return;let n=O(null);try{t[L]&=-129,t[L]|=256,t[nt]&&ro(t[nt]),tC(e,t),eC(e,t),t[F].type===1&&t[ce].destroy();let r=t[fr];if(r!==null&&At(t[Se])){r!==t[Se]&&kf(r,t);let i=t[pr];i!==null&&i.detachView(e)}nf(t)}finally{O(n)}}function cm(e,t,n,r){let i=e?.[mr];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);e&&wr.add(e[pn]),mv(n,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),XD(e,r)}else e&&wr.delete(e[pn]),r(!1)},i)}function XD(e,t){let n=e[mr]?.running;if(n){n.then(()=>{e[mr].running=void 0,wr.delete(e[pn]),t(!0)});return}t(!1)}function eC(e,t){let n=e.cleanup,r=t[si];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[si]=null);let i=t[ln];if(i!==null){t[ln]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[wo];if(o!==null){t[wo]=null;for(let s of o)s.destroy()}}function tC(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof br)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ne(Y.LifecycleHookStart,a,c);try{c.call(a)}finally{ne(Y.LifecycleHookEnd,a,c)}}else{ne(Y.LifecycleHookStart,i,o);try{o.call(i)}finally{ne(Y.LifecycleHookEnd,i,o)}}}}}function nC(e,t,n){return rC(e,t.parent,n)}function rC(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Mt];if(kn(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===kt.None||i===kt.Emulated)return null}return xt(r,n)}function iC(e,t,n){return sC(e,t,n)}function oC(e,t,n){return e.type&40?xt(e,n):null}var sC=oC,lm;function Pf(e,t,n,r){let i=nC(e,r,t),o=t[ce],s=r.parent||t[ft],a=iC(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)im(o,i,n[c],a,!1);else im(o,i,n,a,!1);lm!==void 0&&lm(o,r,t,n,i)}function Ao(e,t){if(t!==null){let n=t.type;if(n&3)return xt(t,e);if(n&4)return sf(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ao(e,r);{let i=e[t.index];return At(i)?sf(-1,i):ht(i)}}else{if(n&128)return Ao(e,t.next);if(n&32)return Nf(t,e)()||ht(e[t.index]);{let r=yv(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=An(e[tt]);return Ao(i,r)}else return Ao(e,t.next)}}}return null}function yv(e,t){if(t!==null){let r=e[tt][ft],i=t.projection;return r.projection[i]}return null}function sf(e,t){let n=me+e+1;if(n<t.length){let r=t[n],i=r[F].firstChild;if(i!==null)return Ao(r,i)}return t[On]}function Ff(e,t,n,r,i,o,s){for(;n!=null;){let a=r[hn];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(s&&t===0&&(c&&hi(ht(c),r),n.flags|=2),!If(n))if(l&8)Ff(e,t,n.child,r,i,o,!1),di(t,e,a,i,c,n,o,r);else if(l&32){let u=Nf(n,r),d;for(;d=u();)di(t,e,a,i,d,n,o,r);di(t,e,a,i,c,n,o,r)}else l&16?aC(e,t,r,n,i,o):di(t,e,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Tc(e,t,n,r,i,o){Ff(n,r,e.firstChild,t,i,o,!1)}function aC(e,t,n,r,i,o){let s=n[tt],c=s[ft].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];di(t,e,n[hn],i,u,r,o,n)}else{let l=c,u=s[Se];Bm(r)&&(l.flags|=128),Ff(e,t,l,u,i,o,!0)}}function cC(e,t,n,r,i,o,s){let a=r[On],c=ht(r);a!==c&&di(t,e,n,o,a,i,s);for(let l=me;l<r.length;l++){let u=r[l];Tc(u[F],u,e,t,o,a)}}function lC(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Jt.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Jt.Important),e.setStyle(n,r,i,o))}}function _v(e,t,n,r,i){let o=Rt(),s=r&2;try{Pn(-1),s&&t.length>Pe&&fv(e,t,Pe,!1);let a=s?Y.TemplateUpdateStart:Y.TemplateCreateStart;ne(a,i,n),n(r,i)}finally{Pn(o);let a=s?Y.TemplateUpdateEnd:Y.TemplateCreateEnd;ne(a,i,n)}}function Lf(e,t,n){mC(e,t,n),(n.flags&64)===64&&vC(e,t,n)}function jf(e,t,n=xt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function uC(e,t,n,r){let o=r.get(Zm,Km)||n===kt.ShadowDom||n===kt.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,o);return dC(s),s}function dC(e){fC(e)}var fC=()=>null;function hC(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function bv(e,t,n,r,i,o){let s=t[F];if(Vf(e,s,t,n,r)){kn(e)&&gC(t,e.index);return}e.type&3&&(n=hC(n)),pC(e,t,n,r,i,o)}function pC(e,t,n,r,i,o){if(e.type&3){let s=xt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function gC(e,t){let n=pt(t,e);n[L]&16||(n[L]|=64)}function mC(e,t,n){let r=n.directiveStart,i=n.directiveEnd;kn(n)&&qD(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||oc(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=sc(t,e,s,n);if(hi(c,t),o!==null&&wC(t,s-r,c,a,n,o),Kt(a)){let l=pt(n.index,t);l[ge]=sc(t,e,s,n)}}}function vC(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Fg();try{Pn(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Ha(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&yC(c,l)}}finally{Pn(-1),Ha(s)}}function yC(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function wv(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];FD(t,o.selectors,!1)&&(r??=[],Kt(o)?r.unshift(o):r.push(o))}return r}function _C(e,t,n,r,i,o){let s=xt(e,t);bC(t[ce],s,o,e.value,n,r,i)}function bC(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?fn(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function wC(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];of(r,n,c,l)}}function EC(e,t,n,r,i){let o=Pe+n,s=t[F],a=i(s,t,e,r,n);t[o]=a,ui(e,!0);let c=e.type===2;return c?(iv(t[ce],a,e),(Cg()===0||Co(e))&&hi(a,t),Ig()):hi(a,t),Wa()&&(!c||!If(e))&&Pf(s,t,a,e),e}function DC(e){let t=e;return Md()?Rg():(t=t.parent,ui(t,!1)),t}function CC(e,t){let n=e[hn];if(!n)return;let r;try{r=n.get(rt,null)}catch{r=null}r?.(t)}function Vf(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];of(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];of(u,l,r,i),a=!0}return a}function IC(e,t){let n=pt(t,e),r=n[F];SC(r,n);let i=n[Mt];i!==null&&n[oi]===null&&(n[oi]=Ym(i,n[hn])),ne(Y.ComponentStart);try{Uf(r,n,n[ge])}finally{ne(Y.ComponentEnd,n[ge])}}function SC(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Uf(e,t,n){qa(t);try{let r=e.viewQuery;r!==null&&rf(1,r,n);let i=e.template;i!==null&&_v(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[pr]?.finishViewCreation(e),e.staticContentQueries&&Jm(e,t),e.staticViewQueries&&rf(2,e.viewQuery,n);let o=e.components;o!==null&&TC(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[L]&=-5,za()}}function TC(e,t){for(let n=0;n<t.length;n++)IC(e,t[n])}function Mc(e,t,n,r){let i=O(null);try{let o=t.tView,a=e[L]&4096?4096:16,c=xf(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[fr]=l;let u=e[pr];return u!==null&&(c[pr]=u.createEmbeddedView(o)),Uf(o,c,n),c}finally{O(i)}}function No(e,t){return!t||t.firstChild===null||Bm(e)}function Oo(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(ht(o)),At(o)&&Ev(o,r);let s=n.type;if(s&8)Oo(e,t,n.child,r);else if(s&32){let a=Nf(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=yv(t,n);if(Array.isArray(a))r.push(...a);else{let c=An(t[tt]);Oo(c[F],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ev(e,t){for(let n=me;n<e.length;n++){let r=e[n],i=r[F].firstChild;i!==null&&Oo(r[F],r,i,t)}e[On]!==e[Mt]&&t.push(e[On])}function Dv(e){if(e[gr]!==null){for(let t of e[gr])t.impl.addSequence(t);e[gr].length=0}}var Cv=[];function MC(e){return e[nt]??AC(e)}function AC(e){let t=Cv.pop()??Object.create(RC);return t.lView=e,t}function xC(e){e.lView[nt]!==e&&(e.lView=null,Cv.push(e))}var RC=W(D({},eo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{li(e.lView)},consumerOnSignalRead(){this.lView[nt]=this}});function NC(e){let t=e[nt]??Object.create(OC);return t.lView=e,t}var OC=W(D({},eo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=An(e.lView);for(;t&&!Iv(t[F]);)t=An(t);t&&Cd(t)},consumerOnSignalRead(){this.lView[nt]=this}});function Iv(e){return e.type!==2}function Sv(e){if(e[wo]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[wo])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[L]&8192)}}var kC=100;function Tv(e,t=0){let r=e[Gt].rendererFactory,i=!1;i||r.begin?.();try{PC(e,t)}finally{i||r.end?.()}}function PC(e,t){let n=Ad();try{xd(!0),af(e,t);let r=0;for(;So(e);){if(r===kC)throw new C(103,!1);r++,af(e,1)}}finally{xd(n)}}function FC(e,t,n,r){if(vr(t))return;let i=t[L],o=!1,s=!1;qa(t);let a=!0,c=null,l=null;o||(Iv(e)?(l=MC(t),c=no(l)):Qs()===null?(a=!1,l=NC(t),c=no(l)):t[nt]&&(ro(t[nt]),t[nt]=null));try{Dd(t),Og(e.bindingStartIndex),n!==null&&_v(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=e.preOrderCheckHooks;f!==null&&Xa(t,f,null)}else{let f=e.preOrderHooks;f!==null&&ec(t,f,0,null),$d(t,0)}if(s||LC(t),Sv(t),Mv(t,0),e.contentQueries!==null&&Jm(e,t),!o)if(u){let f=e.contentCheckHooks;f!==null&&Xa(t,f)}else{let f=e.contentHooks;f!==null&&ec(t,f,1),$d(t,1)}VC(e,t);let d=e.components;d!==null&&xv(t,d,0);let h=e.viewQuery;if(h!==null&&rf(2,h,r),!o)if(u){let f=e.viewCheckHooks;f!==null&&Xa(t,f)}else{let f=e.viewHooks;f!==null&&ec(t,f,2),$d(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Ua]){for(let f of t[Ua])f();t[Ua]=null}o||(Dv(t),t[L]&=-73)}catch(u){throw o||li(t),u}finally{l!==null&&(Xs(l,c),a&&xC(l)),za()}}function Mv(e,t){for(let n=Hm(e);n!==null;n=qm(n))for(let r=me;r<n.length;r++){let i=n[r];Av(i,t)}}function LC(e){for(let t=Hm(e);t!==null;t=qm(t)){if(!(t[L]&2))continue;let n=t[Do];for(let r=0;r<n.length;r++){let i=n[r];Cd(i)}}}function jC(e,t,n){ne(Y.ComponentStart);let r=pt(t,e);try{Av(r,n)}finally{ne(Y.ComponentEnd,r[ge])}}function Av(e,t){Ba(e)&&af(e,t)}function af(e,t){let r=e[F],i=e[L],o=e[nt],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&ea(o)),s||=!1,o&&(o.dirty=!1),e[L]&=-9217,s)FC(r,e,r.template,e[ge]);else if(i&8192){let a=O(null);try{Sv(e),Mv(e,1);let c=r.components;c!==null&&xv(e,c,1),Dv(e)}finally{O(a)}}}function xv(e,t,n){for(let r=0;r<t.length;r++)jC(e,t[r],n)}function VC(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Pn(~i);else{let o=i,s=n[++r],a=n[++r];Pg(s,o);let c=t[o];ne(Y.HostBindingsUpdateStart,c);try{a(2,c)}finally{ne(Y.HostBindingsUpdateEnd,c)}}}}finally{Pn(-1)}}function Bf(e,t){let n=Ad()?64:1088;for(e[Gt].changeDetectionScheduler?.notify(t);e;){e[L]|=n;let r=An(e);if(ci(e)&&!r)return e;e=r}return null}function Rv(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function Nv(e,t){let n=me+t;if(n<e.length)return e[n]}function Ac(e,t,n,r=!0){let i=t[F];if(UC(i,t,e,n),r){let s=sf(n,e),a=t[ce],c=a.parentNode(e[On]);c!==null&&JD(i,e[ft],a,t,c,s)}let o=t[oi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ov(e,t){let n=ko(e,t);return n!==void 0&&Sc(n[F],n),n}function ko(e,t){if(e.length<=me)return;let n=me+t,r=e[n];if(r){let i=r[fr];i!==null&&i!==e&&kf(i,r),t>0&&(e[n-1][dt]=r[dt]);let o=yo(e,me+t);YD(r[F],r);let s=o[pr];s!==null&&s.detachView(o[F]),r[Se]=null,r[dt]=null,r[L]&=-129}return r}function UC(e,t,n,r){let i=me+r,o=n.length;r>0&&(n[i-1][dt]=t),r<o-me?(t[dt]=n[i],fd(n,me+r,t)):(n.push(t),t[dt]=null),t[Se]=n;let s=t[fr];s!==null&&n!==s&&kv(s,t);let a=t[pr];a!==null&&a.insertView(e),$a(t),t[L]|=128}function kv(e,t){let n=e[Do],r=t[Se];if(Wt(r))e[L]|=2;else{let i=r[Se][tt];t[tt]!==i&&(e[L]|=2)}n===null?e[Do]=[t]:n.push(t)}var Fn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[F];return Oo(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[ge]}set context(t){this._lView[ge]=t}get destroyed(){return vr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Se];if(At(t)){let n=t[Eo],r=n?n.indexOf(this):-1;r>-1&&(ko(t,r),yo(n,r))}this._attachedToViewContainer=!1}Sc(this._lView[F],this._lView)}onDestroy(t){Id(this._lView,t)}markForCheck(){Bf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[L]&=-129}reattach(){$a(this._lView),this._lView[L]|=128}detectChanges(){this._lView[L]|=1024,Tv(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new C(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=ci(this._lView),n=this._lView[fr];n!==null&&!t&&kf(n,this._lView),vv(this._lView[F],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new C(902,!1);this._appRef=t;let n=ci(this._lView),r=this._lView[fr];r!==null&&!n&&kv(r,this._lView),$a(this._lView)}};var xc=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=BC;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Mc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Fn(o)}}return e})();function BC(){return $C(Ze(),q())}function $C(e,t){return e.type&4?new xc(t,e,_c(e,t)):null}function Rc(e,t,n,r,i){let o=e.data[t];if(o===null)o=HC(e,t,n,r,i),kg()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=xg();o.injectorIndex=s===null?-1:s.injectorIndex}return ui(o,!0),o}function HC(e,t,n,r,i){let o=Td(),s=Md(),a=s?o:o&&o.parent,c=e.data[t]=zC(e,a,n,t,r,i);return qC(e,c,o,s),c}function qC(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function zC(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Tg()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function GC(e){let t=e[bd]??[],r=e[Se][ce],i=[];for(let o of t)o.data[Wm]!==void 0?i.push(o):WC(o,r);e[bd]=i}function WC(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[Gm];for(;n<i;){let o=r.nextSibling;rv(t,r,!1),r=o,n++}}}var KC=()=>null,ZC=()=>null;function cf(e,t){return KC(e,t)}function Pv(e,t,n){return ZC(e,t,n)}var Fv=class{},Nc=class{},lf=class{resolveComponentFactory(t){throw new C(917,!1)}},$o=class{static NULL=new lf},Er=class{},_n=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>YC()}return e})();function YC(){let e=q(),t=Ze(),n=pt(t.index,e);return(Wt(n)?n:e)[ce]}var Lv=(()=>{class e{static \u0275prov=M({token:e,providedIn:"root",factory:()=>null})}return e})();var tc={},uf=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,tc,r);return i!==tc||n===tc?i:this.parentInjector.get(t,n,r)}};function um(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=Oa(i,a);else if(o==2){let c=a,l=t[++s];r=Oa(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function G(e,t=0){let n=q();if(n===null)return R(e,t);let r=Ze();return jm(r,n,Oe(e),t)}function jv(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}XC(e,t,n,a,o,c,l)}o!==null&&r!==null&&JC(n,r,o)}function JC(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new C(-301,!1);r.push(t[i],o)}}function QC(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function XC(e,t,n,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&Kt(f)&&(c=f,QC(e,n,h)),ef(oc(n,t),e,f.type)}o0(n,e.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=dv(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=Ro(n.mergedAttrs,f.hostAttrs),t0(e,n,t,d,f),i0(d,f,i),s!==null&&s.has(f)){let[g,v]=s.get(f);n.directiveToIndex.set(f.type,[d,g+n.directiveStart,v+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}e0(e,n,o)}function e0(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))dm(0,t,i,r),dm(1,t,i,r),hm(t,r,!1);else{let o=n.get(i);fm(0,t,o,r),fm(1,t,o,r),hm(t,r,!0)}}}function dm(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Vv(t,o)}}function fm(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Vv(t,s)}}function Vv(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function hm(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||Mf(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function t0(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=sr(i.type,!0)),s=new br(o,Kt(i),G,null);e.blueprint[r]=s,n[r]=s,n0(e,t,r,dv(e,n,i.hostVars,$e),i)}function n0(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;r0(s)!=a&&s.push(a),s.push(n,r,o)}}function r0(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function i0(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Kt(t)&&(n[""]=e)}}function o0(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Uv(e,t,n,r,i,o,s,a){let c=t[F],l=c.consts,u=Zt(l,s),d=Rc(c,e,n,r,u);return o&&jv(c,t,d,Zt(l,a),i),d.mergedAttrs=Ro(d.mergedAttrs,d.attrs),d.attrs!==null&&um(d,d.attrs,!1),d.mergedAttrs!==null&&um(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Bv(e,t){Am(e,t),wd(t)&&e.queries.elementEnd(t)}function s0(e,t,n){return e[t]=n}function mt(e,t,n){if(n===$e)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function $v(e,t,n,r){let i=mt(e,t,n);return mt(e,t+1,r)||i}function a0(e,t,n,r,i){let o=$v(e,t,n,r);return mt(e,t+2,i)||o}function zd(e,t,n){return function r(i){let o=kn(e)?pt(e.index,t):t;Bf(o,5);let s=t[ge],a=pm(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=pm(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function pm(e,t,n,r){let i=O(null);try{return ne(Y.OutputStart,t,n),n(r)!==!1}catch(o){return CC(e,o),!1}finally{ne(Y.OutputEnd,t,n),O(i)}}function c0(e,t,n,r,i,o,s,a){let c=Co(e),l=!1,u=null;if(!r&&c&&(u=u0(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=xt(e,n),h=r?r(d):d;bD(n,h,o,a);let f=i.listen(h,o,a);if(!l0(o)){let p=r?g=>r(ht(g[e.index])):e.index;Hv(p,t,n,o,a,f,!1)}}return l}function l0(e){return e.startsWith("animation")||e.startsWith("transition")}function u0(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[si],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Hv(e,t,n,r,i,o,s){let a=t.firstCreatePass?Dg(t):null,c=Eg(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function gm(e,t,n,r,i,o){let s=t[n],a=t[F],l=a.data[n].outputs[r],d=s[l].subscribe(o);Hv(e.index,a,t,i,o,d,!0)}var df=Symbol("BINDING");var uc=class extends $o{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Rn(t);return new pi(n,this.ngModule)}};function d0(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&Cc.SignalBased)!==0};return i&&(o.transform=i),o})}function f0(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function h0(e,t,n){let r=t instanceof ue?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new uf(n,r):n}function p0(e){let t=e.get(Er,null);if(t===null)throw new C(407,!1);let n=e.get(Lv,null),r=e.get(xn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function g0(e,t){let n=qv(e);return tv(t,n,n==="svg"?vg:n==="math"?yg:null)}function qv(e){return(e.selectors[0][0]||"div").toLowerCase()}var pi=class extends Nc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=d0(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=f0(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=UD(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){ne(Y.DynamicComponentStart);let a=O(null);try{let c=this.componentDef,l=m0(r,c,s,o),u=h0(c,i||this.ngModule,t),d=p0(u),h=d.rendererFactory.createRenderer(null,c),f=r?uC(h,r,c.encapsulation,u):g0(c,h),p=s?.some(mm)||o?.some(m=>typeof m!="function"&&m.bindings.some(mm)),g=xf(null,l,null,512|uv(c),null,null,d,h,u,null,Ym(f,u,!0));g[Pe]=f,qa(g);let v=null;try{let m=Uv(Pe,g,2,"#host",()=>l.directiveRegistry,!0,0);iv(h,f,m),hi(f,g),Lf(l,g,m),Qm(l,m,g),Bv(l,m),n!==void 0&&y0(m,this.ngContentSelectors,n),v=pt(m.index,g),g[ge]=v[ge],Uf(l,g,null)}catch(m){throw v!==null&&nf(v),nf(g),m}finally{ne(Y.DynamicComponentEnd),za()}return new dc(this.componentType,g,!!p)}finally{O(a)}}};function m0(e,t,n,r){let i=e?["ng-version","21.1.2"]:BD(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[df].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[df].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=ld(d);c.push(h)}return Af(0,null,v0(o,s),1,a,c,null,null,null,[i],null)}function v0(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function mm(e){let t=e[df].kind;return t==="input"||t==="twoWay"}var dc=class extends Fv{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Io(n[F],Pe),this.location=_c(this._tNode,n),this.instance=pt(this._tNode.index,n)[ge],this.hostView=this.changeDetectorRef=new Fn(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=Vf(r,i[F],i,t,n);this.previousInputValues.set(t,n);let s=pt(r.index,i);Bf(s,1)}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function y0(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var mi=(()=>{class e{static __NG_ELEMENT_ID__=_0}return e})();function _0(){let e=Ze();return w0(e,q())}var b0=mi,zv=class extends b0{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return _c(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){let t=Ef(this._hostTNode,this._hostLView);if(Nm(t)){let n=ic(t,this._hostLView),r=rc(t),i=n[F].data[r+8];return new _r(i,n)}else return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=vm(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-me}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=cf(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,No(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!WE(t),l;if(c)l=n;else{let v=n||{};l=v.index,r=v.injector,i=v.projectableNodes,o=v.environmentInjector||v.ngModuleRef,s=v.directives,a=v.bindings}let u=c?t:new pi(Rn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let m=(c?d:this.parentInjector).get(ue,null);m&&(o=m)}let h=Rn(u.componentType??{}),f=cf(this._lContainer,h?.id??null),p=f?.firstChild??null,g=u.create(d,i,p,o,s,a);return this.insertImpl(g.hostView,l,No(this._hostTNode,f)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(_g(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Se],l=new zv(c,c[ft],c[Se]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return Ac(s,i,o,r),t.attachToViewContainerRef(),fd(Gd(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=vm(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=ko(this._lContainer,n);r&&(yo(Gd(this._lContainer),n),Sc(r[F],r))}detach(t){let n=this._adjustIndex(t,-1),r=ko(this._lContainer,n);return r&&yo(Gd(this._lContainer),n)!=null?new Fn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function vm(e){return e[Eo]}function Gd(e){return e[Eo]||(e[Eo]=[])}function w0(e,t){let n,r=t[e.index];return At(r)?n=r:(n=Rv(r,t,null,e),t[e.index]=n,Rf(t,n)),D0(n,t,e,r),new zv(n,e,t)}function E0(e,t){let n=e[ce],r=n.createComment(""),i=xt(t,e),o=n.parentNode(i);return cc(n,o,r,n.nextSibling(i),!1),r}var D0=S0,C0=()=>!1;function I0(e,t,n){return C0(e,t,n)}function S0(e,t,n,r){if(e[On])return;let i;n.type&8?i=ht(r):i=E0(t,n),e[On]=i}var Dr=class{},Oc=class{};var fc=class extends Dr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new uc(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=cd(t);this._bootstrapComponents=cv(o.bootstrap),this._r3Injector=Pd(t,n,[{provide:Dr,useValue:this},{provide:$o,useValue:this.componentFactoryResolver},...r],un(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},hc=class extends Oc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new fc(this.moduleType,t,[])}};var Po=class extends Dr{injector;componentFactoryResolver=new uc(this);instance=null;constructor(t){super();let n=new cr([...t.providers,{provide:Dr,useValue:this},{provide:$o,useValue:this.componentFactoryResolver}],t.parent||bo(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Ho(e,t,n=null){return new Po({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var T0=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gd(!1,n.type),i=r.length>0?Ho([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=M({token:e,providedIn:"environment",factory:()=>new e(R(ue))})}return e})();function Le(e){return Lo(()=>{let t=Gv(e),n=W(D({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Df.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(T0).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||kt.Emulated,styles:e.styles||Ke,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Ln("NgStandalone"),Wv(n);let r=e.dependencies;return n.directiveDefs=ym(r,M0),n.pipeDefs=ym(r,og),n.id=R0(n),n})}function M0(e){return Rn(e)||ld(e)}function Pt(e){return Lo(()=>({type:e.type,bootstrap:e.bootstrap||Ke,declarations:e.declarations||Ke,imports:e.imports||Ke,exports:e.exports||Ke,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function A0(e,t){if(e==null)return Nn;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Cc.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function x0(e){if(e==null)return Nn;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function he(e){return Lo(()=>{let t=Gv(e);return Wv(t),t})}function Gv(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Nn,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ke,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:A0(e.inputs,t),outputs:x0(e.outputs),debugInfo:null}}function Wv(e){e.features?.forEach(t=>t(e))}function ym(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function R0(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function N0(e){return Object.getPrototypeOf(e.prototype).constructor}function vt(e){let t=N0(e.type),n=!0,r=[e];for(;t;){let i;if(Kt(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new C(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=Wd(e.inputs),s.declaredInputs=Wd(e.declaredInputs),s.outputs=Wd(e.outputs);let a=i.hostBindings;a&&L0(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&P0(e,c),l&&F0(e,l),O0(e,i),ig(e.outputs,i.outputs),Kt(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===vt&&(n=!1)}}t=Object.getPrototypeOf(t)}k0(r)}function O0(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function k0(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Ro(i.hostAttrs,n=Ro(n,i.hostAttrs))}}function Wd(e){return e===Nn?{}:e===Ke?[]:e}function P0(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function F0(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function L0(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function Kv(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Ro(e.mergedAttrs,e.attrs);let u=e.tView=Af(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),ui(e,!1);let c=V0(n,t,e,r);Wa()&&Pf(n,t,c,e),hi(c,t);let l=Rv(c,t,c,e);t[r+Pe]=l,Rf(t,l),I0(l,e,t)}function j0(e,t,n,r,i,o,s,a,c,l,u){let d=n+Pe,h;return t.firstCreatePass?(h=Rc(t,d,4,s||null,a||null),Sd()&&jv(t,e,h,Zt(t.consts,l),wv),Am(t,h)):h=t.data[d],Kv(h,e,t,n,r,i,o,c),Co(h)&&Lf(t,e,h),l!=null&&jf(e,h,u),h}function pc(e,t,n,r,i,o,s,a,c,l,u){let d=n+Pe,h;if(t.firstCreatePass){if(h=Rc(t,d,4,s||null,a||null),l!=null){let f=Zt(t.consts,l);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[d];return Kv(h,e,t,n,r,i,o,c),l!=null&&jf(e,h,u),h}function kc(e,t,n,r,i,o,s,a){let c=q(),l=Fe(),u=Zt(l.consts,o);return j0(c,l,e,t,n,r,i,u,void 0,s,a),kc}var V0=U0;function U0(e,t,n,r){return Ka(!0),t[ce].createComment("")}var $f=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Zv(e){return typeof e=="function"&&e[ze]!==void 0}function Hf(e){return Zv(e)&&typeof e.set=="function"}var qf=new T("");function jn(e){return!!e&&typeof e.then=="function"}function zf(e){return!!e&&typeof e.subscribe=="function"}var Gf=new T("");function Pc(e){return Tt([{provide:Gf,multi:!0,useValue:e}])}var Wf=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=y(Gf,{optional:!0})??[];injector=y(Qe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Te(this.injector,i);if(jn(o))n.push(o);else if(zf(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Fc=new T("");function Yv(){Iu(()=>{let e="";throw new C(600,e)})}function Jv(e){return e.isBoundToModule}var B0=10;var Ft=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=y(rt);afterRenderManager=y(Of);zonelessEnabled=y(Mo);rootEffectScheduler=y(Bd);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new le;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=y(gn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(P(n=>!n))}constructor(){y(yn,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=y(ue);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Qe.NULL){return this._injector.get(ke).run(()=>{ne(Y.BootstrapComponentStart);let s=n instanceof Nc;if(!this._injector.get(Wf).done){let p="";throw new C(405,p)}let c;s?c=n:c=this._injector.get($o).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=Jv(c)?void 0:this._injector.get(Dr),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(qf,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),xo(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),ne(Y.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ne(Y.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ic.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ne(Y.ChangeDetectionEnd),new C(101,!1);let n=O(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,O(n),this.afterTick.next(),ne(Y.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Er,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<B0;){ne(Y.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ne(Y.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!So(i))continue;let o=r&&!this.zonelessEnabled?0:1;Tv(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>So(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;xo(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Fc,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new C(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xo(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function vi(e,t,n,r){let i=q(),o=yr();if(mt(i,o,t)){let s=Fe(),a=Ga();_C(a,i,e,t,n,r)}return vi}var IL=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ff=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function Kd(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function $0(e,t,n,r){let i,o,s=0,a=e.length-1,c=void 0;if(Array.isArray(t)){O(r);let l=t.length-1;for(O(null);s<=a&&s<=l;){let u=e.at(s),d=t[s],h=Kd(s,u,s,d,n);if(h!==0){h<0&&e.updateValue(s,d),s++;continue}let f=e.at(a),p=t[l],g=Kd(a,f,l,p,n);if(g!==0){g<0&&e.updateValue(a,p),a--,l--;continue}let v=n(s,u),m=n(a,f),x=n(s,d);if(Object.is(x,m)){let I=n(l,p);Object.is(I,v)?(e.swap(s,a),e.updateValue(a,p),l--,a--):e.move(a,s),e.updateValue(s,d),s++;continue}if(i??=new gc,o??=bm(e,s,a,n),hf(e,i,s,x))e.updateValue(s,d),s++,a++;else if(o.has(x))i.set(v,e.detach(s)),a--;else{let I=e.create(s,t[s]);e.attach(s,I),s++,a++}}for(;s<=l;)_m(e,i,n,s,t[s]),s++}else if(t!=null){O(r);let l=t[Symbol.iterator]();O(null);let u=l.next();for(;!u.done&&s<=a;){let d=e.at(s),h=u.value,f=Kd(s,d,s,h,n);if(f!==0)f<0&&e.updateValue(s,h),s++,u=l.next();else{i??=new gc,o??=bm(e,s,a,n);let p=n(s,h);if(hf(e,i,s,p))e.updateValue(s,h),s++,a++,u=l.next();else if(!o.has(p))e.attach(s,e.create(s,h)),s++,a++,u=l.next();else{let g=n(s,d);i.set(g,e.detach(s)),a--}}}for(;!u.done;)_m(e,i,n,e.length,u.value),u=l.next()}for(;s<=a;)e.destroy(e.detach(a--));i?.forEach(l=>{e.destroy(l)})}function hf(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function _m(e,t,n,r,i){if(hf(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function bm(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var gc=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function Ee(e,t,n,r,i,o,s,a){Ln("NgControlFlow");let c=q(),l=Fe(),u=Zt(l.consts,o);return pc(c,l,e,t,n,r,i,u,256,s,a),Kf}function Kf(e,t,n,r,i,o,s,a){Ln("NgControlFlow");let c=q(),l=Fe(),u=Zt(l.consts,o);return pc(c,l,e,t,n,r,i,u,512,s,a),Kf}function De(e,t){Ln("NgControlFlow");let n=q(),r=yr(),i=n[r]!==$e?n[r]:-1,o=i!==-1?mc(n,Pe+i):void 0,s=0;if(mt(n,r,e)){let a=O(null);try{if(o!==void 0&&Ov(o,s),e!==-1){let c=Pe+e,l=mc(n,c),u=vf(n[F],c),d=Pv(l,u,n),h=Mc(n,u,t,{dehydratedView:d});Ac(l,h,s,No(u,d))}}finally{O(a)}}else if(o!==void 0){let a=Nv(o,s);a!==void 0&&(a[ge]=t)}}var pf=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-me}};var gf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function bn(e,t,n,r,i,o,s,a,c,l,u,d,h){Ln("NgControlFlow");let f=q(),p=Fe(),g=c!==void 0,v=q(),m=a?s.bind(v[tt][ge]):s,x=new gf(g,m);v[Pe+e]=x,pc(f,p,e+1,t,n,r,i,Zt(p.consts,o),256),g&&pc(f,p,e+2,c,l,u,d,Zt(p.consts,h),512)}var mf=class extends ff{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-me}at(t){return this.getLView(t)[ge].$implicit}attach(t,n){let r=n[oi];this.needsIndexUpdate||=t!==this.length,Ac(this.lContainer,n,t,No(this.templateTNode,r)),H0(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,q0(this.lContainer,t),z0(this.lContainer,t)}create(t,n){let r=cf(this.lContainer,this.templateTNode.tView.ssrId);return Mc(this.hostLView,this.templateTNode,new pf(this.lContainer,n,t),{dehydratedView:r})}destroy(t){Sc(t[F],t)}updateValue(t,n){this.getLView(t)[ge].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[ge].$index=t}getLView(t){return G0(this.lContainer,t)}};function wn(e){let t=O(null),n=Rt();try{let r=q(),i=r[F],o=r[n],s=n+1,a=mc(r,s);if(o.liveCollection===void 0){let l=vf(i,s);o.liveCollection=new mf(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if($0(c,e,o.trackByFn,t),c.updateIndexes(),o.hasEmptyBlock){let l=yr(),u=c.length===0;if(mt(r,l,u)){let d=n+2,h=mc(r,d);if(u){let f=vf(i,d),p=Pv(h,f,r),g=Mc(r,f,void 0,{dehydratedView:p});Ac(h,g,0,No(f,p))}else i.firstUpdatePass&&GC(h),Ov(h,0)}}}finally{O(t)}}function mc(e,t){return e[t]}function H0(e,t){if(e.length<=me)return;let n=me+t,r=e[n],i=r?r[mr]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[hn];KD(o,i),wr.delete(r[pn]),i.detachedLeaveAnimationFns=void 0}}function q0(e,t){if(e.length<=me)return;let n=me+t,r=e[n],i=r?r[mr]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function z0(e,t){return ko(e,t)}function G0(e,t){return Nv(e,t)}function vf(e,t){return Io(e,t)}function He(e,t,n){let r=q(),i=yr();if(mt(r,i,t)){let o=Fe(),s=Ga();bv(s,r,e,t,r[ce],n)}return He}function yf(e,t,n,r,i){Vf(t,e,n,i?"class":"style",r)}function b(e,t,n,r){let i=q(),o=i[F],s=e+Pe,a=o.firstCreatePass?Uv(s,i,2,t,wv,Sd(),n,r):o.data[s];if(EC(a,i,e,t,W0),Co(a)){let c=i[F];Lf(c,i,a),Qm(c,a,i)}return r!=null&&jf(i,a),b}function _(){let e=Fe(),t=Ze(),n=DC(t);return e.firstCreatePass&&Bv(e,n),Mg(n)&&Ag(),Sg(),n.classesWithoutHost!=null&&XE(n)&&yf(e,n,q(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&eD(n)&&yf(e,n,q(),n.stylesWithoutHost,!1),_}function yi(e,t,n,r){return b(e,t,n,r),_(),yi}var W0=(e,t,n,r,i)=>(Ka(!0),tv(t[ce],r,$g()));function it(){return q()}var qo="en-US";var K0=qo;function Qv(e){typeof e=="string"&&(K0=e.toLowerCase().replace(/_/g,"-"))}function oe(e,t,n){let r=q(),i=Fe(),o=Ze();return Xv(i,r,r[ce],o,e,t,n),oe}function Xv(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=zd(r,t,o),c0(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=zd(r,t,o),gm(r,t,h,f,i,c)}if(l&&l.length)for(let d of l)c??=zd(r,t,o),gm(r,t,d,i,i,c)}}function z(e=1){return Bg(e)}function Qa(e,t){return e<<17|t<<2}function Cr(e){return e>>17&32767}function Z0(e){return(e&2)==2}function Y0(e,t){return e&131071|t<<17}function _f(e){return e|2}function gi(e){return(e&131068)>>2}function Zd(e,t){return e&-131069|t<<2}function J0(e){return(e&1)===1}function bf(e){return e|1}function Q0(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Cr(s),c=gi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||ii(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Cr(e[a+1]);e[r+1]=Qa(h,a),h!==0&&(e[h+1]=Zd(e[h+1],r)),e[a+1]=Y0(e[a+1],r)}else e[r+1]=Qa(a,0),a!==0&&(e[a+1]=Zd(e[a+1],r)),a=r;else e[r+1]=Qa(c,0),a===0?a=r:e[c+1]=Zd(e[c+1],r),c=r;l&&(e[r+1]=_f(e[r+1])),wm(e,u,r,!0),wm(e,u,r,!1),X0(t,u,e,r,o),s=Qa(a,c),o?t.classBindings=s:t.styleBindings=s}function X0(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&ii(o,t)>=0&&(n[r+1]=bf(n[r+1]))}function wm(e,t,n,r){let i=e[n+1],o=t===null,s=r?Cr(i):gi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];eI(c,t)&&(a=!0,e[s+1]=r?bf(l):_f(l)),s=r?Cr(l):gi(l)}a&&(e[n+1]=r?_f(i):bf(i))}function eI(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?ii(e,t)>=0:!1}var Ot={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tI(e){return e.substring(Ot.key,Ot.keyEnd)}function nI(e){return rI(e),ey(e,ty(e,0,Ot.textEnd))}function ey(e,t){let n=Ot.textEnd;return n===t?-1:(t=Ot.keyEnd=iI(e,Ot.key=t,n),ty(e,t,n))}function rI(e){Ot.key=0,Ot.keyEnd=0,Ot.value=0,Ot.valueEnd=0,Ot.textEnd=e.length}function ty(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function iI(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function zo(e,t){return sI(e,t,null,!0),zo}function Zf(e){aI(hI,oI,e,!0)}function oI(e,t){for(let n=nI(t);n>=0;n=ey(t,n))ja(e,tI(t),!0)}function sI(e,t,n,r){let i=q(),o=Fe(),s=To(2);if(o.firstUpdatePass&&ry(o,e,s,r),t!==$e&&mt(i,s,t)){let a=o.data[Rt()];iy(o,a,i,i[ce],e,i[s+1]=gI(t,n),r,s)}}function aI(e,t,n,r){let i=Fe(),o=To(2);i.firstUpdatePass&&ry(i,null,o,r);let s=q();if(n!==$e&&mt(s,o,n)){let a=i.data[Rt()];if(oy(a,r)&&!ny(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=Oa(c,n||"")),yf(i,a,s,n,r)}else pI(i,a,s,s[ce],s[o+1],s[o+1]=fI(e,t,n),r,o)}}function ny(e,t){return t>=e.expandoStartIndex}function ry(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Rt()],s=ny(e,n);oy(o,r)&&t===null&&!s&&(t=!1),t=cI(i,o,t,r),Q0(i,o,t,n,s,r)}}function cI(e,t,n,r){let i=Lg(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=Yd(null,e,t,n,r),n=Fo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=Yd(i,e,t,n,r),o===null){let c=lI(e,t,r);c!==void 0&&Array.isArray(c)&&(c=Yd(null,e,t,c[1],r),c=Fo(c,t.attrs,r),uI(e,t,r,c))}else o=dI(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function lI(e,t,n){let r=n?t.classBindings:t.styleBindings;if(gi(r)!==0)return e[Cr(r)]}function uI(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Cr(i)]=r}function dI(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=Fo(r,s,n)}return Fo(r,t.attrs,n)}function Yd(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=Fo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function Fo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),ja(e,s,n?!0:t[++o]))}return e===void 0?null:e}function fI(e,t,n){if(n==null||n==="")return Ke;let r=[],i=Uo(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(i instanceof Set)for(let o of i)e(r,o,!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function hI(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&ja(e,r,n)}function pI(e,t,n,r,i,o,s,a){i===$e&&(i=Ke);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,g;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),p!==null&&iy(e,t,n,r,p,g,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function iy(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=J0(l)?Em(c,t,n,i,gi(l),s):void 0;if(!vc(u)){vc(o)||Z0(l)&&(o=Em(c,null,n,i,a,s));let d=Ed(Rt(),n);lC(r,s,d,i,o)}}function Em(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===$e&&(h=d?Ke:void 0);let f=d?Va(h,r):u===r?h:void 0;if(l&&!vc(f)&&(f=Va(c,r)),vc(f)&&(a=f,s))return a;let p=e[i+1];i=s?Cr(p):gi(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Va(c,r))}return a}function vc(e){return e!==void 0}function gI(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=un(Uo(e)))),e}function oy(e,t){return(e.flags&(t?8:16))!==0}function w(e,t=""){let n=q(),r=Fe(),i=e+Pe,o=r.firstCreatePass?Rc(r,i,1,t,null):r.data[i],s=mI(r,n,o,t);n[i]=s,Wa()&&Pf(r,n,s,o),ui(o,!1)}var mI=(e,t,n,r)=>(Ka(!0),CD(t[ce],r));function vI(e,t,n,r=""){return mt(e,yr(),n)?t+fn(n)+r:$e}function yI(e,t,n,r,i,o=""){let s=Rd(),a=$v(e,s,n,i);return To(2),a?t+fn(n)+r+fn(i)+o:$e}function _I(e,t,n,r,i,o,s,a=""){let c=Rd(),l=a0(e,c,n,i,s);return To(3),l?t+fn(n)+r+fn(i)+o+fn(s)+a:$e}function de(e){return Xe("",e),de}function Xe(e,t,n){let r=q(),i=vI(r,e,t,n);return i!==$e&&Yf(r,Rt(),i),Xe}function _i(e,t,n,r,i){let o=q(),s=yI(o,e,t,n,r,i);return s!==$e&&Yf(o,Rt(),s),_i}function bi(e,t,n,r,i,o,s){let a=q(),c=_I(a,e,t,n,r,i,o,s);return c!==$e&&Yf(a,Rt(),c),bi}function Yf(e,t,n){let r=Ed(t,e);ID(e[ce],r,n)}function Lt(e,t,n){Hf(t)&&(t=t());let r=q(),i=yr();if(mt(r,i,t)){let o=Fe(),s=Ga();bv(s,r,e,t,r[ce],n)}return Lt}function Xt(e,t){let n=Hf(e);return n&&e.set(t),n}function jt(e,t){let n=q(),r=Fe(),i=Ze();return Xv(r,n,n[ce],i,e,t),jt}function Dm(e,t,n){let r=Fe();r.firstCreatePass&&sy(t,r.data,r.blueprint,Kt(e),n)}function sy(e,t,n,r,i){if(e=Oe(e),Array.isArray(e))for(let o=0;o<e.length;o++)sy(e[o],t,n,r,i);else{let o=Fe(),s=q(),a=Ze(),c=ar(e)?e:Oe(e.provide),l=vd(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ar(e)||!e.multi){let f=new br(l,i,G,null),p=Qd(c,t,i?u:u+h,d);p===-1?(ef(oc(a,s),o,c),Jd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=Qd(c,t,u+h,d),p=Qd(c,t,u,u+h),g=f>=0&&n[f],v=p>=0&&n[p];if(i&&!v||!i&&!g){ef(oc(a,s),o,c);let m=EI(i?wI:bI,n.length,i,r,l,e);!i&&v&&(n[p].providerFactory=m),Jd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(m),s.push(m)}else{let m=ay(n[i?p:f],l,!i&&r);Jd(o,e,f>-1?f:p,m)}!i&&r&&v&&n[p].componentProviders++}}}function Jd(e,t,n,r){let i=ar(t),o=pg(t);if(i||o){let c=(o?Oe(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function ay(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Qd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function bI(e,t,n,r,i){return wf(this.multi,[])}function wI(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=sc(r,r[F],this.providerFactory.index,i);s=c.slice(0,a),wf(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],wf(o,s);return s}function wf(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function EI(e,t,n,r,i,o){let s=new br(e,n,G,null);return s.multi=[],s.index=t,s.componentProviders=0,ay(s,i,r&&!n),s}function Vn(e,t){return n=>{n.providersResolver=(r,i)=>Dm(r,i?i(e):e,!1),t&&(n.viewProvidersResolver=(r,i)=>Dm(r,i?i(t):t,!0))}}function Un(e,t,n){return CI(q(),Ng(),e,t,n)}function DI(e,t){let n=e[t];return n===$e?void 0:n}function CI(e,t,n,r,i,o){let s=t+n;return mt(e,s,i)?s0(e,s+1,o?r.call(o,i):r(i)):DI(e,s+1)}var yc=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Jf=(()=>{class e{compileModuleSync(n){return new hc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=cd(n),o=cv(i.declarations).reduce((s,a)=>{let c=Rn(a);return c&&s.push(new pi(c)),s},[]);return new yc(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var cy=(()=>{class e{applicationErrorHandler=y(rt);appRef=y(Ft);taskService=y(gn);ngZone=y(ke);zonelessEnabled=y(Mo);tracing=y(yn,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new xe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(po):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(y(Ud,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Gg:Fd;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(po+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ly(){return[{provide:xn,useExisting:cy},{provide:ke,useClass:go},{provide:Mo,useValue:!0}]}function II(){return typeof $localize<"u"&&$localize.locale||qo}var Lc=new T("",{factory:()=>y(Lc,{optional:!0,skipSelf:!0})||II()});function ot(e,t){return ta(e,t?.equal)}var dy=Symbol("InputSignalNode#UNSET"),GI=W(D({},na),{transformFn:void 0,applyValueToInputSignal(e,t){io(e,t)}});function fy(e,t){let n=Object.create(GI);n.value=e,n.transformFn=t?.transform;function r(){if(to(n),n.value===dy){let i=null;throw new C(-950,i)}return n.value}return r[ze]=n,r}var Vc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>jo(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function uy(e,t){return fy(e,t)}function WI(e){return fy(dy,e)}var hy=(uy.required=WI,uy);var Qf=new T(""),KI=new T("");function Go(e){return!e.moduleRef}function ZI(e){let t=Go(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ke);return n.run(()=>{Go(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(rt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Go(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Qf);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Qf);s.add(o),e.moduleRef.onDestroy(()=>{xo(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return JI(r,n,()=>{let o=t.get(gn),s=o.add(),a=t.get(Wf);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Lc,qo);if(Qv(c||qo),!t.get(KI,!0))return Go(e)?t.get(Ft):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Go(e)){let u=t.get(Ft);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return YI?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>{o.remove(s)})})})}var YI;function JI(e,t,n){try{let r=n();return jn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var jc=null;function QI(e=[],t){return Qe.create({name:t,providers:[{provide:_o,useValue:"platform"},{provide:Qf,useValue:new Set([()=>jc=null])},...e]})}function XI(e=[]){if(jc)return jc;let t=QI(e);return jc=t,Yv(),eS(t),t}function eS(e){let t=e.get(wc,null);Te(e,()=>{t?.forEach(n=>n())})}function py(){return!1}var tS=1e4;var q2=tS-1e3;var Sr=(()=>{class e{static __NG_ELEMENT_ID__=nS}return e})();function nS(e){return rS(Ze(),q(),(e&16)===16)}function rS(e,t,n){if(kn(e)&&!n){let r=pt(e.index,t);return new Fn(r,r)}else if(e.type&175){let r=t[tt];return new Fn(r,t)}return null}function gy(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;ne(Y.BootstrapApplicationStart);try{let o=i?.injector??XI(r),s=[ly(),Kg,...n||[]],a=new Po({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return ZI({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{ne(Y.BootstrapApplicationEnd)}}function Tr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var my=null;function yt(){return my}function Xf(e){my??=e}var Wo=class{},wi=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>y(vy),providedIn:"platform"})}return e})();var vy=(()=>{class e extends wi{_location;_history;_doc=y(ve);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yt().getBaseHref(this._doc)}onPopState(n){let r=yt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=yt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function by(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function yy(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function Bn(e){return e&&e[0]!=="?"?`?${e}`:e}var Ei=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>y(oS),providedIn:"root"})}return e})(),iS=new T(""),oS=(()=>{class e extends Ei{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??y(ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return by(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Bn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Bn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(R(wi),R(iS,8))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Di=(()=>{class e{_subject=new le;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=cS(yy(_y(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Bn(r))}normalize(n){return e.stripTrailingSlash(aS(this._basePath,_y(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Bn;static joinWithSlash=by;static stripTrailingSlash=yy;static \u0275fac=function(r){return new(r||e)(R(Ei))};static \u0275prov=M({token:e,factory:()=>sS(),providedIn:"root"})}return e})();function sS(){return new Di(R(Ei))}function aS(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function _y(e){return e.replace(/\/index.html$/,"")}function cS(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var eh=(()=>{class e{_viewContainer;_context=new Uc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){wy(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){wy(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(G(mi),G(xc))};static \u0275dir=he({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Uc=class{$implicit=null;ngIf=null};function wy(e,t){if(e&&!e.createEmbeddedView)throw new C(2020,!1)}var en=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Pt({type:e});static \u0275inj=ut({})}return e})();function Ko(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Mr=class{};var Ey="browser";var Zo=class{_doc;constructor(t){this._doc=t}manager},Bc=(()=>{class e extends Zo{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(R(ve))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),qc=new T(""),ih=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Bc));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Bc);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new C(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(R(qc),R(ke))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),th="ng-app-id";function Cy(e){for(let t of e)t.remove()}function Iy(e,t){let n=t.createElement("style");return n.textContent=e,n}function uS(e,t,n,r){let i=e.head?.querySelectorAll(`style[${th}="${t}"],link[${th}="${t}"]`);if(i)for(let o of i)o.removeAttribute(th),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function rh(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var oh=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,uS(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Iy);r?.forEach(i=>this.addUsage(i,this.external,rh))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Cy(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Cy(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Iy(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,rh(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(R(ve),R(bc),R(Ec,8),R(Vo))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),nh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sh=/%COMP%/g;var Ty="%COMP%",dS=`_nghost-${Ty}`,fS=`_ngcontent-${Ty}`,hS=!0,pS=new T("",{factory:()=>hS});function gS(e){return fS.replace(sh,e)}function mS(e){return dS.replace(sh,e)}function My(e,t){return t.map(n=>n.replace(sh,e))}var ah=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new Yo(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Hc?i.applyToHost(n):i instanceof Jo&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case kt.Emulated:o=new Hc(c,l,r,this.appId,u,s,a,d);break;case kt.ShadowDom:return new $c(c,n,r,s,a,this.nonce,d,l);case kt.ExperimentalIsolatedShadowDom:return new $c(c,n,r,s,a,this.nonce,d);default:o=new Jo(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(R(ih),R(oh),R(bc),R(pS),R(ve),R(ke),R(Ec),R(yn,8))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),Yo=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(nh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Sy(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Sy(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new C(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=nh[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=nh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Jt.DashCase|Jt.Important)?t.style.setProperty(n,r,i&Jt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Jt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=yt().getGlobalEventTarget(this.doc,t),!t))throw new C(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function Sy(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var $c=class extends Yo{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,i,o,s,a,c){super(t,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=My(r.id,l);for(let d of l){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=d,this.shadowRoot.appendChild(h)}let u=r.getExternalStyles?.();if(u)for(let d of u){let h=rh(d,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Jo=class extends Yo{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?My(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&wr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Hc=class extends Jo{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=gS(l),this.hostAttr=mS(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var zc=class e extends Wo{supportsDOMEvents=!0;static makeCurrent(){Xf(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=vS();return n==null?null:yS(n)}resetBaseElement(){Qo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ko(document.cookie,t)}},Qo=null;function vS(){return Qo=Qo||document.head.querySelector("base"),Qo?Qo.getAttribute("href"):null}function yS(e){return new URL(e,document.baseURI).pathname}var _S=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),Ay=["alt","control","meta","shift"],bS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wS={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},xy=(()=>{class e extends Zo{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ay.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=bS[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ay.forEach(s=>{if(s!==i){let a=wS[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(R(ve))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})();async function ch(e,t,n){let r=D({rootComponent:e},ES(t,n));return gy(r)}function ES(e,t){return{platformRef:t?.platformRef,appProviders:[...TS,...e?.providers??[]],platformProviders:SS}}function DS(){zc.makeCurrent()}function CS(){return new zt}function IS(){return Cf(document),document}var SS=[{provide:Vo,useValue:Ey},{provide:wc,useValue:DS,multi:!0},{provide:ve,useFactory:IS}];var TS=[{provide:_o,useValue:"root"},{provide:zt,useFactory:CS},{provide:qc,useClass:Bc,multi:!0},{provide:qc,useClass:xy,multi:!0},ah,oh,ih,{provide:Er,useExisting:ah},{provide:Mr,useClass:_S},[]];var Ar=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var Wc=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},Kc=class{encodeKey(t){return Ry(t)}encodeValue(t){return Ry(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function MS(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var AS=/%(\d[a-f0-9])/gi,xS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ry(e){return encodeURIComponent(e).replace(AS,(t,n)=>xS[n]??t)}function Gc(e){return`${e}`}var $n=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Kc,t.fromString){if(t.fromObject)throw new C(2805,!1);this.map=MS(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(Gc):[Gc(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Gc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(Gc(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function RS(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ny(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Oy(e){return typeof Blob<"u"&&e instanceof Blob}function ky(e){return typeof FormData<"u"&&e instanceof FormData}function NS(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Py="Content-Type",Fy="Accept",Ly="text/plain",jy="application/json",OS=`${jy}, ${Ly}, */*`,Xo=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,i){this.url=n,this.method=t.toUpperCase();let o;if(RS(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new C(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new Ar,this.context??=new Wc,!this.params)this.params=new $n,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ny(this.body)||Oy(this.body)||ky(this.body)||NS(this.body)?this.body:this.body instanceof $n?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ky(this.body)?null:Oy(this.body)?this.body.type||null:Ny(this.body)?null:typeof this.body=="string"?Ly:this.body instanceof $n?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?jy:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,l=t.redirect||this.redirect,u=t.credentials||this.credentials,d=t.referrer||this.referrer,h=t.integrity||this.integrity,f=t.referrerPolicy||this.referrerPolicy,p=t.transferCache??this.transferCache,g=t.timeout??this.timeout,v=t.body!==void 0?t.body:this.body,m=t.withCredentials??this.withCredentials,x=t.reportProgress??this.reportProgress,I=t.headers||this.headers,E=t.params||this.params,B=t.context??this.context;return t.setHeaders!==void 0&&(I=Object.keys(t.setHeaders).reduce((Ve,K)=>Ve.set(K,t.setHeaders[K]),I)),t.setParams&&(E=Object.keys(t.setParams).reduce((Ve,K)=>Ve.set(K,t.setParams[K]),E)),new e(n,r,v,{params:E,headers:I,context:B,reportProgress:x,responseType:i,withCredentials:m,transferCache:p,keepalive:o,cache:a,priority:s,timeout:g,mode:c,redirect:l,credentials:u,referrer:d,integrity:h,referrerPolicy:f})}},Ci=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(Ci||{}),Ii=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,r="OK"){this.headers=t.headers||new Ar,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},Zc=class e extends Ii{constructor(t={}){super(t)}type=Ci.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},Yc=class e extends Ii{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Ci.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},es=class extends Ii{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},kS=200,PS=204;var FS=new T("");var LS=/^\)\]\}',?\n/;var uh=(()=>{class e{xhrFactory;tracingService=y(yn,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new C(-2800,!1);let r=this.xhrFactory;return H(null).pipe(Be(()=>new U(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((v,m)=>s.setRequestHeader(v,m.join(","))),n.headers.has(Fy)||s.setRequestHeader(Fy,OS),!n.headers.has(Py)){let v=n.detectContentTypeHeader();v!==null&&s.setRequestHeader(Py,v)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let v=n.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let v=s.statusText||"OK",m=new Ar(s.getAllResponseHeaders()),x=s.responseURL||n.url;return c=new Zc({headers:m,status:s.status,statusText:v,url:x}),c},u=this.maybePropagateTrace(()=>{let{headers:v,status:m,statusText:x,url:I}=l(),E=null;m!==PS&&(E=typeof s.response>"u"?s.responseText:s.response),m===0&&(m=E?kS:0);let B=m>=200&&m<300;if(n.responseType==="json"&&typeof E=="string"){let Ve=E;E=E.replace(LS,"");try{E=E!==""?JSON.parse(E):null}catch(K){E=Ve,B&&(B=!1,E={error:K,text:E})}}B?(o.next(new Yc({body:E,headers:v,status:m,statusText:x,url:I||void 0})),o.complete()):o.error(new es({error:E,headers:v,status:m,statusText:x,url:I||void 0}))}),d=this.maybePropagateTrace(v=>{let{url:m}=l(),x=new es({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:m||void 0});o.error(x)}),h=d;n.timeout&&(h=this.maybePropagateTrace(v=>{let{url:m}=l(),x=new es({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:m||void 0});o.error(x)}));let f=!1,p=this.maybePropagateTrace(v=>{f||(o.next(l()),f=!0);let m={type:Ci.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(m.total=v.total),n.responseType==="text"&&s.responseText&&(m.partialText=s.responseText),o.next(m)}),g=this.maybePropagateTrace(v=>{let m={type:Ci.UploadProgress,loaded:v.loaded};v.lengthComputable&&(m.total=v.total),o.next(m)});return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",h),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),o.next({type:Ci.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(R(Mr))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function jS(e,t){return t(e)}function VS(e,t,n){return(r,i)=>Te(n,()=>t(r,o=>e(o,i)))}var Vy=new T("",{factory:()=>[]}),US=new T(""),Uy=new T("",{factory:()=>!0});var dh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=R(uh),i},providedIn:"root"})}return e})();var Jc=(()=>{class e{backend;injector;chain=null;pendingTasks=y(Ya);contributeToStability=y(Uy);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Vy),...this.injector.get(US,[])]));this.chain=r.reduceRight((i,o)=>VS(i,o,this.injector),jS)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(co(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(R(dh),R(ue))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),fh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=R(Jc),i},providedIn:"root"})}return e})();function lh(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var BS=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Xo)o=n;else{let c;i.headers instanceof Ar?c=i.headers:c=new Ar(i.headers);let l;i.params&&(i.params instanceof $n?l=i.params:l=new $n({fromObject:i.params})),o=new Xo(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=H(o).pipe(ti(c=>this.handler.handle(c)));if(n instanceof Xo||i.observe==="events")return s;let a=s.pipe(Je(c=>c instanceof Yc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(P(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new C(2806,!1);return c.body}));case"blob":return a.pipe(P(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new C(2807,!1);return c.body}));case"text":return a.pipe(P(c=>{if(c.body!==null&&typeof c.body!="string")throw new C(2808,!1);return c.body}));default:return a.pipe(P(c=>c.body))}case"response":return a;default:throw new C(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new $n().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,lh(i,r))}post(n,r,i={}){return this.request("POST",n,lh(i,r))}put(n,r,i={}){return this.request("PUT",n,lh(i,r))}static \u0275fac=function(r){return new(r||e)(R(fh))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var $S=new T("",{factory:()=>!0}),HS="XSRF-TOKEN",qS=new T("",{factory:()=>HS}),zS="X-XSRF-TOKEN",GS=new T("",{factory:()=>zS}),WS=(()=>{class e{cookieName=y(qS);doc=y(ve);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ko(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),By=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=R(WS),i},providedIn:"root"})}return e})();function KS(e,t){if(!y($S)||e.method==="GET"||e.method==="HEAD")return t(e);try{let i=y(wi).href,{origin:o}=new URL(i),{origin:s}=new URL(e.url,o);if(o!==s)return t(e)}catch{return t(e)}let n=y(By).getToken(),r=y(GS);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}function hh(...e){let t=[BS,Jc,{provide:fh,useExisting:Jc},{provide:dh,useFactory:()=>y(FS,{optional:!0})??y(uh)},{provide:Vy,useValue:KS,multi:!0}];for(let n of e)t.push(...n.\u0275providers);return Tt(t)}var $y=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(R(ve))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var j="primary",fs=Symbol("RouteTitle"),yh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Nr(e){return new yh(e)}function ph(e,t,n){for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function Qy(e,t,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let c={},l=e.slice(0,r.length);return ph(r,l,c)?{consumed:l,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>e.length||n.pathMatch==="full"&&t.hasChildren()&&n.path!=="**")return null;let a={};return!ph(o,e.slice(0,o.length),a)||!ph(s,e.slice(e.length-s.length),a)?null:{consumed:e,posParams:a}}function rl(e){return new Promise((t,n)=>{e.pipe(cn()).subscribe({next:r=>t(r),error:r=>n(r)})})}function YS(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!tn(e[n],t[n]))return!1;return!0}function tn(e,t){let n=e?_h(e):void 0,r=t?_h(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Xy(e[i],t[i]))return!1;return!0}function _h(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Xy(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function JS(e){return e.length>0?e[e.length-1]:null}function Pr(e){return Ea(e)?e:jn(e)?J(Promise.resolve(e)):H(e)}function e_(e){return Ea(e)?rl(e):Promise.resolve(e)}var QS={exact:n_,subset:r_},t_={exact:XS,subset:eT,ignored:()=>!0};function Hy(e,t,n){return QS[n.paths](e.root,t.root,n.matrixParams)&&t_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function XS(e,t){return tn(e,t)}function n_(e,t,n){if(!xr(e.segments,t.segments)||!el(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!n_(e.children[r],t.children[r],n))return!1;return!0}function eT(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Xy(e[n],t[n]))}function r_(e,t,n){return i_(e,t,t.segments,n)}function i_(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!xr(i,n)||t.hasChildren()||!el(i,n,r))}else if(e.segments.length===n.length){if(!xr(e.segments,n)||!el(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!r_(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!xr(e.segments,i)||!el(e.segments,i,r)||!e.children[j]?!1:i_(e.children[j],t,o,r)}}function el(e,t,n){return t.every((r,i)=>t_[n](e[i].parameters,r.parameters))}var Ut=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Q([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Nr(this.queryParams),this._queryParamMap}toString(){return rT.serialize(this)}},Q=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tl(this)}},Hn=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Nr(this.parameters),this._parameterMap}toString(){return s_(this)}};function tT(e,t){return xr(e,t)&&e.every((n,r)=>tn(n.parameters,t[r].parameters))}function xr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function nT(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===j&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==j&&(n=n.concat(t(i,r)))}),n}var hs=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>new qn,providedIn:"root"})}return e})(),qn=class{parse(t){let n=new wh(t);return new Ut(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ts(t.root,!0)}`,r=sT(t.queryParams),i=typeof t.fragment=="string"?`#${iT(t.fragment)}`:"";return`${n}${r}${i}`}},rT=new qn;function tl(e){return e.segments.map(t=>s_(t)).join("/")}function ts(e,t){if(!e.hasChildren())return tl(e);if(t){let n=e.children[j]?ts(e.children[j],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==j&&r.push(`${i}:${ts(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=nT(e,(r,i)=>i===j?[ts(e.children[j],!1)]:[`${i}:${ts(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[j]!=null?`${tl(e)}/${n[0]}`:`${tl(e)}/(${n.join("//")})`}}function o_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qc(e){return o_(e).replace(/%3B/gi,";")}function iT(e){return encodeURI(e)}function bh(e){return o_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nl(e){return decodeURIComponent(e)}function qy(e){return nl(e.replace(/\+/g,"%20"))}function s_(e){return`${bh(e.path)}${oT(e.parameters)}`}function oT(e){return Object.entries(e).map(([t,n])=>`;${bh(t)}=${bh(n)}`).join("")}function sT(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Qc(n)}=${Qc(i)}`).join("&"):`${Qc(n)}=${Qc(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var aT=/^[^\/()?;#]+/;function gh(e){let t=e.match(aT);return t?t[0]:""}var cT=/^[^\/()?;=#]+/;function lT(e){let t=e.match(cT);return t?t[0]:""}var uT=/^[^=?&#]+/;function dT(e){let t=e.match(uT);return t?t[0]:""}var fT=/^[^&#]+/;function hT(e){let t=e.match(fT);return t?t[0]:""}var wh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Q([],{}):new Q([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[j]=new Q(t,n)),r}parseSegment(){let t=gh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new C(4009,!1);return this.capture(t),new Hn(nl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=lT(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=gh(this.remaining);i&&(r=i,this.capture(r))}t[nl(n)]=nl(r)}parseQueryParam(t){let n=dT(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=hT(this.remaining);s&&(r=s,this.capture(r))}let i=qy(n),o=qy(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new C(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=j);let s=this.parseChildren();n[o??j]=Object.keys(s).length===1&&s[j]?s[j]:new Q([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new C(4011,!1)}};function a_(e){return e.segments.length>0?new Q([],{[j]:e}):e}function c_(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=c_(i);if(r===j&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new Q(e.segments,t);return pT(n)}function pT(e){if(e.numberOfChildren===1&&e.children[j]){let t=e.children[j];return new Q(e.segments.concat(t.segments),t.children)}return e}function zn(e){return e instanceof Ut}function l_(e,t,n=null,r=null,i=new qn){let o=u_(e);return d_(o,t,n,r,i)}function u_(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new Q(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=a_(r);return t??i}function d_(e,t,n,r,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return mh(o,o,o,n,r,i);let s=gT(t);if(s.toRoot())return mh(o,o,new Q([],{}),n,r,i);let a=mT(s,o,e),c=a.processChildren?rs(a.segmentGroup,a.index,s.commands):h_(a.segmentGroup,a.index,s.commands);return mh(o,a.segmentGroup,c,n,r,i)}function il(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ss(e){return typeof e=="object"&&e!=null&&e.outlets}function zy(e,t,n){e||="\u0275";let r=new Ut;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function mh(e,t,n,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>zy(l,d,o)):zy(l,u,o);let a;e===t?a=n:a=f_(e,t,n);let c=a_(c_(a));return new Ut(c,s,i)}function f_(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=f_(o,t,n)}),new Q(e.segments,r)}var ol=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&il(r[0]))throw new C(4003,!1);let i=r.find(ss);if(i&&i!==JS(r))throw new C(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function gT(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ol(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ol(n,t,r)}var Ti=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function mT(e,t,n){if(e.isAbsolute)return new Ti(t,!0,0);if(!n)return new Ti(t,!1,NaN);if(n.parent===null)return new Ti(n,!0,0);let r=il(e.commands[0])?0:1,i=n.segments.length-1+r;return vT(n,i,e.numberOfDoubleDots)}function vT(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new C(4005,!1);i=r.segments.length}return new Ti(r,!1,i-o)}function yT(e){return ss(e[0])?e[0].outlets:{[j]:e}}function h_(e,t,n){if(e??=new Q([],{}),e.segments.length===0&&e.hasChildren())return rs(e,t,n);let r=_T(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new Q(e.segments.slice(0,r.pathIndex),{});return o.children[j]=new Q(e.segments.slice(r.pathIndex),e.children),rs(o,0,i)}else return r.match&&i.length===0?new Q(e.segments,{}):r.match&&!e.hasChildren()?Eh(e,t,n):r.match?rs(e,0,i):Eh(e,t,n)}function rs(e,t,n){if(n.length===0)return new Q(e.segments,{});{let r=yT(n),i={};if(Object.keys(r).some(o=>o!==j)&&e.children[j]&&e.numberOfChildren===1&&e.children[j].segments.length===0){let o=rs(e.children[j],t,n);return new Q(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=h_(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Q(e.segments,i)}}function _T(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ss(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Wy(c,l,s))return o;r+=2}else{if(!Wy(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Eh(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ss(o)){let c=bT(o.outlets);return new Q(r,c)}if(i===0&&il(n[0])){let c=e.segments[t];r.push(new Hn(c.path,Gy(n[0]))),i++;continue}let s=ss(o)?o.outlets[j]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&il(a)?(r.push(new Hn(s,Gy(a))),i+=2):(r.push(new Hn(s,{})),i++)}return new Q(r,{})}function bT(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Eh(new Q([],{}),0,r))}),t}function Gy(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Wy(e,t,n){return e==n.path&&tn(t,n.parameters)}var is="imperative",Me=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Me||{}),at=class{id;url;constructor(t,n){this.id=t,this.url=n}},Or=class extends at{type=Me.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nn=class extends at{urlAfterRedirects;type=Me.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qe=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(qe||{}),as=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(as||{}),_t=class extends at{reason;code;type=Me.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function p_(e){return e instanceof _t&&(e.code===qe.Redirect||e.code===qe.SupersededByNewNavigation)}var Dn=class extends at{reason;code;type=Me.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},kr=class extends at{error;target;type=Me.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ai=class extends at{urlAfterRedirects;state;type=Me.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sl=class extends at{urlAfterRedirects;state;type=Me.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},al=class extends at{urlAfterRedirects;state;shouldActivate;type=Me.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},cl=class extends at{urlAfterRedirects;state;type=Me.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ll=class extends at{urlAfterRedirects;state;type=Me.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ul=class{route;type=Me.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},dl=class{route;type=Me.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fl=class{snapshot;type=Me.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hl=class{snapshot;type=Me.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pl=class{snapshot;type=Me.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gl=class{snapshot;type=Me.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var xi=class{},Ri=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function wT(e){return!(e instanceof xi)&&!(e instanceof Ri)}var ml=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new ki(this.rootInjector)}},ki=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ml(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(R(ue))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),vl=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Dh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Dh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Ch(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Ch(t,this._root).map(n=>n.value)}};function Dh(e,t){if(e===t.value)return t;for(let n of t.children){let r=Dh(e,n);if(r)return r}return null}function Ch(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Ch(e,n);if(r.length)return r.unshift(t),r}return[]}var st=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Si(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var cs=class extends vl{snapshot;constructor(t,n){super(t),this.snapshot=n,Nh(this,t)}toString(){return this.snapshot.toString()}};function g_(e,t){let n=ET(e,t),r=new Re([new Hn("",{})]),i=new Re({}),o=new Re({}),s=new Re({}),a=new Re(""),c=new ct(r,i,s,a,o,j,e,n.root);return c.snapshot=n.root,new cs(new st(c,[]),n)}function ET(e,t){let n={},r={},i={},s=new Rr([],n,i,"",r,j,e,null,{},t);return new ls("",new st(s,[]))}var ct=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(P(l=>l[fs]))??H(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(P(t=>Nr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(P(t=>Nr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yl(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:D(D({},t.params),e.params),data:D(D({},t.data),e.data),resolve:D(D(D(D({},e.data),t.data),i?.data),e._resolvedData)}:r={params:D({},e.params),data:D({},e.data),resolve:D(D({},e.data),e._resolvedData??{})},i&&v_(i)&&(r.resolve[fs]=i.title),r}var Rr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[fs]}constructor(t,n,r,i,o,s,a,c,l,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l,this._environmentInjector=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},ls=class extends vl{url;constructor(t,n){super(n),this.url=t,Nh(this,n)}toString(){return m_(this._root)}};function Nh(e,t){t.value._routerState=e,t.children.forEach(n=>Nh(e,n))}function m_(e){let t=e.children.length>0?` { ${e.children.map(m_).join(", ")} } `:"";return`${e.value}${t}`}function vh(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,tn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),tn(t.params,n.params)||e.paramsSubject.next(n.params),YS(t.url,n.url)||e.urlSubject.next(n.url),tn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Ih(e,t){let n=tn(e.params,t.params)&&tT(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Ih(e.parent,t.parent))}function v_(e){return typeof e.title=="string"||e.title===null}var y_=new T(""),ps=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=j;activateEvents=new _e;deactivateEvents=new _e;attachEvents=new _e;detachEvents=new _e;routerOutletData=hy();parentContexts=y(ki);location=y(mi);changeDetector=y(Sr);inputBinder=y(El,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new C(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new C(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new C(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new C(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Sh(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mn]})}return e})(),Sh=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===ct?this.route:t===ki?this.childContexts:t===y_?this.outletData:this.parent.get(t,n)}},El=new T("");var Oh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Le({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&yi(0,"router-outlet")},dependencies:[ps],encapsulation:2})}return e})();function kh(e){let t=e.children&&e.children.map(kh),n=t?W(D({},e),{children:t}):D({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==j&&(n.component=Oh),n}function DT(e,t,n){let r=us(e,t._root,n?n._root:void 0);return new cs(r,t)}function us(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=CT(e,t,n);return new st(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>us(e,a)),s}}let r=IT(t.value),i=t.children.map(o=>us(e,o));return new st(r,i)}}function CT(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return us(e,r,i);return us(e,r)})}function IT(e){return new ct(new Re(e.url),new Re(e.params),new Re(e.queryParams),new Re(e.fragment),new Re(e.data),e.outlet,e.component,e)}var Ni=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},__="ngNavigationCancelingError";function _l(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=zn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=b_(!1,qe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function b_(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[__]=!0,n.cancellationCode=t,n}function ST(e){return w_(e)&&zn(e.url)}function w_(e){return!!e&&e[__]}var Th=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),vh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Si(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Si(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Si(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Si(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new gl(o.value.snapshot))}),t.children.length&&this.forwardEvent(new hl(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(vh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),vh(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},bl=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Mi=class{component;route;constructor(t,n){this.component=t,this.route=n}};function TT(e,t,n){let r=e._root,i=t?t._root:null;return ns(r,i,n,[r.value])}function MT(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Pi(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!nd(e)?e:t.get(e):r}function ns(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Si(t);return e.children.forEach(s=>{AT(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>os(a,n.getContext(s),i)),i}function AT(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=xT(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new bl(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ns(e,t,a?a.children:null,r,i):ns(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Mi(a.outlet.component,s))}else s&&os(t,a,i),i.canActivateChecks.push(new bl(r)),o.component?ns(e,null,a?a.children:null,r,i):ns(e,null,n,r,i);return i}function xT(e,t,n){if(typeof n=="function")return Te(t._environmentInjector,()=>n(e,t));switch(n){case"pathParamsChange":return!xr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!xr(e.url,t.url)||!tn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ih(e,t)||!tn(e.queryParams,t.queryParams);default:return!Ih(e,t)}}function os(e,t,n){let r=Si(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?os(s,t.children.getContext(o),n):os(s,null,n):os(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Mi(t.outlet.component,i)):n.canDeactivateChecks.push(new Mi(null,i)):n.canDeactivateChecks.push(new Mi(null,i))}function gs(e){return typeof e=="function"}function RT(e){return typeof e=="boolean"}function NT(e){return e&&gs(e.canLoad)}function OT(e){return e&&gs(e.canActivate)}function kT(e){return e&&gs(e.canActivateChild)}function PT(e){return e&&gs(e.canDeactivate)}function FT(e){return e&&gs(e.canMatch)}function E_(e){return e instanceof rr||e?.name==="EmptyError"}var Xc=Symbol("INITIAL_VALUE");function Oi(){return Be(e=>Lu(e.map(t=>t.pipe(We(1),Vu(Xc)))).pipe(P(t=>{for(let n of t)if(n!==!0){if(n===Xc)return Xc;if(n===!1||LT(n))return n}return!0}),Je(t=>t!==Xc),We(1)))}function LT(e){return zn(e)||e instanceof Ni}function D_(e){return e.aborted?H(void 0).pipe(We(1)):new U(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function C_(e){return lo(D_(e))}function jT(e){return Ge(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=t;return o.length===0&&i.length===0?H(W(D({},t),{guardsResult:!0})):VT(o,n,r).pipe(Ge(s=>s&&RT(s)?UT(n,i,e):H(s)),P(s=>W(D({},t),{guardsResult:s})))})}function VT(e,t,n){return J(e).pipe(Ge(r=>zT(r.component,r.route,n,t)),cn(r=>r!==!0,!0))}function UT(e,t,n){return J(t).pipe(ti(r=>ei($T(r.route.parent,n),BT(r.route,n),qT(e,r.path),HT(e,r.route))),cn(r=>r!==!0,!0))}function BT(e,t){return e!==null&&t&&t(new pl(e)),H(!0)}function $T(e,t){return e!==null&&t&&t(new fl(e)),H(!0)}function HT(e,t){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return H(!0);let r=n.map(i=>so(()=>{let o=t._environmentInjector,s=Pi(i,o),a=OT(s)?s.canActivate(t,e):Te(o,()=>s(t,e));return Pr(a).pipe(cn())}));return H(r).pipe(Oi())}function qT(e,t){let n=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>MT(o)).filter(o=>o!==null).map(o=>so(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,l=Pi(a,c),u=kT(l)?l.canActivateChild(n,e):Te(c,()=>l(n,e));return Pr(u).pipe(cn())});return H(s).pipe(Oi())}));return H(i).pipe(Oi())}function zT(e,t,n,r){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return H(!0);let o=i.map(s=>{let a=t._environmentInjector,c=Pi(s,a),l=PT(c)?c.canDeactivate(e,t,n,r):Te(a,()=>c(e,t,n,r));return Pr(l).pipe(cn())});return H(o).pipe(Oi())}function GT(e,t,n,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return H(!0);let s=o.map(a=>{let c=Pi(a,e),l=NT(c)?c.canLoad(t,n):Te(e,()=>c(t,n)),u=Pr(l);return i?u.pipe(C_(i)):u});return H(s).pipe(Oi(),I_(r))}function I_(e){return Ou(Ht(t=>{if(typeof t!="boolean")throw _l(e,t)}),P(t=>t===!0))}function WT(e,t,n,r,i){let o=t.canMatch;if(!o||o.length===0)return H(!0);let s=o.map(a=>{let c=Pi(a,e),l=FT(c)?c.canMatch(t,n):Te(e,()=>c(t,n));return Pr(l).pipe(C_(i))});return H(s).pipe(Oi(),I_(r))}var En=class e extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,e.prototype)}},ds=class e extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,e.prototype)}};function KT(e){throw new C(4e3,!1)}function ZT(e){throw b_(!1,qe.GuardRejected)}var Mh=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[j])throw KT(`${t.redirectTo}`);i=i.children[j]}}async applyRedirectCommands(t,n,r,i,o){let s=await YT(n,i,o);if(s instanceof Ut)throw new ds(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ds(a);return a}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Ut(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new Q(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new C(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function YT(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d,paramMap:h,queryParamMap:f}=t;return rl(Pr(Te(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d,paramMap:h,queryParamMap:f}))))}function JT(e,t){return e.providers&&!e._injector&&(e._injector=Ho(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Vt(e){return e.outlet||j}function QT(e,t){let n=e.filter(r=>Vt(r)===t);return n.push(...e.filter(r=>Vt(r)!==t)),n}var Ah={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XT(e,t,n,r,i,o){let s=S_(e,t,n);return s.matched?(r=JT(t,r),WT(r,t,n,i,o).pipe(P(a=>a===!0?s:D({},Ah)))):H(s)}function S_(e,t,n){if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?D({},Ah):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Qy)(n,e,t);if(!i)return D({},Ah);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Ky(e,t,n,r){return n.length>0&&nM(e,n,r)?{segmentGroup:new Q(t,tM(r,new Q(n,e.children))),slicedSegments:[]}:n.length===0&&rM(e,n,r)?{segmentGroup:new Q(e.segments,eM(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Q(e.segments,e.children),slicedSegments:n}}function eM(e,t,n,r){let i={};for(let o of n)if(Dl(e,t,o)&&!r[Vt(o)]){let s=new Q([],{});i[Vt(o)]=s}return D(D({},r),i)}function tM(e,t){let n={};n[j]=t;for(let r of e)if(r.path===""&&Vt(r)!==j){let i=new Q([],{});n[Vt(r)]=i}return n}function nM(e,t,n){return n.some(r=>Dl(e,t,r)&&Vt(r)!==j)}function rM(e,t,n){return n.some(r=>Dl(e,t,r))}function Dl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function iM(e,t,n){return t.length===0&&!e.children[n]}var xh=class{};async function oM(e,t,n,r,i,o,s="emptyOnly",a){return new Rh(e,t,n,r,i,s,o,a).recognize()}var sM=31,Rh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new Mh(this.urlSerializer,this.urlTree)}noMatchError(t){return new C(4002,`'${t.segmentGroup}'`)}async recognize(){let t=Ky(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),i=new st(r,n),o=new ls("",i),s=l_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let n=new Rr([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),j,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,t,j,n),rootSnapshot:n}}catch(r){if(r instanceof ds)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof En?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,o);let s=await this.processSegment(t,n,r,r.segments,i,!0,o);return s instanceof st?[s]:[]}async processChildren(t,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=QT(n,c),d=await this.processSegmentGroup(t,u,l,c,i);s.push(...d)}let a=T_(s);return aM(a),a}async processSegment(t,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a)}catch(l){if(l instanceof En||E_(l))continue;throw l}if(iM(r,i,o))return new xh;throw new En(r)}async processSegmentAgainstRoute(t,n,r,i,o,s,a,c){if(Vt(r)!==s&&(s===j||!Dl(i,o,r)))throw new En(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c);throw new En(i)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=S_(n,i,o);if(!c)throw new En(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sM&&(this.allowRedirects=!1));let f=new Rr(o,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Zy(i),Vt(i),i.component??i._loadedComponent??null,i,Yy(i),t),p=yl(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let g=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t),v=await this.applyRedirects.lineralizeSegments(i,g);return this.processSegment(t,r,n,v.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await rl(XT(n,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new En(n);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),l=r._loadedInjector??t,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new Rr(d,u,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Zy(r),Vt(r),r.component??r._loadedComponent??null,r,Yy(r),t),p=yl(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:g,slicedSegments:v}=Ky(n,d,h,c);if(v.length===0&&g.hasChildren()){let I=await this.processChildren(l,c,g,f);return new st(f,I)}if(c.length===0&&v.length===0)return new st(f,[]);let m=Vt(r)===o,x=await this.processSegment(l,c,g,v,m?j:o,!0,f);return new st(f,x instanceof st?[x]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(t).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await rl(GT(t,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw ZT(n)}return{routes:[],injector:t}}};function aM(e){e.sort((t,n)=>t.value.outlet===j?-1:n.value.outlet===j?1:t.value.outlet.localeCompare(n.value.outlet))}function cM(e){let t=e.value.routeConfig;return t&&t.path===""}function T_(e){let t=[],n=new Set;for(let r of e){if(!cM(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=T_(r.children);t.push(new st(r.value,i))}return t.filter(r=>!n.has(r))}function Zy(e){return e.data||{}}function Yy(e){return e.resolve||{}}function lM(e,t,n,r,i,o,s){return Ge(async a=>{let{state:c,tree:l}=await oM(e,t,n,r,a.extractedUrl,i,o,s);return W(D({},a),{targetSnapshot:c,urlAfterRedirects:l})})}function uM(e){return Ge(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return H(t);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of M_(a))o.add(c);let s=0;return J(o).pipe(ti(a=>i.has(a)?dM(a,n,e):(a.data=yl(a,a.parent,e).resolve,H(void 0))),Ht(()=>s++),Sa(1),Ge(a=>s===o.size?H(t):Ne))})}function M_(e){let t=e.children.map(n=>M_(n)).flat();return[e,...t]}function dM(e,t,n){let r=e.routeConfig,i=e._resolve;return r?.title!==void 0&&!v_(r)&&(i[fs]=r.title),so(()=>(e.data=yl(e,e.parent,n).resolve,fM(i,e,t).pipe(P(o=>(e._resolvedData=o,e.data=D(D({},e.data),o),null)))))}function fM(e,t,n){let r=_h(e);if(r.length===0)return H({});let i={};return J(r).pipe(Ge(o=>hM(e[o],t,n).pipe(cn(),Ht(s=>{if(s instanceof Ni)throw _l(new qn,s);i[o]=s}))),Sa(1),P(()=>i),ao(o=>E_(o)?Ne:Fu(o)))}function hM(e,t,n){let r=t._environmentInjector,i=Pi(e,r),o=i.resolve?i.resolve(t,n):Te(r,()=>i(t,n));return Pr(o)}function Jy(e){return Be(t=>{let n=e(t);return n?J(n).pipe(P(()=>t)):H(t)})}var Ph=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===j);return r}getResolvedTitleForRoute(n){return n.data[fs]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>y(A_),providedIn:"root"})}return e})(),A_=(()=>{class e extends Ph{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(R($y))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Fi=new T("",{factory:()=>({})}),ms=new T(""),x_=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=y(Jf);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await e_(Te(n,()=>r.loadComponent())),s=await O_(N_(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await R_(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function R_(e,t,n,r){let i=await e_(Te(n,()=>e.loadChildren())),o=await O_(N_(i)),s;o instanceof Oc||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(e);let a,c,l=!1,u;return Array.isArray(s)?(c=s,l=!0):(a=s.create(n).injector,u=s,c=a.get(ms,[],{optional:!0,self:!0}).flat()),{routes:c.map(kh),injector:a,factory:u}}function pM(e){return e&&typeof e=="object"&&"default"in e}function N_(e){return pM(e)?e.default:e}async function O_(e){return e}var Cl=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>y(gM),providedIn:"root"})}return e})(),gM=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),k_=new T("");var mM=()=>{},P_=new T(""),F_=(()=>{class e{currentNavigation=Z(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Z(null);events=new le;transitionAbortWithErrorSubject=new le;configLoader=y(x_);environmentInjector=y(ue);destroyRef=y(gt);urlSerializer=y(hs);rootContexts=y(ki);location=y(Di);inputBindingEnabled=y(El,{optional:!0})!==null;titleStrategy=y(Ph);options=y(Fi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=y(Cl);createViewTransition=y(k_,{optional:!0});navigationErrorHandler=y(P_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>H(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new ul(i)),r=i=>this.events.next(new dl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;we(()=>{this.transitions?.next(W(D({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Re(null),this.transitions.pipe(Je(r=>r!==null),Be(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return H(r).pipe(Be(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",qe.SupersededByNewNavigation),Ne;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?W(D({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload")return this.events.next(new Dn(a.id,this.urlSerializer.serialize(a.rawUrl),"",as.IgnoredSameUrlNavigation)),a.resolve(!1),Ne;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return H(a).pipe(Be(d=>(this.events.next(new Or(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Ne:Promise.resolve(d))),lM(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ht(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=d.urlAfterRedirects,f));let h=new Ai(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:g}=a,v=new Or(d,this.urlSerializer.serialize(h),f,p);this.events.next(v);let m=g_(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=W(D({},a),{targetSnapshot:m,urlAfterRedirects:h,extras:W(D({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=h,x)),H(r)}else return this.events.next(new Dn(a.id,this.urlSerializer.serialize(a.extractedUrl),"",as.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Ne}),P(a=>{let c=new sl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=W(D({},a),{guards:TT(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),jT(a=>this.events.next(a)),Be(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw _l(this.urlSerializer,a.guardsResult);let c=new al(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return Ne;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",qe.GuardRejected),Ne;if(a.guards.canActivateChecks.length===0)return H(a);let l=new cl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(l),!s())return Ne;let u=!1;return H(a).pipe(uM(this.paramsInheritanceStrategy),Ht({next:()=>{u=!0;let d=new ll(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)},complete:()=>{u||this.cancelNavigationTransition(a,"",qe.NoDataFromResolver)}}))}),Jy(a=>{let c=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let h=u._environmentInjector;d.push(this.configLoader.loadComponent(h,u.routeConfig).then(f=>{u.component=f}))}for(let h of u.children)d.push(...c(h));return d},l=c(a.targetSnapshot.root);return l.length===0?H(a):J(Promise.all(l).then(()=>a))}),Jy(()=>this.afterPreactivation()),Be(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?J(l).pipe(P(()=>r)):H(r)}),We(1),P(a=>{let c=DT(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=W(D({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),this.events.next(new xi),s()&&(new Th(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=mM,l)),this.lastSuccessfulNavigation.set(we(this.currentNavigation)),this.events.next(new nn(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),lo(D_(o.signal).pipe(Je(()=>!i&&!r.targetRouterState),Ht(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",qe.Aborted)}))),Ht({complete:()=>{i=!0}}),lo(this.transitionAbortWithErrorSubject.pipe(Ht(a=>{throw a}))),co(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",qe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ao(a=>{if(i=!0,this.destroyed)return r.resolve(!1),Ne;if(w_(a))this.events.next(new _t(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),ST(a)?this.events.next(new Ri(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new kr(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=Te(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Ni){let{message:u,cancellationCode:d}=_l(this.urlSerializer,l);this.events.next(new _t(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new Ri(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Ne}))}))}cancelNavigationTransition(n,r,i){let o=new _t(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=we(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vM(e){return e!==is}var L_=new T("");var j_=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>y(yM),providedIn:"root"})}return e})(),wl=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}shouldDestroyInjector(t){return!0}},yM=(()=>{class e extends wl{static \u0275fac=(()=>{let n;return function(i){return(n||(n=vn(e)))(i||e)}})();static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Fh=(()=>{class e{urlSerializer=y(hs);options=y(Fi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=y(Di);urlHandlingStrategy=y(Cl);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ut;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Ut?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=g_(null,y(ue));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>y(_M),providedIn:"root"})}return e})(),_M=(()=>{class e extends Fh{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Or?this.updateStateMemento():n instanceof Dn?this.commitTransition(r):n instanceof Ai?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xi?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof _t&&!p_(n)?this.restoreHistory(r):n instanceof kr?this.restoreHistory(r,!0):n instanceof nn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=D(D({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=D(D({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vn(e)))(i||e)}})();static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Lh(e,t){e.events.pipe(Je(n=>n instanceof nn||n instanceof _t||n instanceof kr||n instanceof Dn),P(n=>n instanceof nn||n instanceof Dn?0:(n instanceof _t?n.code===qe.Redirect||n.code===qe.SupersededByNewNavigation:!1)?2:1),Je(n=>n!==2),We(1)).subscribe(()=>{t()})}var V_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},U_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cn=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=y($f);stateManager=y(Fh);options=y(Fi,{optional:!0})||{};pendingTasks=y(gn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=y(F_);urlSerializer=y(hs);location=y(Di);urlHandlingStrategy=y(Cl);injector=y(ue);_events=new le;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=y(j_);injectorCleanup=y(L_,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=y(ms,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!y(El,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new xe;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=we(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof _t&&r.code!==qe.Redirect&&r.code!==qe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof nn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof Ri){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=D({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||vM(i.source)},s);this.scheduleNavigation(a,is,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}wT(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),is,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=D({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(rt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return we(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(kh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=u_(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return d_(d,n,u,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=zn(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,is,null,r)}navigate(n,r={skipLocationChange:!1}){return bM(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(dn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=D({},V_):r===!1?i=D({},U_):i=r,zn(n))return Hy(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Hy(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Lh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function bM(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new C(4008,!1)}var rn=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Z(null);get href(){return we(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new le;applicationErrorHandler=y(rt);options=y(Fi,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(y(new Vc("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(n=>{n instanceof nn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(zn(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:zn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(G(Cn),G(ct),jo("tabindex"),G(_n),G(Qt),G(Ei))};static \u0275dir=he({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&oe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&vi("href",i.reactiveHref(),Tf)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Tr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Tr],replaceUrl:[2,"replaceUrl","replaceUrl",Tr],routerLink:"routerLink"},features:[mn]})}return e})();var DM=new T("");function jh(e,...t){return Tt([{provide:ms,multi:!0,useValue:e},[],{provide:ct,useFactory:CM},{provide:Fc,multi:!0,useFactory:IM},t.map(n=>n.\u0275providers)])}function CM(){return y(Cn).routerState.root}function IM(){let e=y(Qe);return t=>{let n=e.get(Ft);if(t!==n.components[0])return;let r=e.get(Cn),i=e.get(SM);e.get(TM)===1&&r.initialNavigation(),e.get(MM,null,{optional:!0})?.setUpPreloading(),e.get(DM,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var SM=new T("",{factory:()=>new le}),TM=new T("",{factory:()=>1});var MM=new T("");var Il=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-home"]],decls:8,vars:0,consts:[[1,"welcome-container"],[1,"welcome-content"],["routerLink","/menu",1,"btn","btn-primary","btn-start"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"div",1)(2,"h1"),w(3,"INVENTARIO ADEX"),_(),b(4,"p"),w(5,"Sistema de Gesti\xF3n del \xC1rea de Soporte Inform\xE1tico"),_(),b(6,"button",2),w(7," Start "),_()()())},dependencies:[rn],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:#0055a4}.welcome-content[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:2rem}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:2rem;opacity:.9}.btn-start[_ngcontent-%COMP%]{padding:1rem 3rem;font-size:1.5rem;background:#fff;color:#0055a4}.btn-start[_ngcontent-%COMP%]:hover{background:#004080;color:#fff}"]})};var Sl=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-menu"]],decls:21,vars:0,consts:[[1,"menu-container"],[1,"header"],["routerLink","/",1,"btn","btn-secondary"],[1,"menu-options"],["routerLink","/equipos",1,"menu-card"],[1,"card-icon"],["routerLink","/ambientes",1,"menu-card"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"header",1)(2,"h1"),w(3,"Men\xFA Principal"),_(),b(4,"a",2),w(5,"Volver"),_()(),b(6,"div",3)(7,"a",4)(8,"div",5),w(9,"\u{1F5A5}\uFE0F"),_(),b(10,"h2"),w(11,"Equipos"),_(),b(12,"p"),w(13,"Ver y gestionar equipos"),_()(),b(14,"a",6)(15,"div",5),w(16,"\u{1F3E2}"),_(),b(17,"h2"),w(18,"Ambientes"),_(),b(19,"p"),w(20,"Ver y gestionar ambientes"),_()()()())},dependencies:[rn],styles:[".menu-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:#f5f5f5}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;color:#333}.menu-options[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap}.menu-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:3rem;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;text-decoration:none;color:#333;transition:transform .2s,box-shadow .2s;min-width:250px}.menu-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.card-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#667eea}p[_ngcontent-%COMP%]{margin:0;color:#666}"]})};var B_=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var Li=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},vs=class extends Li{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},ji=class extends Li{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Vi=class extends Li{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},Tl=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(Tl||{});var ys=class{constructor(t,{headers:n={},customFetch:r,region:i=Tl.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=B_(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return la(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let g;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",g=l):typeof l=="string"?(h["Content-Type"]="text/plain",g=l):typeof FormData<"u"&&l instanceof FormData?g=l:(h["Content-Type"]="application/json",g=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?g=JSON.stringify(l):g=l;let v=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(v=s.signal,u.addEventListener("abort",()=>s.abort())):v=s.signal);let m=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:g,signal:v}).catch(B=>{throw new vs(B)}),x=m.headers.get("x-relay-error");if(x&&x==="true")throw new ji(m);if(!m.ok)throw new Vi(m);let I=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),E;return I==="application/json"?E=yield m.json():I==="application/octet-stream"||I==="application/pdf"?E=yield m.blob():I==="text/event-stream"?E=m:I==="multipart/form-data"?E=yield m.formData():E=yield m.text(),{data:E,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Vi||a instanceof ji?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var q_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},AM=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let s=null,a=null,c=null,l=o.status,u=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var f;let m=await o.text();m===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=m:a=JSON.parse(m))}let g=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");g&&v&&v.length>1&&(c=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,l=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let g=await o.text();try{s=JSON.parse(g),Array.isArray(s)&&o.status===404&&(a=[],s=null,l=200,u="OK")}catch{o.status===404&&g===""?(l=204,u="No Content"):s={message:g}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,l=200,u="OK"),s&&n.shouldThrowOnError)throw new q_(s)}return{error:s,data:a,count:c,status:l,statusText:u}});return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c="",l="",u=o?.cause;if(u){var d,h,f,p;let m=(d=u?.message)!==null&&d!==void 0?d:"",x=(h=u?.code)!==null&&h!==void 0?h:"";a=`${(f=o?.name)!==null&&f!==void 0?f:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(p=u?.name)!==null&&p!==void 0?p:"Error"}: ${m}`,x&&(a+=` (${x})`),u?.stack&&(a+=`
${u.stack}`)}else{var g;a=(g=o?.stack)!==null&&g!==void 0?g:""}let v=this.url.toString().length;return o?.name==="AbortError"||o?.code==="ABORT_ERR"?(l="",c="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(u?.name==="HeadersOverflowError"||u?.code==="UND_ERR_HEADERS_OVERFLOW")&&(l="",c="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(c+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:c,code:l},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},xM=class extends AM{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},$_=new RegExp("[,()]"),Ui=class extends xM{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&$_.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&$_.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},RM=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET",o=!1,s=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new Ui({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){let c=[...new Set(a)].map(l=>`"${l}"`);o.searchParams.set("columns",c.join(","))}}return new Ui({method:i,url:o,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){let l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){let u=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new Ui({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Ui({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Ui({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function _s(e){"@babel/helpers - typeof";return _s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_s(e)}function NM(e,t){if(_s(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_s(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OM(e){var t=NM(e,"string");return _s(t)=="symbol"?t:t+""}function kM(e,t,n){return(t=OM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(n),!0).forEach(function(r){kM(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var z_=class G_{constructor(t,{headers:n={},schema:r,fetch:i,timeout:o,urlLengthLimit:s=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=s;let a=i??globalThis.fetch;o!==void 0&&o>0?this.fetch=(c,l)=>{let u=new AbortController,d=setTimeout(()=>u.abort(),o),h=l?.signal;if(h){if(h.aborted)return clearTimeout(d),a(c,l);let f=()=>{clearTimeout(d),u.abort()};return h.addEventListener("abort",f,{once:!0}),a(c,Ml(Ml({},l),{},{signal:u.signal})).finally(()=>{clearTimeout(d),h.removeEventListener("abort",f)})}return a(c,Ml(Ml({},l),{},{signal:u.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new RM(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new G_(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),l,u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),d=r&&Object.values(n).some(u);d?(a="POST",l=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(a="POST",l=n);let h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new Ui({method:a,url:c,headers:h,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}};var Vh=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Uh=Vh;var W_="2.94.0";var K_=`realtime-js/${W_}`,Z_="1.0.0",Bh="2.0.0",$h=Bh;var bs=1e4,Y_=1e3,J_=100,Gn=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(Gn||{}),Ce=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(Ce||{}),bt=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(bt||{}),Hh=(function(e){return e.websocket="websocket",e})(Hh||{}),Fr=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(Fr||{});var Al=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",l=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),g=0;p.setUint8(g++,this.KINDS.userBroadcastPush),p.setUint8(g++,c.length),p.setUint8(g++,a.length),p.setUint8(g++,s.length),p.setUint8(g++,l.length),p.setUint8(g++,d.length),p.setUint8(g++,n),Array.from(c,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(a,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(s,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(l,m=>p.setUint8(g++,m.charCodeAt(0))),Array.from(d,m=>p.setUint8(g++,m.charCodeAt(0)));var v=new Uint8Array(f.byteLength+r.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(r),f.byteLength),v.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,n,i)}_decodeUserBroadcast(t,n,r){let i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(t.slice(c,c+i));c=c+i;let u=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var Bi=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var se=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(se||{}),zh=(e,t,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=PM(s,e,t,i),o),{}):{}},PM=(e,t,n,r)=>{let i=t.find(a=>a.name===e),o=i?.type,s=n[e];return o&&!r.includes(o)?Q_(o,s):qh(s)},Q_=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return VM(t,n)}switch(e){case se.bool:return FM(t);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return LM(t);case se.json:case se.jsonb:return jM(t);case se.timestamp:return UM(t);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return qh(t);default:return qh(t)}},qh=e=>e,FM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},LM=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},jM=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},VM=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o,s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>Q_(t,a))}return e},UM=e=>typeof e=="string"?e.replace(" ","T"):e,xl=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var $i=class{constructor(t,n,r={},i=bs){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var ws=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=e.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){let o=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(v=>v.presence_ref),f=d.map(v=>v.presence_ref),p=u.filter(v=>f.indexOf(v.presence_ref)<0),g=d.filter(v=>h.indexOf(v.presence_ref)<0);p.length>0&&(a[l]=p),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,n,r,i){let{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,i(a,l,c),l.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Es=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(Es||{}),In=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})(In||{});var Ds=class e{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new $i(this,bt.join,this.params,this.timeout),this.rejoinTimer=new Bi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new ws(this),this.broadcastEndpointURL=xl(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ce.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Es.PRESENCE]&&this.bindings[Es.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(In.CHANNEL_ERROR,f)),this._onClose(()=>t?.(In.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t?.(In.SUBSCRIBED);return}else{let g=this.bindings.postgres_changes,v=(p=g?.length)!==null&&p!==void 0?p:0,m=[];for(let x=0;x<v;x++){let I=g[x],{filter:{event:E,schema:B,table:Ve,filter:K}}=I,ae=f&&f[x];if(ae&&ae.event===E&&e.isFilterValueEqual(ae.schema,B)&&e.isFilterValueEqual(ae.table,Ve)&&e.isFilterValueEqual(ae.filter,K))m.push(Object.assign(Object.assign({},I),{id:ae.id}));else{this.unsubscribe(),this.state=Ce.errored,t?.(In.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(In.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ce.errored,t?.(In.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(In.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Ce.joined&&t===Es.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);let s={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let l=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ce.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new $i(this,bt.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ce.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new $i(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>J_){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=bt;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,g,v;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((v=(g=f.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,g,v,m,x,I;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let E=f.id,B=(p=f.filter)===null||p===void 0?void 0:p.event;return E&&((g=n.ids)===null||g===void 0?void 0:g.includes(E))&&(B==="*"||B?.toLocaleLowerCase()===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{let E=(x=(m=f?.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return E==="*"||E===((I=n?.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:g,table:v,commit_timestamp:m,type:x,errors:I}=p;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:m,eventType:x,new:{},old:{},errors:I}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&e.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bt.close,{},t)}_onError(t){this._on(bt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=zh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=zh(t.columns,t.old_record)),n}};var Gh=()=>{},Rl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$M=[1e3,2e3,5e3,1e4],HM=1e4,qM=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Cs=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bs,this.transport=null,this.heartbeatIntervalMs=Rl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gh,this.ref=0,this.reconnectTimer=null,this.vsn=$h,this.logger=Gh,this.conn=null,this.sendBuffer=[],this.serializer=new Al,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Hh.websocket}`,this.httpEndpoint=xl(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Uh.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gn.connecting:return Fr.Connecting;case Gn.open:return Fr.Open;case Gn.closing:return Fr.Closing;default:return Fr.Closed}}isConnected(){return this.connectionState()===Fr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Ds(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){let{topic:n,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Y_,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Rl.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",l)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Gn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gn.open||this.conn.readyState===Gn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(bt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([qM],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let o={access_token:n,version:K_};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(bt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Bi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:bs,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:Rl.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:Gh,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:$h,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:p=>$M[p-1]||HM,this.vsn){case Z_:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(p,g)=>g(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,g)=>g(JSON.parse(p));break;case Bh:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var Is=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zM(e,t,n){let r=new URL(t,e);if(n)for(let[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function GM(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function WM(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:s}){let a=zM(e.baseUrl,r,i),c=await GM(e.auth),l=await t(a,{method:n,headers:D(D(D({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){let f=d?h:void 0,p=f?.error;throw new Is(p?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function Nl(e){return e.join("")}var KM=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:Nl(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Nl(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Nl(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Nl(e.namespace)}`}),!0}catch(t){if(t instanceof Is&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Is&&n.status===409)return;throw n}}};function Hi(e){return e.join("")}var ZM=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hi(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Hi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Is&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Is&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},X_=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=WM({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new KM(this.client,t),this.tableOps=new ZM(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var kl=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function Pl(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Ol=class extends kl{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},rb=class extends kl{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};var YM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),JM=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wh=e=>{if(Array.isArray(e))return e.map(n=>Wh(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=Wh(r)}),t},QM=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}function XM(e,t){if(Ts(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ts(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eA(e){var t=XM(e,"string");return Ts(t)=="symbol"?t:t+""}function tA(e,t,n){return(t=eA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eb(Object(n),!0).forEach(function(r){tA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var tb=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},nA=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let i=e,o=i.status||500;if(typeof i.json=="function")i.json().then(s=>{let a=s?.statusCode||s?.code||o+"";t(new Ol(tb(s),o,a,r))}).catch(()=>{if(r==="vectors"){let s=o+"";t(new Ol(i.statusText||`HTTP ${o} error`,o,s,r))}else{let s=o+"";t(new Ol(i.statusText||`HTTP ${o} error`,o,s,r))}});else{let s=o+"";t(new Ol(i.statusText||`HTTP ${o} error`,o,s,r))}}else t(new rb(tb(e),e,r))},rA=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?k(k({},i),n):(JM(r)?(i.headers=k({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),k(k({},i),n))};async function Ss(e,t,n,r,i,o,s){return new Promise((a,c)=>{e(n,rA(t,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;if(s==="vectors"){let u=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!u||!u.includes("application/json"))return{}}return l.json()}).then(l=>a(l)).catch(l=>nA(l,c,r,s))})}function ib(e="storage"){return{get:async(t,n,r,i)=>Ss(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,o)=>Ss(t,"POST",n,i,o,r,e),put:async(t,n,r,i,o)=>Ss(t,"PUT",n,i,o,r,e),head:async(t,n,r,i)=>Ss(t,"HEAD",n,k(k({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,o)=>Ss(t,"DELETE",n,i,o,r,e)}}var iA=ib("storage"),{get:Ms,post:Bt,put:Kh,head:oA,remove:Zh}=iA,lt=ib("vectors"),qi=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=YM(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Pl(n))return{data:null,error:n};throw n}}},sA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Pl(t))return{data:null,error:t};throw t}}},ob;ob=Symbol.toStringTag;var aA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ob]="BlobDownloadBuilder",this.promise=null}asStream(){return new sA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Pl(t))return{data:null,error:t};throw t}}},cA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},lA=class extends qi{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let o,s=k(k({},nb),r),a=k(k({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=k(k({},a),r.headers));let l=i._removeEmptyFolders(t),u=i._getFinalPath(l),d=await(e=="PUT"?Kh:Bt)(i.fetch,`${i.url}/object/${u}`,o,k({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{path:l,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;let o=i._removeEmptyFolders(e),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let c,l=k({upsert:nb.upsert},r),u=k(k({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType),{path:o,fullPath:(await Kh(i.fetch,a.toString(),c,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e),i=k({},n.headers);t?.upsert&&(i["x-upsert"]="true");let o=await Bt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new kl("No token returned by API");return{signedUrl:s.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Bt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Bt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),o=await Bt(r.fetch,`${r.url}/object/sign/${i}`,k({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{let i=await Bt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>k(k({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null}))})}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),s=()=>Ms(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new aA(s,this.shouldThrowOnError)}async info(e){var t=this;let n=t._getFinalPath(e);return t.handleOperation(async()=>Wh(await Ms(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;let n=t._getFinalPath(e);try{return await oA(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Pl(r)&&r instanceof rb){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);let o=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await Zh(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{let i=k(k(k({},cA),t),{},{prefix:e||""});return await Bt(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{let r=k({},e);return await Bt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},uA="2.94.0",As={"X-Client-Info":`storage-js/${uA}`},dA=class extends qi{constructor(e,t={},n,r){let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let o=i.href.replace(/\/$/,""),s=k(k({},As),t);super(o,s,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=t.listBucketOptionsToQueryString(e);return await Ms(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Ms(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Bt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await Kh(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Bt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},fA=class extends qi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=k(k({},As),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Bt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Ms(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await Zh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!QM(e))throw new kl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new X_({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){let s=i[o];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},hA=class extends qi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=k(k({},As),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await lt.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await lt.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},pA=class extends qi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=k(k({},As),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},gA=class extends qi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=k(k({},As),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await lt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},mA=class extends gA{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new vA(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},vA=class extends hA{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new yA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},yA=class extends pA{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,k(k({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},sb=class extends dA{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new lA(this.url,this.headers,e,this.fetch)}get vectors(){return new mA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new fA(this.url+"/iceberg",this.headers,this.fetch)}};var Fl="2.94.0";var Lr=30*1e3,Ll=3,jl=Ll*Lr,ab="http://localhost:9999",cb="supabase.auth.token";var lb={"X-Client-Info":`gotrue-js/${Fl}`};var xs="X-Supabase-Api-Version",Yh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ub=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,db=600*1e3;var Wn=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function A(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var Vl=class extends Wn{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function fb(e){return A(e)&&e.name==="AuthApiError"}var wt=class extends Wn{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},$t=class extends Wn{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},je=class extends $t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Bl(e){return A(e)&&e.name==="AuthSessionMissingError"}var Sn=class extends $t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},jr=class extends $t{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Vr=class extends $t{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function hb(e){return A(e)&&e.name==="AuthImplicitGrantRedirectError"}var Rs=class extends $t{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ul=class extends $t{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var zi=class extends $t{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function $l(e){return A(e)&&e.name==="AuthRetryableFetchError"}var Ns=class extends $t{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var Ur=class extends $t{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var Hl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pb=` 	
\r=`.split(""),_A=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pb.length;t+=1)e[pb[t].charCodeAt(0)]=-2;for(let t=0;t<Hl.length;t+=1)e[Hl[t].charCodeAt(0)]=t;return e})();function gb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(Hl[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(Hl[r]),t.queuedBits-=6}}function mb(e,t,n){let r=_A[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Jh(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{EA(s,r,n)};for(let s=0;s<e.length;s+=1)mb(e.charCodeAt(s),i,o);return t.join("")}function bA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function wA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}bA(r,t)}}function EA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Kn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)mb(e.charCodeAt(i),n,r);return new Uint8Array(t)}function vb(e){let t=[];return wA(e,n=>t.push(n)),new Uint8Array(t)}function Tn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>gb(i,n,r)),gb(null,n,r),t.join("")}function yb(e){return Math.round(Date.now()/1e3)+e}function _b(){return Symbol("auth-callback")}var Ie=()=>typeof window<"u"&&typeof document<"u",Br={tested:!1,writable:!1},ql=()=>{if(!Ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Br.tested)return Br.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Br.tested=!0,Br.writable=!0}catch{Br.tested=!0,Br.writable=!1}return Br.writable};function bb(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}var zl=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),wb=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$r=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zn=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ae=async(e,t)=>{await e.removeItem(t)},Os=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};Os.promiseConstructor=Promise;function ks(e){let t=e.split(".");if(t.length!==3)throw new Ur("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!ub.test(t[r]))throw new Ur("JWT not in base64url format");return{header:JSON.parse(Jh(t[0])),payload:JSON.parse(Jh(t[1])),signature:Kn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Eb(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Db(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await e(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function DA(e){return("0"+e.toString(16)).substr(-2)}function CA(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,DA).join("")}async function IA(e){let n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function SA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=await IA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hr(e,t,n=!1){let r=CA(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await $r(e,`${t}-code-verifier`,i);let o=await SA(r);return[o,r===o?"plain":"s256"]}var TA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Cb(e){let t=e.headers.get(xs);if(!t||!t.match(TA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Ib(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Sb(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var MA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function qr(e){if(!MA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gl(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Tb(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Qh(e){return JSON.parse(JSON.stringify(e))}var zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),AA=[502,503,504];async function Mb(e){var t;if(!wb(e))throw new zi(zr(e),0);if(AA.includes(e.status))throw new zi(zr(e),e.status);let n;try{n=await e.json()}catch(o){throw new wt(zr(o),o)}let r,i=Cb(e);if(i&&i.getTime()>=Yh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ns(zr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new je}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Ns(zr(n),e.status,n.weak_password.reasons);throw new Vl(zr(n),e.status||500,r)}var xA=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function N(e,t,n,r){var i;let o=Object.assign({},r?.headers);o[xs]||(o[xs]=Yh["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await RA(e,t,n+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function RA(e,t,n,r,i,o){let s=xA(t,r,i,o),a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new zi(zr(c),0)}if(a.ok||await Mb(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await Mb(c)}}function Et(e){var t;let n=null;NA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=yb(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Xh(e){let t=Et(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function on(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ab(e){return{data:e,error:null}}function xb(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=nr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function ep(e){return e}function NA(e){return e.access_token&&e.refresh_token&&e.expires_in}var Wl=["global","local","others"];var Gi=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=zl(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Wl[0]){if(Wl.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wl.join(", ")}`);try{return await N(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(A(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await N(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:on})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:n}=t,r=nr(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await N(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:xb,redirectTo:n?.redirectTo})}catch(n){if(A(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await N(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:on})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ep});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);l[`${v}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(A(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){qr(t);try{return await N(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:on})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){qr(t);try{return await N(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:on})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){qr(t);try{return await N(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:on})}catch(r){if(A(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){qr(t.userId);try{let{data:n,error:r}=await N(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(A(n))return{data:null,error:n};throw n}}async _deleteFactor(t){qr(t.userId),qr(t.id);try{return{data:await N(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await N(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:ep});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(p.split(";")[1].split("=")[1]);l[`${v}Page`]=g}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(A(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(t){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(A(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await N(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(A(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await N(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(A(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await N(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await N(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(A(n))return{data:null,error:n};throw n}}};function tp(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var Gr={debug:!!(globalThis&&ql()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Ps=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Kl=class extends Ps{};async function np(e,t,n){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Kl(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Gr.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Rb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rp(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Nb(e){return parseInt(e,16)}function Ob(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function kb(e){var t;let{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=rp(e.address),p=u?`${u}://${r}`:r,g=e.statement?`${e.statement}
`:"",v=`${p} wants you to sign in with your Ethereum account:
${f}

${g}`,m=`URI: ${d}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(m+=`
Expiration Time: ${i.toISOString()}`),a&&(m+=`
Not Before: ${a.toISOString()}`),c&&(m+=`
Request ID: ${c}`),l){let x=`
Resources:`;for(let I of l){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);x+=`
- ${I}`}m+=x}return`${v}
${m}`}var fe=class extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}},Wr=class extends fe{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function Pb({error:e,options:t}){var n,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new fe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new fe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new fe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new fe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new fe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new fe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new fe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(ip(s)){if(o.rp.id!==s)return new fe({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new fe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Fb({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new fe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(ip(r)){if(n.rpId!==r)return new fe({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new fe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var op=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},OA=new op;function jb(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=nr(e,["challenge","user","excludeCredentials"]),o=Kn(t).buffer,s=Object.assign(Object.assign({},n),{id:Kn(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Kn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function Vb(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=nr(e,["challenge","allowCredentials"]),i=Kn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Kn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function Ub(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Tn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Tn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bb(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Tn(new Uint8Array(i.authenticatorData)),clientDataJSON:Tn(new Uint8Array(i.clientDataJSON)),signature:Tn(new Uint8Array(i.signature)),userHandle:i.userHandle?Tn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function ip(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Lb(){var e,t;return!!(Ie()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function kA(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wr("Browser returned unexpected credential type",t)}:{data:null,error:new Wr("Empty credential response",t)}}catch(t){return{data:null,error:Pb({error:t,options:e})}}}async function PA(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wr("Browser returned unexpected credential type",t)}:{data:null,error:new Wr("Empty credential response",t)}}catch(t){return{data:null,error:Fb({error:t,options:e})}}}var FA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zl(...e){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of e)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=Zl(a,s):r[o]=Zl(s)}else r[o]=s}return r}function jA(e,t){return Zl(FA,e,t||{})}function VA(e,t){return Zl(LA,e,t||{})}var Yl=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){var s;try{let{data:a,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:c};let l=i??OA.createNewAbortSignal();if(a.webauthn.type==="create"){let{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){let d=r;if(d)u.name=`${u.id}:${d}`;else{let f=(await this.client.getUser()).data.user,p=((s=f?.user_metadata)===null||s===void 0?void 0:s.name)||f?.email||f?.id||"User";u.name=`${u.id}:${p}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{let u=jA(a.webauthn.credential_options.publicKey,o?.create),{data:d,error:h}=await kA({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{let u=VA(a.webauthn.credential_options.publicKey,o?.request),{data:d,error:h}=await PA(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return A(a)?{data:null,error:a}:{data:null,error:new wt("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Wn("rpId is required for WebAuthn authentication")};try{if(!Lb())return{data:null,error:new wt("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return A(s)?{data:null,error:s}:{data:null,error:new wt("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Wn("rpId is required for WebAuthn registration")};try{if(!Lb())return{data:null,error:new wt("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:c,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(s){return A(s)?{data:null,error:s}:{data:null,error:new wt("Unexpected error in register",s)}}}};Rb();var UA={url:ab,storageKey:cb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function $b(e,t,n){return await n()}var Wi={},BA=(()=>{class e{get jwks(){var n,r;return(r=(n=Wi[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Wi[this.storageKey]=Object.assign(Object.assign({},Wi[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Wi[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Wi[this.storageKey]=Object.assign(Object.assign({},Wi[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},UA),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ie()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Gi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=zl(s.fetch),this.lock=s.lock||$b,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Ie()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=np:this.lock=$b,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Yl(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:ql()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=tp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=tp(this.memoryStorage)),Ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Fl}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(Ie()&&(r=bb(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Ie()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),hb(s)){let l=(n=s.details)===null||n===void 0?void 0:n.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return A(r)?this._returnResult({error:r}):this._returnResult({error:new wt("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,o;try{let s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:Et}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(n){var r,i,o;try{let s;if("email"in n){let{email:d,password:h,options:f}=n,p=null,g=null;this.flowType==="pkce"&&([p,g]=await Hr(this.storage,this.storageKey)),s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},xform:Et})}else if("phone"in n){let{phone:d,password:h,options:f}=n;s=await N(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Et})}else throw new jr("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return await Ae(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(n){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Xh})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=await N(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Xh})}else throw new jr("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new Sn;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,o,s;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,o,s,a,c,l,u,d,h,f;let p,g;if("message"in n)p=n.message,g=n.signature;else{let{chain:v,wallet:m,statement:x,options:I}=n,E;if(Ie())if(typeof m=="object")E=m;else{let sn=window;if("ethereum"in sn&&typeof sn.ethereum=="object"&&"request"in sn.ethereum&&typeof sn.ethereum.request=="function")E=sn.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!I?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=m}let B=new URL((r=I?.url)!==null&&r!==void 0?r:window.location.href),Ve=await E.request({method:"eth_requestAccounts"}).then(sn=>sn).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ve||Ve.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let K=rp(Ve[0]),ae=(i=I?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ae){let sn=await E.request({method:"eth_chainId"});ae=Nb(sn)}let Iw={domain:B.host,address:K,statement:x,uri:B.href,version:"1",chainId:ae,nonce:(o=I?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=I?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=I?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=I?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=I?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=I?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=kb(Iw),g=await E.request({method:"personal_sign",params:[Ob(p),K]})}try{let{data:v,error:m}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:g},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Et});if(m)throw m;if(!v||!v.session||!v.user){let x=new Sn;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:m})}catch(v){if(A(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(n){var r,i,o,s,a,c,l,u,d,h,f,p;let g,v;if("message"in n)g=n.message,v=n.signature;else{let{chain:m,wallet:x,statement:I,options:E}=n,B;if(Ie())if(typeof x=="object")B=x;else{let K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))B=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=x}let Ve=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in B&&B.signIn){let K=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E?.signInWithSolana),{version:"1",domain:Ve.host,uri:Ve.href}),I?{statement:I}:null)),ae;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")ae=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)ae=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ae&&"signature"in ae&&(typeof ae.signedMessage=="string"||ae.signedMessage instanceof Uint8Array)&&ae.signature instanceof Uint8Array)g=typeof ae.signedMessage=="string"?ae.signedMessage:new TextDecoder().decode(ae.signedMessage),v=ae.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${Ve.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${Ve.href}`,`Issued At: ${(o=(i=E?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=E?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((a=E?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((c=E?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((l=E?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((u=E?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((h=(d=E?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...E.signInWithSolana.resources.map(ae=>`- ${ae}`)]:[]].join(`
`);let K=await B.signMessage(new TextEncoder().encode(g),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=K}}try{let{data:m,error:x}=await N(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Tn(v)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=n.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Et});if(x)throw x;if(!m||!m.session||!m.user){let I=new Sn;return this._returnResult({data:{user:null,session:null},error:I})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:x})}catch(m){if(A(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(n){let r=await Zn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Ul;let{data:s,error:a}=await N(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:Et});if(await Ae(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Sn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(n){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=n,c=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Et}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new Sn;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,o,s,a;try{if("email"in n){let{email:c,options:l}=n,u=null,d=null;this.flowType==="pkce"&&([u,d]=await Hr(this.storage,this.storageKey));let{error:h}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in n){let{phone:c,options:l}=n,{data:u,error:d}=await N(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new jr("You must provide either an email or phone number.")}catch(c){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,i;try{let o,s;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await N(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:Et});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(A(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await Hr(this.storage,this.storageKey));let u=await N(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:Ab});return!((s=u.data)===null||s===void 0)&&s.url&&Ie()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new je;let{error:o}=await N(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(A(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:o,options:s}=n,{error:a}=await N(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:o,options:s}=n,{data:a,error:c}=await N(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new jr("You must provide either an email or phone number and a type")}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await Zn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<jl:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await Zn(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=Gl()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=Tb(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:on}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new je}:await N(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:on})})}catch(r){if(A(r))return Bl(r)&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new je;let a=o.session,c=null,l=null;this.flowType==="pkce"&&n.email!=null&&([c,l]=await Hr(this.storage,this.storageKey));let{data:u,error:d}=await N(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:on});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new je;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=ks(n.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=await this._callRefreshToken(n.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=await this._getUser(n.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(A(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new je;let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(A(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Ie())throw new Vr("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Vr(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Rs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Rs("No code detected.");let{data:I,error:E}=await this._exchangeCodeForSession(n.code);if(E)throw E;let B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:I.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=n;if(!s||!c||!a||!u)throw new Vr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let p=f-d;p*1e3<=Lr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);let{data:v,error:m}=await this._getUser(s);if(m)throw m;let x={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:n.type},error:null})}catch(i){if(A(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await Zn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s&&!Bl(s))return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,n);if(c&&!(fb(c)&&(c.status===404||c.status===401||c.status===403)||Bl(c)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await Ae(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=_b(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}})}async resetPasswordForEmail(n,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Hr(this.storage,this.storageKey,!0));try{return await N(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await N(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Ie()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(A(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=n,h=await N(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Et}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Sn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(await Ae(this.storage,`${this.storageKey}-code-verifier`),A(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await N(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await Db(async o=>(o>0&&await Eb(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await N(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Et})),(o,s)=>{let a=200*Math.pow(2,o);return s&&$l(s)&&Date.now()+a-i<Lr})}catch(i){if(this._debug(r,"error",i),A(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),Ie()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await Zn(this.storage,this.storageKey);if(o&&this.userStorage){let a=await Zn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await $r(this.userStorage,this.storageKey+"-user",a)),o.user=(n=a?.user)!==null&&n!==void 0?n:Gl()}else if(o&&!o.user&&!o.user){let a=await Zn(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await Ae(this.storage,this.storageKey+"-user"),await $r(this.storage,this.storageKey,o)):o.user=Gl()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<jl;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${jl}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),$l(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Os;let{data:s,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new je;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),A(s)){let a={data:null,error:s};return $l(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,i=!0){let o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Ae(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await $r(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=Qh(o);await $r(this.storage,this.storageKey,s)}else{let o=Qh(r);await $r(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ae(this.storage,this.storageKey),await Ae(this.storage,this.storageKey+"-code-verifier"),await Ae(this.storage,this.storageKey+"-user"),this.userStorage&&await Ae(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Ie()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),Lr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-n)/Lr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Lr}ms, refresh threshold is ${Ll} ticks`),o<=Ll&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ps)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ie()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await Hr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await N(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:l,error:u}=await N(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Ub(n.webauthn.credential_response):Bb(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:l}=await N(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await N(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:jb(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Vb(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,o,s;if(n)try{let{payload:p}=ks(n),g=null;p.aal&&(g=p.aal);let v=g,{data:{user:m},error:x}=await this.getUser(n);if(x)return this._returnResult({data:null,error:x});((i=(r=m?.factors)===null||r===void 0?void 0:r.filter(B=>B.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(v="aal2");let E=p.amr||[];return{data:{currentLevel:g,nextLevel:v,currentAuthenticationMethods:E},error:null}}catch(p){if(A(p))return this._returnResult({data:null,error:p});throw p}let{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:l}=ks(a.access_token),u=null;l.aal&&(u=l.aal);let d=u;((s=(o=a.user.factors)===null||o===void 0?void 0:o.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");let f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await N(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new je})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new je});let a=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Ie()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(A(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new je});let a=await N(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Ie()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(A(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await N(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new je})})}catch(n){if(A(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await N(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new je})})}catch(r){if(A(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(c=>c.kid===n);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===n),i&&this.jwks_cached_at+db>o)return i;let{data:s,error:a}=await N(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:p,error:g}=await this.getSession();if(g||!p.session)return this._returnResult({data:null,error:g});i=p.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:l}}=ks(i);r?.allowExpired||Ib(s.exp);let u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:o,signature:a},error:null}}let d=Sb(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,vb(`${c}.${l}`)))throw new Ur("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(A(i))return this._returnResult({data:null,error:i});throw i}}}return e.nextInstanceID={},e})(),sp=BA;var $A=sp,ap=$A;var HA="2.94.0",Fs="";typeof Deno<"u"?Fs="deno":typeof document<"u"?Fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Fs="react-native":Fs="node";var qA={"X-Client-Info":`supabase-js-${Fs}/${HA}`},zA={headers:qA},GA={schema:"public"},WA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},KA={};function Ls(e){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(e)}function ZA(e,t){if(Ls(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ls(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YA(e){var t=ZA(e,"string");return Ls(t)=="symbol"?t:t+""}function JA(e,t,n){return(t=YA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(n),!0).forEach(function(r){JA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var QA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),XA=()=>Headers,ex=(e,t,n)=>{let r=QA(n),i=XA();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:e,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,pe(pe({},s),{},{headers:l}))}};function tx(e){return e.endsWith("/")?e:e+"/"}function nx(e,t){var n,r;let{db:i,auth:o,realtime:s,global:a}=e,{db:c,auth:l,realtime:u,global:d}=t,h={db:pe(pe({},c),i),auth:pe(pe({},l),o),realtime:pe(pe({},u),s),storage:{},global:pe(pe(pe({},d),a),{},{headers:pe(pe({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function rx(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ix=class extends ap{constructor(e){super(e)}},ox=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;let o=rx(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:GA,realtime:KA,auth:pe(pe({},WA),{},{storageKey:s}),global:zA},c=nx(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=c.auth)!==null&&l!==void 0?l:{},this.headers,c.global.fetch)}this.fetch=ex(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(pe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new z_(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new sb(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new ys(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();let{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:l},u,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ix({url:this.authUrl.href,headers:pe(pe({},h),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Cs(this.realtimeUrl.href,pe(pe({},e),{},{params:pe(pe({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},qb=(e,t,n)=>new ox(e,t,n);function sx(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(t==null)return!1;let n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}sx()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var ax="https://uzkxigqcipcempyyayww.supabase.co",cx="sb_publishable_fsrePnC0uaE5kO5Ji7q_mg_CBnUkRhf",Dt=qb(ax,cx);var Ki=class e{tableName="equipo";getAll(){return J(Dt.from(this.tableName).select("*").order("id",{ascending:!0})).pipe(P(t=>{if(t.error)throw new Error(t.error.message);return t.data}))}getById(t){return J(Dt.from(this.tableName).select("*").eq("id",t).single()).pipe(P(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}create(t){return J(Dt.from(this.tableName).insert([t]).select().single()).pipe(P(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}update(t,n){return J(Dt.from(this.tableName).update(n).eq("id",t).select().single()).pipe(P(r=>{if(r.error)throw new Error(r.error.message);return r.data}))}delete(t){return J(Dt.from(this.tableName).delete().eq("id",t)).pipe(P(n=>{if(n.error)throw new Error(n.error.message)}))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})};var cp=e=>["/equipos",e],zb=(e,t)=>t.id;function lx(e,t){e&1&&(b(0,"div",4),w(1,"Cargando equipos..."),_())}function ux(e,t){if(e&1&&(b(0,"div",5),w(1),_()),e&2){let n=z();S(),de(n.error())}}function dx(e,t){if(e&1){let n=it();b(0,"tr")(1,"td"),w(2),_(),b(3,"td"),w(4),_(),b(5,"td"),w(6),_(),b(7,"td"),w(8),_(),b(9,"td"),w(10),_(),b(11,"td"),w(12),_(),b(13,"td",12)(14,"a",13),w(15," Editar "),_(),b(16,"button",14),oe("click",function(){let i=re(n).$implicit,o=z(2);return ie(o.deleteEquipo(i.id))}),w(17," Eliminar "),_()()()}if(e&2){let n=t.$implicit;S(2),de(n.id),S(2),de(n.nombre),S(2),de(n.marca),S(2),de(n.modelo),S(2),de(n.estado),S(2),de(n.ambientecodigo||"Sin asignar"),S(2),He("routerLink",Un(7,cp,n.id))}}function fx(e,t){e&1&&(b(0,"tr")(1,"td",15),w(2,"No hay equipos"),_()())}function hx(e,t){if(e&1){let n=it();b(0,"div",8)(1,"button",16),oe("click",function(){re(n);let i=z(2);return ie(i.prevPage())}),w(2," \u2190 Anterior "),_(),b(3,"span",17),w(4),_(),b(5,"button",16),oe("click",function(){re(n);let i=z(2);return ie(i.nextPage())}),w(6," Siguiente \u2192 "),_()()}if(e&2){let n=z(2);S(),He("disabled",n.currentPage()===1),S(3),bi(" ",n.equipos().length," equipos - P\xE1gina ",n.currentPage()," de ",n.totalPages()," "),S(),He("disabled",n.currentPage()===n.totalPages())}}function px(e,t){if(e&1&&(b(0,"p",25),w(1),_()),e&2){let n=z().$implicit;S(),Xe(" \u{1F4CD} ",n.ambientecodigo," ")}}function gx(e,t){if(e&1){let n=it();b(0,"div",10)(1,"div",18)(2,"span",19),w(3),_(),b(4,"span",20),w(5),_()(),b(6,"div",21)(7,"h3"),w(8),_(),b(9,"p",22),w(10),_(),kc(11,px,2,1,"p",23),_(),b(12,"div",24)(13,"a",13),w(14," Editar "),_(),b(15,"button",14),oe("click",function(){let i=re(n).$implicit,o=z(2);return ie(o.deleteEquipo(i.id))}),w(16," Eliminar "),_()()()}if(e&2){let n=t.$implicit;S(3),Xe("#",n.id),S(),Zf(n.estado==null?null:n.estado.toLowerCase()),S(),de(n.estado),S(),He("routerLink",Un(10,cp,n.id)),S(2),de(n.nombre),S(2),_i("",n.marca," - ",n.modelo),S(),He("ngIf",n.ambientecodigo),S(2),He("routerLink",Un(12,cp,n.id))}}function mx(e,t){e&1&&(b(0,"div",11),w(1,"No hay equipos registrados"),_())}function vx(e,t){if(e&1&&(b(0,"div",6)(1,"table",7)(2,"thead")(3,"tr")(4,"th"),w(5,"ID"),_(),b(6,"th"),w(7,"Nombre"),_(),b(8,"th"),w(9,"Marca"),_(),b(10,"th"),w(11,"Modelo"),_(),b(12,"th"),w(13,"Estado"),_(),b(14,"th"),w(15,"Ambiente"),_(),b(16,"th"),w(17,"Acciones"),_()()(),b(18,"tbody"),bn(19,dx,18,9,"tr",null,zb,!1,fx,3,0,"tr"),_()(),Ee(22,hx,7,5,"div",8),_(),b(23,"div",9),bn(24,gx,17,14,"div",10,zb,!1,mx,2,0,"div",11),_()),e&2){let n=z();S(19),wn(n.equiposPaginados()),S(3),De(n.totalPages()>1?22:-1),S(2),wn(n.equipos())}}var Jl=class e{equipoService=y(Ki);equipos=Z([]);loading=Z(!0);error=Z(null);pageSize=10;currentPage=Z(1);totalPages=ot(()=>Math.ceil(this.equipos().length/this.pageSize));equiposPaginados=ot(()=>{let t=(this.currentPage()-1)*this.pageSize,n=t+this.pageSize;return this.equipos().slice(t,n)});ngOnInit(){this.loadEquipos()}loadEquipos(){this.loading.set(!0),this.error.set(null),this.equipoService.getAll().subscribe({next:t=>{this.equipos.set(t),this.loading.set(!1)},error:t=>{this.error.set("Error al cargar equipos"),this.loading.set(!1),console.error(t)}})}nextPage(){this.currentPage()<this.totalPages()&&this.currentPage.set(this.currentPage()+1)}prevPage(){this.currentPage()>1&&this.currentPage.set(this.currentPage()-1)}goToPage(t){t>=1&&t<=this.totalPages()&&this.currentPage.set(t)}deleteEquipo(t){confirm("\xBFEst\xE1s seguro de eliminar este equipo?")&&this.equipoService.delete(t).subscribe({next:()=>{this.loadEquipos()},error:n=>{this.error.set("Error al eliminar equipo"),console.error(n)}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-inventario-list"]],decls:12,vars:3,consts:[[1,"container"],[1,"header"],["routerLink","/menu",1,"btn","btn-secondary","btn-sm"],["routerLink","/equipos/nuevo",1,"btn","btn-primary"],[1,"loading"],[1,"error"],[1,"table-container","desktop-only"],[1,"table"],[1,"pagination"],[1,"cards-container","mobile-only"],[1,"card"],[1,"empty-card"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"routerLink"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","7",1,"empty"],[1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"pagination-info"],[1,"card-header"],[1,"card-id"],[1,"card-estado"],[1,"card-body",3,"routerLink"],[1,"card-marca"],["class","card-ambiente",4,"ngIf"],[1,"card-actions"],[1,"card-ambiente"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"header",1)(2,"div")(3,"a",2),w(4,"\u2190 Volver"),_(),b(5,"h1"),w(6,"Equipos"),_()(),b(7,"a",3),w(8," + Agregar "),_()(),Ee(9,lx,2,0,"div",4),Ee(10,ux,2,1,"div",5),Ee(11,vx,27,3),_()),n&2&&(S(9),De(r.loading()?9:-1),S(),De(r.error()?10:-1),S(),De(!r.loading()&&!r.error()?11:-1))},dependencies:[en,eh,rn],styles:[".table-container[_ngcontent-%COMP%]{display:block}.desktop-only[_ngcontent-%COMP%]{display:table}.mobile-only[_ngcontent-%COMP%]{display:none}.cards-container[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#0055a4;color:#fff}.card-id[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.card-estado[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .75rem;border-radius:20px;background:#fff3}.card-estado.nuevo[_ngcontent-%COMP%]{background:#28a745}.card-estado.usado[_ngcontent-%COMP%]{background:#0055a4}.card-estado.desgastado[_ngcontent-%COMP%]{background:#fd7e14;color:#333}.card-estado.obsoleto[_ngcontent-%COMP%]{background:#dc3545}.card-body[_ngcontent-%COMP%]{padding:1rem;cursor:pointer;transition:background-color .2s}.card-body[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.125rem;color:#1a1a2e}.card-marca[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#666;font-size:.875rem}.card-ambiente[_ngcontent-%COMP%]{margin:0;color:#0055a4;font-size:.875rem;font-weight:500}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.empty-card[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-top:1rem}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media(max-width:1000px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:flex!important}.cards-container[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]})};var tw=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(G(_n),G(Qt))};static \u0275dir=he({type:e})}return e})(),dp=(()=>{class e extends tw{static \u0275fac=(()=>{let n;return function(i){return(n||(n=vn(e)))(i||e)}})();static \u0275dir=he({type:e,features:[vt]})}return e})(),su=new T("");var yx={provide:su,useExisting:St(()=>Qi),multi:!0};function _x(){let e=yt()?yt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var bx=new T(""),Qi=(()=>{class e extends tw{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!_x())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(G(_n),G(Qt),G(bx,8))};static \u0275dir=he({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&oe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Vn([yx]),vt]})}return e})();function wx(e){return e==null||Ex(e)===0}function Ex(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var fp=new T(""),nw=new T("");function Dx(e){return wx(e.value)?{required:!0}:null}function Gb(e){return null}function rw(e){return e!=null}function iw(e){return jn(e)?J(e):e}function ow(e){let t={};return e.forEach(n=>{t=n!=null?D(D({},t),n):t}),Object.keys(t).length===0?null:t}function sw(e,t){return t.map(n=>n(e))}function Cx(e){return!e.validate}function aw(e){return e.map(t=>Cx(t)?t:n=>t.validate(n))}function Ix(e){if(!e)return null;let t=e.filter(rw);return t.length==0?null:function(n){return ow(sw(n,t))}}function hp(e){return e!=null?Ix(aw(e)):null}function Sx(e){if(!e)return null;let t=e.filter(rw);return t.length==0?null:function(n){let r=sw(n,t).map(iw);return ju(r).pipe(P(ow))}}function pp(e){return e!=null?Sx(aw(e)):null}function Wb(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Tx(e){return e._rawValidators}function Mx(e){return e._rawAsyncValidators}function lp(e){return e?Array.isArray(e)?e:[e]:[]}function Xl(e,t){return Array.isArray(e)?e.includes(t):e===t}function Kb(e,t){let n=lp(t);return lp(e).forEach(i=>{Xl(n,i)||n.push(i)}),n}function Zb(e,t){return lp(t).filter(n=>!Xl(e,n))}var eu=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hp(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=pp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Ji=class extends eu{name;get formDirective(){return null}get path(){return null}},Hs=class extends eu{_parent=null;name=null;valueAccessor=null},tu=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var au=(()=>{class e extends tu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(G(Hs,2))};static \u0275dir=he({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&zo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[vt]})}return e})(),cu=(()=>{class e extends tu{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(G(Ji,10))};static \u0275dir=he({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&zo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[vt]})}return e})();var js="VALID",Ql="INVALID",Zi="PENDING",Vs="DISABLED",Yn=class{},nu=class extends Yn{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Bs=class extends Yn{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},$s=class extends Yn{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},Yi=class extends Yn{status;source;constructor(t,n){super(),this.status=t,this.source=n}},up=class extends Yn{source;constructor(t){super(),this.source=t}},ru=class extends Yn{source;constructor(t){super(),this.source=t}};function cw(e){return(lu(e)?e.validators:e)||null}function Ax(e){return Array.isArray(e)?hp(e):e||null}function lw(e,t){return(lu(t)?t.asyncValidators:e)||null}function xx(e){return Array.isArray(e)?pp(e):e||null}function lu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function Rx(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new C(1e3,"");if(!r[n])throw new C(1001,"")}function Nx(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new C(1002,"")})}var iu=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return we(this.statusReactive)}set status(t){we(()=>this.statusReactive.set(t))}_status=ot(()=>this.statusReactive());statusReactive=Z(void 0);get valid(){return this.status===js}get invalid(){return this.status===Ql}get pending(){return this.status==Zi}get disabled(){return this.status===Vs}get enabled(){return this.status!==Vs}errors;get pristine(){return we(this.pristineReactive)}set pristine(t){we(()=>this.pristineReactive.set(t))}_pristine=ot(()=>this.pristineReactive());pristineReactive=Z(!0);get dirty(){return!this.pristine}get touched(){return we(this.touchedReactive)}set touched(t){we(()=>this.touchedReactive.set(t))}_touched=ot(()=>this.touchedReactive());touchedReactive=Z(!1);get untouched(){return!this.touched}_events=new le;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Kb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Kb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Zb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Zb(t,this._rawAsyncValidators))}hasValidator(t){return Xl(this._rawValidators,t)}hasAsyncValidator(t){return Xl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(W(D({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new $s(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new $s(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(W(D({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Bs(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Bs(!0,r))}markAsPending(t={}){this.status=Zi;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Yi(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(W(D({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Vs,this.errors=null,this._forEachChild(i=>{i.disable(W(D({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new nu(this.value,r)),this._events.next(new Yi(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(W(D({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=js,this._forEachChild(r=>{r.enable(W(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(W(D({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===js||this.status===Zi)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new nu(this.value,n)),this._events.next(new Yi(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(W(D({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vs:js}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=Zi,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=iw(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Yi(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new _e,this.statusChanges=new _e}_calculateStatus(){return this._allControlsDisabled()?Vs:this.errors?Ql:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zi)?Zi:this._anyControlsHaveStatus(Ql)?Ql:js}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Bs(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new $s(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){lu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=Ax(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=xx(this._rawAsyncValidators)}},ou=class extends iu{constructor(t,n,r){super(cw(n),lw(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Nx(this,!0,t),Object.keys(t).forEach(r=>{Rx(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,W(D({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ru(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var gp=new T("",{factory:()=>mp}),mp="always";function Ox(e,t){return[...t.path,e]}function uw(e,t,n=mp){dw(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Px(e,t),Lx(e,t),Fx(e,t),kx(e,t)}function Yb(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function kx(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function dw(e,t){let n=Tx(e);t.validator!==null?e.setValidators(Wb(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=Mx(e);t.asyncValidator!==null?e.setAsyncValidators(Wb(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();Yb(t._rawValidators,i),Yb(t._rawAsyncValidators,i)}function Px(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&fw(e,t)})}function Fx(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&fw(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function fw(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Lx(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function jx(e,t){e==null,dw(e,t)}function Vx(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Ux(e){return Object.getPrototypeOf(e.constructor)===dp}function Bx(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function $x(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Qi?n=o:Ux(o)?r=o:i=o}),i||r||n||null}var Hx={provide:Ji,useExisting:St(()=>qs)},Us=Promise.resolve(),qs=(()=>{class e extends Ji{callSetDisabledState;get submitted(){return we(this.submittedReactive)}_submitted=ot(()=>this.submittedReactive());submittedReactive=Z(!1);_directives=new Set;form;ngSubmit=new _e;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new ou({},hp(n),pp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Us.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),uw(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Us.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Us.then(()=>{let r=this._findContainer(n.path),i=new ou({});jx(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Us.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Us.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),Bx(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new up(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)(G(fp,10),G(nw,10),G(gp,8))};static \u0275dir=he({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&oe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Vn([Hx]),vt]})}return e})();function Jb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Qb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var qx=class extends iu{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(cw(n),lw(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Qb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new ru(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Jb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Jb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Qb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var zx={provide:Hs,useExisting:St(()=>zs)},Xb=Promise.resolve(),zs=(()=>{class e extends Hs{_changeDetectorRef;callSetDisabledState;control=new qx;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _e;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=$x(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Vx(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Xb.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Tr(r);Xb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Ox(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(G(Ji,9),G(fp,10),G(nw,10),G(su,10),G(Sr,8),G(gp,8))};static \u0275dir=he({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Vn([zx]),vt,mn]})}return e})();var uu=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var Gx={provide:su,useExisting:St(()=>du),multi:!0};function hw(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Wx(e){return e.split(":")[0]}var du=(()=>{class e extends dp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=y(Ft).injector;destroyRef=y(gt);cdr=y(Sr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Bo({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=hw(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=Wx(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vn(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&oe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Vn([Gx]),vt]})}return e})(),pw=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(hw(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(G(Qt),G(_n),G(du,9))};static \u0275dir=he({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),Kx={provide:su,useExisting:St(()=>gw),multi:!0};function ew(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Zx(e){return e.split(":")[0]}var gw=(()=>{class e extends dp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=Zx(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vn(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&oe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Vn([Kx]),vt]})}return e})(),mw=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(ew(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(ew(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(G(Qt),G(_n),G(gw,9))};static \u0275dir=he({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var Yx=(()=>{class e{_validator=Gb;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Gb,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,features:[mn]})}return e})();var Jx={provide:fp,useExisting:St(()=>Gs),multi:!0};var Gs=(()=>{class e extends Yx{required;inputName="required";normalizeInput=Tr;createValidator=n=>Dx;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=vn(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&vi("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Vn([Jx]),vt]})}return e})();var Qx=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Pt({type:e});static \u0275inj=ut({})}return e})();var fu=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:gp,useValue:n.callSetDisabledState??mp}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Pt({type:e});static \u0275inj=ut({imports:[Qx]})}return e})();var Jn=class e{tableName="ambiente";getAll(){return J(Dt.from(this.tableName).select("*").order("id",{ascending:!0})).pipe(P(t=>{if(t.error)throw new Error(t.error.message);return t.data}))}getById(t){return J(Dt.from(this.tableName).select("*").eq("id",t).single()).pipe(P(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}create(t){return J(Dt.from(this.tableName).insert([t]).select().single()).pipe(P(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}update(t,n){return J(Dt.from(this.tableName).update(n).eq("id",t).select().single()).pipe(P(r=>{if(r.error)throw new Error(r.error.message);return r.data}))}delete(t){return J(Dt.from(this.tableName).delete().eq("id",t)).pipe(P(n=>{if(n.error)throw new Error(n.error.message)}))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})};var Xx=(e,t)=>t.id;function eR(e,t){e&1&&(b(0,"div",2),w(1,"Cargando..."),_())}function tR(e,t){if(e&1&&(b(0,"div",3),w(1),_()),e&2){let n=z();S(),de(n.error())}}function nR(e,t){if(e&1&&(b(0,"option",23),w(1),_()),e&2){let n=t.$implicit,r=z(2);He("value",n.id)("selected",r.form.ambientecodigo===n.codigo),S(),_i(" ",n.codigo," - ",n.nombre," ")}}function rR(e,t){if(e&1){let n=it();b(0,"form",5),oe("ngSubmit",function(){re(n);let i=z();return ie(i.onSubmit())}),b(1,"div",6)(2,"label",7),w(3,"Nombre *"),_(),b(4,"input",8),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.nombre,i)||(o.form.nombre=i),ie(i)}),_()(),b(5,"div",9)(6,"div",6)(7,"label",10),w(8,"Marca *"),_(),b(9,"input",11),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.marca,i)||(o.form.marca=i),ie(i)}),_()(),b(10,"div",6)(11,"label",12),w(12,"Modelo *"),_(),b(13,"input",13),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.modelo,i)||(o.form.modelo=i),ie(i)}),_()()(),b(14,"div",9)(15,"div",6)(16,"label",14),w(17,"Estado *"),_(),b(18,"select",15),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.estado,i)||(o.form.estado=i),ie(i)}),b(19,"option",16),w(20,"Seleccionar estado"),_(),b(21,"option",17),w(22,"Nuevo"),_(),b(23,"option",18),w(24,"Usado"),_(),b(25,"option",19),w(26,"Desgastado"),_(),b(27,"option",20),w(28,"Obsoleto"),_()()(),b(29,"div",6)(30,"label",21),w(31,"Ambiente (C\xF3digo)"),_(),b(32,"select",22),oe("change",function(i){re(n);let o=z();return ie(o.onAmbienteChange(i))}),b(33,"option",16),w(34,"Sin asignar"),_(),bn(35,nR,2,4,"option",23,Xx),_()()(),b(37,"div",24)(38,"button",25),w(39),_(),b(40,"button",26),oe("click",function(){re(n);let i=z();return ie(i.cancel())}),w(41," Cancelar "),_()()()}if(e&2){let n=z();S(4),Lt("ngModel",n.form.nombre),S(5),Lt("ngModel",n.form.marca),S(4),Lt("ngModel",n.form.modelo),S(5),Lt("ngModel",n.form.estado),S(17),wn(n.ambientes()),S(4),Xe(" ",n.isEditing()?"Actualizar":"Crear"," ")}}var Ws=class e{equipoService=y(Ki);ambienteService=y(Jn);router=y(Cn);route=y(ct);isEditing=Z(!1);loading=Z(!1);error=Z(null);ambientes=Z([]);form={nombre:"",marca:"",modelo:"",estado:"",ambientecodigo:"",ambientenombre:""};equipoId=null;ngOnInit(){this.loadAmbientes();let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditing.set(!0),this.equipoId=+t,this.loadEquipo(this.equipoId))}loadAmbientes(){this.ambienteService.getAll().subscribe({next:t=>{this.ambientes.set(t)},error:t=>{console.error("Error al cargar ambientes",t)}})}loadEquipo(t){this.loading.set(!0),this.equipoService.getById(t).subscribe({next:n=>{this.form={nombre:n.nombre,marca:n.marca,modelo:n.modelo,estado:n.estado,ambientecodigo:n.ambientecodigo||"",ambientenombre:n.ambientenombre||""},this.loading.set(!1)},error:n=>{this.error.set("Error al cargar equipo"),this.loading.set(!1),console.error(n)}})}onAmbienteChange(t){let r=t.target.value;if(!r){this.form.ambientecodigo="",this.form.ambientenombre="";return}let i=this.ambientes().find(o=>o.id===+r);i&&(this.form.ambientecodigo=i.codigo,this.form.ambientenombre=i.nombre)}onSubmit(){this.equipoId?this.update():this.create()}create(){this.loading.set(!0),this.error.set(null),this.equipoService.create(this.form).subscribe({next:()=>{this.router.navigate(["/equipos"])},error:t=>{this.error.set("Error al crear equipo"),this.loading.set(!1),console.error(t)}})}update(){this.equipoId&&(this.loading.set(!0),this.error.set(null),this.equipoService.update(this.equipoId,this.form).subscribe({next:()=>{this.router.navigate(["/equipos"])},error:t=>{this.error.set("Error al actualizar equipo"),this.loading.set(!1),console.error(t)}}))}cancel(){this.router.navigate(["/equipos"])}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-producto-form"]],decls:7,vars:4,consts:[[1,"container"],[1,"header"],[1,"loading"],[1,"error"],[1,"form"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-row"],["for","marca"],["type","text","id","marca","name","marca","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","modelo"],["type","text","id","modelo","name","modelo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","estado"],["id","estado","name","estado","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],["value","Nuevo"],["value","Usado"],["value","Desgastado"],["value","Obsoleto"],["for","ambiente"],["id","ambiente",1,"form-control",3,"change"],[3,"value","selected"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"header",1)(2,"h1"),w(3),_()(),Ee(4,eR,2,0,"div",2),Ee(5,tR,2,1,"div",3),Ee(6,rR,42,5,"form",4),_()),n&2&&(S(3),Xe("",r.isEditing()?"Editar":"Nuevo"," Equipo"),S(),De(r.loading()?4:-1),S(),De(r.error()?5:-1),S(),De(r.loading()?-1:6))},dependencies:[en,fu,uu,pw,mw,Qi,du,au,cu,Gs,zs,qs],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.form[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0055a4;box-shadow:0 0 0 2px #0055a440}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background-color:#0055a4;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#004080}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px;border-radius:4px;margin-bottom:20px}"]})};var _w=e=>["/ambientes",e],yw=(e,t)=>t.id;function iR(e,t){e&1&&(b(0,"div",4),w(1,"Cargando ambientes..."),_())}function oR(e,t){if(e&1&&(b(0,"div",5),w(1),_()),e&2){let n=z();S(),de(n.error())}}function sR(e,t){if(e&1){let n=it();b(0,"tr")(1,"td"),w(2),_(),b(3,"td"),w(4),_(),b(5,"td"),w(6),_(),b(7,"td",12)(8,"a",13),w(9," Editar "),_(),b(10,"button",14),oe("click",function(){let i=re(n).$implicit,o=z(2);return ie(o.deleteAmbiente(i.id))}),w(11," Eliminar "),_()()()}if(e&2){let n=t.$implicit;S(2),de(n.codigo),S(2),de(n.nombre),S(2),de(n.ubicacion),S(2),He("routerLink",Un(4,_w,n.id))}}function aR(e,t){e&1&&(b(0,"tr")(1,"td",15),w(2,"No hay ambientes"),_()())}function cR(e,t){if(e&1){let n=it();b(0,"div",8)(1,"button",16),oe("click",function(){re(n);let i=z(2);return ie(i.prevPage())}),w(2," \u2190 Anterior "),_(),b(3,"span",17),w(4),_(),b(5,"button",16),oe("click",function(){re(n);let i=z(2);return ie(i.nextPage())}),w(6," Siguiente \u2192 "),_()()}if(e&2){let n=z(2);S(),He("disabled",n.currentPage()===1),S(3),bi(" ",n.ambientes().length," ambientes - P\xE1gina ",n.currentPage()," de ",n.totalPages()," "),S(),He("disabled",n.currentPage()===n.totalPages())}}function lR(e,t){if(e&1){let n=it();b(0,"div",10)(1,"div",18)(2,"span",19),w(3),_()(),b(4,"div",20)(5,"h3"),w(6),_(),b(7,"p",21),w(8),_()(),b(9,"div",22)(10,"a",13),w(11," Editar "),_(),b(12,"button",14),oe("click",function(){let i=re(n).$implicit,o=z(2);return ie(o.deleteAmbiente(i.id))}),w(13," Eliminar "),_()()()}if(e&2){let n=t.$implicit;S(3),de(n.codigo),S(3),de(n.nombre),S(2),Xe("\u{1F4CD} ",n.ubicacion),S(2),He("routerLink",Un(4,_w,n.id))}}function uR(e,t){e&1&&(b(0,"div",11),w(1,"No hay ambientes registrados"),_())}function dR(e,t){if(e&1&&(b(0,"div",6)(1,"table",7)(2,"thead")(3,"tr")(4,"th"),w(5,"C\xF3digo"),_(),b(6,"th"),w(7,"Nombre"),_(),b(8,"th"),w(9,"Ubicaci\xF3n"),_(),b(10,"th"),w(11,"Acciones"),_()()(),b(12,"tbody"),bn(13,sR,12,6,"tr",null,yw,!1,aR,3,0,"tr"),_()(),Ee(16,cR,7,5,"div",8),_(),b(17,"div",9),bn(18,lR,14,6,"div",10,yw,!1,uR,2,0,"div",11),_()),e&2){let n=z();S(13),wn(n.ambientesPaginados()),S(3),De(n.totalPages()>1?16:-1),S(2),wn(n.ambientes())}}var hu=class e{ambienteService=y(Jn);ambientes=Z([]);loading=Z(!0);error=Z(null);pageSize=10;currentPage=Z(1);totalPages=ot(()=>Math.ceil(this.ambientes().length/this.pageSize));ambientesPaginados=ot(()=>{let t=(this.currentPage()-1)*this.pageSize,n=t+this.pageSize;return this.ambientes().slice(t,n)});ngOnInit(){this.loadAmbientes()}loadAmbientes(){this.loading.set(!0),this.error.set(null),this.ambienteService.getAll().subscribe({next:t=>{this.ambientes.set(t),this.currentPage.set(1),this.loading.set(!1)},error:t=>{this.error.set("Error al cargar ambientes"),this.loading.set(!1),console.error(t)}})}nextPage(){this.currentPage()<this.totalPages()&&this.currentPage.set(this.currentPage()+1)}prevPage(){this.currentPage()>1&&this.currentPage.set(this.currentPage()-1)}deleteAmbiente(t){confirm("\xBFEst\xE1s seguro de eliminar este ambiente?")&&this.ambienteService.delete(t).subscribe({next:()=>{this.loadAmbientes()},error:n=>{this.error.set("Error al eliminar ambiente"),console.error(n)}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-ambiente-list"]],decls:12,vars:3,consts:[[1,"container"],[1,"header"],["routerLink","/menu",1,"btn","btn-secondary","btn-sm"],["routerLink","/ambientes/nuevo",1,"btn","btn-primary"],[1,"loading"],[1,"error"],[1,"table-container","desktop-only"],[1,"table"],[1,"pagination"],[1,"cards-container","mobile-only"],[1,"card"],[1,"empty-card"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"routerLink"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","4",1,"empty"],[1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"pagination-info"],[1,"card-header"],[1,"card-codigo"],[1,"card-body"],[1,"card-ubicacion"],[1,"card-actions"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"header",1)(2,"div")(3,"a",2),w(4,"\u2190 Volver"),_(),b(5,"h1"),w(6,"Ambientes"),_()(),b(7,"a",3),w(8," + Agregar "),_()(),Ee(9,iR,2,0,"div",4),Ee(10,oR,2,1,"div",5),Ee(11,dR,21,3),_()),n&2&&(S(9),De(r.loading()?9:-1),S(),De(r.error()?10:-1),S(),De(!r.loading()&&!r.error()?11:-1))},dependencies:[en,rn],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0}.table-container[_ngcontent-%COMP%]{display:block}.desktop-only[_ngcontent-%COMP%]{display:table}.mobile-only[_ngcontent-%COMP%]{display:none}.cards-container[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#0055a4;color:#fff}.card-codigo[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9}.card-body[_ngcontent-%COMP%]{padding:1rem}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.125rem;color:#1a1a2e}.card-ubicacion[_ngcontent-%COMP%]{margin:0;color:#0055a4;font-size:.875rem;font-weight:500}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.empty-card[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-top:1rem}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#0055a4;color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f5f5f5}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666}.error[_ngcontent-%COMP%]{padding:1rem;background:#fee;color:#c00;border-radius:4px;margin-bottom:1rem}.empty[_ngcontent-%COMP%]{text-align:center;color:#999;padding:2rem}@media(max-width:1000px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:flex!important}.cards-container[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]})};function fR(e,t){e&1&&(b(0,"div",2),w(1,"Cargando..."),_())}function hR(e,t){if(e&1&&(b(0,"div",3),w(1),_()),e&2){let n=z();S(),de(n.error())}}function pR(e,t){if(e&1){let n=it();b(0,"form",5),oe("ngSubmit",function(){re(n);let i=z();return ie(i.onSubmit())}),b(1,"div",6)(2,"label",7),w(3,"C\xF3digo *"),_(),b(4,"input",8),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.codigo,i)||(o.form.codigo=i),ie(i)}),_()(),b(5,"div",6)(6,"label",9),w(7,"Nombre *"),_(),b(8,"input",10),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.nombre,i)||(o.form.nombre=i),ie(i)}),_()(),b(9,"div",6)(10,"label",11),w(11,"Ubicaci\xF3n *"),_(),b(12,"input",12),jt("ngModelChange",function(i){re(n);let o=z();return Xt(o.form.ubicacion,i)||(o.form.ubicacion=i),ie(i)}),_()(),b(13,"div",13)(14,"button",14),w(15),_(),b(16,"button",15),oe("click",function(){re(n);let i=z();return ie(i.cancel())}),w(17," Cancelar "),_()()()}if(e&2){let n=z();S(4),Lt("ngModel",n.form.codigo),S(4),Lt("ngModel",n.form.nombre),S(4),Lt("ngModel",n.form.ubicacion),S(3),Xe(" ",n.isEditing()?"Actualizar":"Crear"," ")}}var Ks=class e{ambienteService=y(Jn);router=y(Cn);route=y(ct);isEditing=Z(!1);loading=Z(!1);error=Z(null);form={codigo:"",nombre:"",ubicacion:""};ambienteId=null;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditing.set(!0),this.ambienteId=+t,this.loadAmbiente(this.ambienteId))}loadAmbiente(t){this.loading.set(!0),this.ambienteService.getById(t).subscribe({next:n=>{this.form={codigo:n.codigo,nombre:n.nombre,ubicacion:n.ubicacion},this.loading.set(!1)},error:n=>{this.error.set("Error al cargar ambiente"),this.loading.set(!1),console.error(n)}})}onSubmit(){this.ambienteId?this.update():this.create()}create(){this.loading.set(!0),this.error.set(null),this.ambienteService.create(this.form).subscribe({next:()=>{this.router.navigate(["/ambientes"])},error:t=>{this.error.set("Error al crear ambiente"),this.loading.set(!1),console.error(t)}})}update(){this.ambienteId&&(this.loading.set(!0),this.error.set(null),this.ambienteService.update(this.ambienteId,this.form).subscribe({next:()=>{this.router.navigate(["/ambientes"])},error:t=>{this.error.set("Error al actualizar ambiente"),this.loading.set(!1),console.error(t)}}))}cancel(){this.router.navigate(["/ambientes"])}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-ambiente-form"]],decls:7,vars:4,consts:[[1,"container"],[1,"header"],[1,"loading"],[1,"error"],[1,"form"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","codigo"],["type","text","id","codigo","name","codigo","required","","placeholder","Ej: A001",1,"form-control",3,"ngModelChange","ngModel"],["for","nombre"],["type","text","id","nombre","name","nombre","required","","placeholder","Ej: Aula 101",1,"form-control",3,"ngModelChange","ngModel"],["for","ubicacion"],["type","text","id","ubicacion","name","ubicacion","required","","placeholder","Ej: Edificio A - Piso 1",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"header",1)(2,"h1"),w(3),_()(),Ee(4,fR,2,0,"div",2),Ee(5,hR,2,1,"div",3),Ee(6,pR,18,4,"form",4),_()),n&2&&(S(3),Xe("",r.isEditing()?"Editar":"Nuevo"," Ambiente"),S(),De(r.loading()?4:-1),S(),De(r.error()?5:-1),S(),De(r.loading()?-1:6))},dependencies:[en,fu,uu,Qi,au,cu,Gs,zs,qs],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#4a5568}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666}.error[_ngcontent-%COMP%]{padding:1rem;background:#fee;color:#c00;border-radius:8px;margin-bottom:1rem}"]})};var bw=[{path:"",component:Il},{path:"menu",component:Sl},{path:"equipos",component:Jl},{path:"equipos/nuevo",component:Ws},{path:"equipos/:id",component:Ws},{path:"ambientes",component:hu},{path:"ambientes/nuevo",component:Ks},{path:"ambientes/:id",component:Ks}];var vp="Service workers are disabled or not supported by this browser",Xi=class{serviceWorker;worker;registration;events;constructor(t,n){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new U(r=>r.error(new C(5601,!1)));else{let r=null,i=new le;this.worker=new U(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=t;l!==null&&(r=l,i.next(r))};t.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Be(()=>t.getRegistration().then(l=>{if(!l)throw new C(5601,!1);return l})));let s=new le;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};t.addEventListener("message",a),n?.get(Ft,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",o),t.removeEventListener("message",a)})}}postMessage(t,n){return new Promise(r=>{this.worker.pipe(We(1)).subscribe(i=>{i.postMessage(D({action:t},n)),r()})})}postMessageWithOperation(t,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(t,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=r=>r.type===t:n=r=>t.includes(r.type),this.events.pipe(Je(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(We(1))}waitForOperationCompleted(t){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(Je(i=>i.nonce===t),We(1),P(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},gR=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new le;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=an,this.notificationClicks=an,this.notificationCloses=an,this.pushSubscriptionChanges=an,this.subscription=an;return}this.messages=this.sw.eventsOfType("PUSH").pipe(P(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(P(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(P(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(P(i=>i.data)),this.pushManager=this.sw.registration.pipe(P(i=>i.pushManager));let r=this.pushManager.pipe(Be(i=>i.getSubscription()));this.subscription=new U(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(vp));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Be(c=>c.subscribe(r)),We(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(vp));let n=r=>{if(r===null)throw new C(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new C(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(We(1),Be(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||e)(R(Xi))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),mR=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=an,this.unrecoverable=an;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(vp));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new C(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||e)(R(Xi))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),Ew=new T("");function vR(){let e=y(Zs);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=y(Ew),n=y(ke),r=y(Ft);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:o}=e;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=ww(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),ww(+a[0])]);break;default:throw new C(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(s=>console.error(dn(5604,!1)))})})}function ww(e){return new Promise(t=>setTimeout(t,e))}function yR(){let e=y(Zs),t=y(Qe),n=!0;return new Xi(n&&e.enabled!==!1?navigator.serviceWorker:void 0,t)}var Zs=class{enabled;updateViaCache;type;scope;registrationStrategy};function Dw(e,t={}){return Tt([gR,mR,{provide:Ew,useValue:e},{provide:Zs,useValue:t},{provide:Xi,useFactory:yR},Pc(vR)])}var Cw={providers:[Vd(),jh(bw),hh(),Dw("ngsw-worker.js",{enabled:!py(),registrationStrategy:"registerWhenStable:30000"})]};var pu=class e{title=Z("inventario-frontend");static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Le({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){n&1&&yi(0,"router-outlet")},dependencies:[ps],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;background-color:#f5f5f5;color:#333;line-height:1.6}"]})};ch(pu,Cw).catch(e=>console.error(e));
