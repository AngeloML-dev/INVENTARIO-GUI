var Vw=Object.defineProperty,Uw=Object.defineProperties;var Bw=Object.getOwnPropertyDescriptors;var Pp=Object.getOwnPropertySymbols;var $w=Object.prototype.hasOwnProperty,Hw=Object.prototype.propertyIsEnumerable;var Fp=(e,t,n)=>t in e?Vw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,D=(e,t)=>{for(var n in t||={})$w.call(t,n)&&Fp(e,n,t[n]);if(Pp)for(var n of Pp(t))Hw.call(t,n)&&Fp(e,n,t[n]);return e},Z=(e,t)=>Uw(e,Bw(t));var Ye=null,oa=!1,Nu=1,qw=null,et=Symbol("SIGNAL");function k(e){let t=Ye;return Ye=e,t}function aa(){return Ye}var uo={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fo(e){if(oa)throw new Error("");if(Ye===null)return;Ye.consumerOnSignalRead(e);let t=Ye.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Ye.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Ye.producers,n!==void 0&&n.producer===e)){Ye.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Ye&&(!r||Gw(i,Ye)))return;let o=Xr(Ye),s={producer:e,consumer:Ye,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Ye.producersTail=s,t!==void 0?t.nextProducer=s:Ye.producers=s,o&&Up(e,s)}function Lp(){Nu++}function Ou(e){if(!(Xr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Nu)){if(!e.producerMustRecompute(e)&&!la(e)){Ru(e);return}e.producerRecomputeValue(e),Ru(e)}}function ku(e){if(e.consumers===void 0)return;let t=oa;oa=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||zw(r)}}finally{oa=t}}function Pu(){return Ye?.consumerAllowSignalWrites!==!1}function zw(e){e.dirty=!0,ku(e),e.consumerMarkedDirty?.(e)}function Ru(e){e.dirty=!1,e.lastCleanEpoch=Nu}function ho(e){return e&&jp(e),k(e)}function jp(e){e.producersTail=void 0,e.recomputing=!0}function ca(e,t){k(t),e&&Vp(e)}function Vp(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Xr(e))do n=Fu(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function la(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Ou(n),r!==n.version))return!0}return!1}function po(e){if(Xr(e)){let t=e.producers;for(;t!==void 0;)t=Fu(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Up(e,t){let n=e.consumersTail,r=Xr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)Up(i.producer,i)}function Fu(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Xr(t)){let o=t.producers;for(;o!==void 0;)o=Fu(o)}return n}function Xr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Lu(e){qw?.(e)}function Gw(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function ju(e,t){return Object.is(e,t)}function ua(e,t){let n=Object.create(Ww);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Ou(n),fo(n),n.value===sa)throw n.error;return n.value};return r[et]=n,Lu(n),r}var Au=Symbol("UNSET"),xu=Symbol("COMPUTING"),sa=Symbol("ERRORED"),Ww=Z(D({},uo),{value:Au,dirty:!0,error:null,equal:ju,kind:"computed",producerMustRecompute(e){return e.value===Au||e.value===xu},producerRecomputeValue(e){if(e.value===xu)throw new Error("");let t=e.value;e.value=xu;let n=ho(e),r,i=!1;try{r=e.computation(),k(null),i=t!==Au&&t!==sa&&r!==sa&&e.equal(t,r)}catch(o){r=sa,e.error=o}finally{ca(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function Kw(){throw new Error}var Bp=Kw;function $p(e){Bp(e)}function Vu(e){Bp=e}var Yw=null;function Uu(e,t){let n=Object.create(da);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Hp(n);return r[et]=n,Lu(n),[r,s=>go(n,s),s=>qp(n,s)]}function Hp(e){return fo(e),e.value}function go(e,t){Pu()||$p(e),e.equal(e.value,t)||(e.value=t,Zw(e))}function qp(e,t){Pu()||$p(e),go(e,t(e.value))}var da=Z(D({},uo),{equal:ju,value:void 0,kind:"signal"});function Zw(e){e.version++,Lp(),ku(e),Yw?.(e)}function Bu(e){let t=k(null);try{return e()}finally{k(t)}}function U(e){return typeof e=="function"}function ei(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var fa=ei(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function mo(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ve=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(U(r))try{r()}catch(o){t=o instanceof fa?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zp(o)}catch(s){t=t??[],s instanceof fa?t=[...t,...s.errors]:t.push(s)}}if(t)throw new fa(t)}}add(t){var n;if(t&&t!==this)if(this.closed)zp(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&mo(n,t)}remove(t){let{_finalizers:n}=this;n&&mo(n,t),t instanceof e&&t._removeParent(this)}};Ve.EMPTY=(()=>{let e=new Ve;return e.closed=!0,e})();var $u=Ve.EMPTY;function ha(e){return e instanceof Ve||e&&"closed"in e&&U(e.remove)&&U(e.add)&&U(e.unsubscribe)}function zp(e){U(e)?e():e.unsubscribe()}var Rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ti={setTimeout(e,t,...n){let{delegate:r}=ti;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ti;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function pa(e){ti.setTimeout(()=>{let{onUnhandledError:t}=Rt;if(t)t(e);else throw e})}function nr(){}var Gp=Hu("C",void 0,void 0);function Wp(e){return Hu("E",void 0,e)}function Kp(e){return Hu("N",e,void 0)}function Hu(e,t,n){return{kind:e,value:t,error:n}}var rr=null;function ni(e){if(Rt.useDeprecatedSynchronousErrorHandling){let t=!rr;if(t&&(rr={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=rr;if(rr=null,n)throw r}}else e()}function Yp(e){Rt.useDeprecatedSynchronousErrorHandling&&rr&&(rr.errorThrown=!0,rr.error=e)}var ir=class extends Ve{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,ha(t)&&t.add(this)):this.destination=Xw}static create(t,n,r){return new ri(t,n,r)}next(t){this.isStopped?zu(Kp(t),this):this._next(t)}error(t){this.isStopped?zu(Wp(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?zu(Gp,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Jw=Function.prototype.bind;function qu(e,t){return Jw.call(e,t)}var Gu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ga(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ga(r)}else ga(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ga(n)}}},ri=class extends ir{constructor(t,n,r){super();let i;if(U(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Rt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&qu(t.next,o),error:t.error&&qu(t.error,o),complete:t.complete&&qu(t.complete,o)}):i=t}this.destination=new Gu(i)}};function ga(e){Rt.useDeprecatedSynchronousErrorHandling?Yp(e):pa(e)}function Qw(e){throw e}function zu(e,t){let{onStoppedNotification:n}=Rt;n&&ti.setTimeout(()=>n(e,t))}var Xw={closed:!0,next:nr,error:Qw,complete:nr};var ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(e){return e}function Wu(...e){return Ku(e)}function Ku(e){return e.length===0?Nt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var q=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=tE(n)?n:new ri(n,r,i);return ni(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Zp(r),new r((i,o)=>{let s=new ri({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ii](){return this}pipe(...n){return Ku(n)(this)}toPromise(n){return n=Zp(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Zp(e){var t;return(t=e??Rt.Promise)!==null&&t!==void 0?t:Promise}function eE(e){return e&&U(e.next)&&U(e.error)&&U(e.complete)}function tE(e){return e&&e instanceof ir||eE(e)&&ha(e)}function nE(e){return U(e?.lift)}function oe(e){return t=>{if(nE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(e,t,n,r,i){return new Yu(e,t,n,r,i)}var Yu=class extends ir{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Jp=ei(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=(()=>{class e extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ma(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Jp}next(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?$u:(this.currentObservers=null,o.push(n),new Ve(()=>{this.currentObservers=null,mo(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return e.create=(t,n)=>new ma(t,n),e})(),ma=class extends fe{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:$u}};var Ue=class extends fe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Be=new q(e=>e.complete());function Qp(e){return e&&U(e.schedule)}function Xp(e){return e[e.length-1]}function va(e){return U(Xp(e))?e.pop():void 0}function An(e){return Qp(Xp(e))?e.pop():void 0}function sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ya(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function eg(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function or(e){return this instanceof or?(this.v=e,this):new or(e)}function tg(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(v){return new Promise(function(w,_){o.push([f,v,w,_])>1||c(f,v)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(v){h(o[0][3],v)}}function l(f){f.value instanceof or?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ng(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof eg=="function"?eg(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var _a=e=>e&&typeof e.length=="number"&&typeof e!="function";function ba(e){return U(e?.then)}function wa(e){return U(e[ii])}function Ea(e){return Symbol.asyncIterator&&U(e?.[Symbol.asyncIterator])}function Ca(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Da=rE();function Ia(e){return U(e?.[Da])}function Sa(e){return tg(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield or(n.read());if(i)return yield or(void 0);yield yield or(r)}}finally{n.releaseLock()}})}function Ta(e){return U(e?.getReader)}function Ce(e){if(e instanceof q)return e;if(e!=null){if(wa(e))return iE(e);if(_a(e))return oE(e);if(ba(e))return sE(e);if(Ea(e))return rg(e);if(Ia(e))return aE(e);if(Ta(e))return cE(e)}throw Ca(e)}function iE(e){return new q(t=>{let n=e[ii]();if(U(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oE(e){return new q(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function sE(e){return new q(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,pa)})}function aE(e){return new q(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function rg(e){return new q(t=>{lE(e,t).catch(n=>t.error(n))})}function cE(e){return rg(Sa(e))}function lE(e,t){var n,r,i,o;return ya(this,void 0,void 0,function*(){try{for(n=ng(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function ot(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Ma(e,t=0){return oe((n,r)=>{n.subscribe(se(r,i=>ot(r,e,()=>r.next(i),t),()=>ot(r,e,()=>r.complete(),t),i=>ot(r,e,()=>r.error(i),t)))})}function Aa(e,t=0){return oe((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function ig(e,t){return Ce(e).pipe(Aa(t),Ma(t))}function og(e,t){return Ce(e).pipe(Aa(t),Ma(t))}function sg(e,t){return new q(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function ag(e,t){return new q(n=>{let r;return ot(n,t,()=>{r=e[Da](),ot(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>U(r?.return)&&r.return()})}function xa(e,t){if(!e)throw new Error("Iterable cannot be null");return new q(n=>{ot(n,t,()=>{let r=e[Symbol.asyncIterator]();ot(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function cg(e,t){return xa(Sa(e),t)}function lg(e,t){if(e!=null){if(wa(e))return ig(e,t);if(_a(e))return sg(e,t);if(ba(e))return og(e,t);if(Ea(e))return xa(e,t);if(Ia(e))return ag(e,t);if(Ta(e))return cg(e,t)}throw Ca(e)}function te(e,t){return t?lg(e,t):Ce(e)}function K(...e){let t=An(e);return te(e,t)}function Zu(e,t){let n=U(e)?e:()=>e,r=i=>i.error(n());return new q(t?i=>t.schedule(r,0,i):r)}function Ra(e){return!!e&&(e instanceof q||U(e.lift)&&U(e.subscribe))}var ar=ei(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function F(e,t){return oe((n,r)=>{let i=0;n.subscribe(se(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:uE}=Array;function dE(e,t){return uE(t)?e(...t):e(t)}function Na(e){return F(t=>dE(e,t))}var{isArray:fE}=Array,{getPrototypeOf:hE,prototype:pE,keys:gE}=Object;function Oa(e){if(e.length===1){let t=e[0];if(fE(t))return{args:t,keys:null};if(mE(t)){let n=gE(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function mE(e){return e&&typeof e=="object"&&hE(e)===pE}function ka(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ju(...e){let t=An(e),n=va(e),{args:r,keys:i}=Oa(e);if(r.length===0)return te([],t);let o=new q(vE(r,t,i?s=>ka(i,s):Nt));return n?o.pipe(Na(n)):o}function vE(e,t,n=Nt){return r=>{ug(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)ug(t,()=>{let l=te(e[c],t),u=!1;l.subscribe(se(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function ug(e,t,n){e?ot(n,e,t):t()}function dg(e,t,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&t.complete()},f=v=>l<r?p(v):c.push(v),p=v=>{o&&t.next(v),l++;let w=!1;Ce(n(v,u++)).subscribe(se(t,_=>{i?.(_),o?f(_):t.next(_)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let _=c.shift();s?ot(t,s,()=>p(_)):p(_)}h()}catch(_){t.error(_)}}))};return e.subscribe(se(t,f,()=>{d=!0,h()})),()=>{a?.()}}function tt(e,t,n=1/0){return U(t)?tt((r,i)=>F((o,s)=>t(r,o,i,s))(Ce(e(r,i))),n):(typeof t=="number"&&(n=t),oe((r,i)=>dg(r,i,e,n)))}function fg(e=1/0){return tt(Nt,e)}function hg(){return fg(1)}function oi(...e){return hg()(te(e,An(e)))}function vo(e){return new q(t=>{Ce(e()).subscribe(t)})}function Qu(...e){let t=va(e),{args:n,keys:r}=Oa(e),i=new q(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;Ce(n[u]).subscribe(se(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?ka(r,a):a),o.complete())}))}});return t?i.pipe(Na(t)):i}var un=new q(nr);function st(e,t){return oe((n,r)=>{let i=0;n.subscribe(se(r,o=>e.call(t,o,i++)&&r.next(o)))})}function yo(e){return oe((t,n)=>{let r=null,i=!1,o;r=t.subscribe(se(n,void 0,void 0,s=>{o=Ce(e(s,yo(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function si(e,t){return U(t)?tt(e,t,1):tt(e,1)}function pg(e){return oe((t,n)=>{let r=!1;t.subscribe(se(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function nt(e){return e<=0?()=>Be:oe((t,n)=>{let r=0;t.subscribe(se(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function gg(e=yE){return oe((t,n)=>{let r=!1;t.subscribe(se(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function yE(){return new ar}function _o(e){return oe((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function dn(e,t){let n=arguments.length>=2;return r=>r.pipe(e?st((i,o)=>e(i,o,r)):Nt,nt(1),n?pg(t):gg(()=>new ar))}function Pa(e){return e<=0?()=>Be:oe((t,n)=>{let r=[];t.subscribe(se(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xu(...e){let t=An(e);return oe((n,r)=>{(t?oi(e,n,t):oi(e,n)).subscribe(r)})}function Ze(e,t){return oe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(se(r,c=>{i?.unsubscribe();let l=0,u=o++;Ce(e(c,u)).subscribe(i=se(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function bo(e){return oe((t,n)=>{Ce(e).subscribe(se(n,()=>n.complete(),nr)),!n.closed&&t.subscribe(n)})}function Yt(e,t,n){let r=U(e)||t||n?{next:e,error:t,complete:n}:e;return r?oe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(se(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var ed;function Fa(){return ed}function Zt(e){let t=ed;return ed=e,t}var mg=Symbol("NotFound");function ai(e){return e===mg||e?.name==="\u0275NotFound"}var Ba="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",I=class extends Error{code;constructor(t,n){super(pn(t,n)),this.code=t}};function wE(e){return`NG0${Math.abs(e)}`}function pn(e,t){return`${wE(e)}${t?": "+t:""}`}var So=globalThis;function ae(e){for(let t in e)if(e[t]===ae)return t;throw Error("")}function wg(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function hn(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(hn).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function $a(e,t){return e?t?`${e} ${t}`:e:t||""}var EE=ae({__forward_ref__:ae});function Ot(e){return e.__forward_ref__=Ot,e.toString=function(){return hn(this())},e}function $e(e){return gd(e)?e():e}function gd(e){return typeof e=="function"&&e.hasOwnProperty(EE)&&e.__forward_ref__===Ot}function M(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function gt(e){return{providers:e.providers||[],imports:e.imports||[]}}function To(e){return CE(e,Ha)}function md(e){return To(e)!==null}function CE(e,t){return e.hasOwnProperty(t)&&e[t]||null}function DE(e){let t=e?.[Ha]??null;return t||null}function nd(e){return e&&e.hasOwnProperty(ja)?e[ja]:null}var Ha=ae({\u0275prov:ae}),ja=ae({\u0275inj:ae}),A=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=M({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function vd(e){return e&&!!e.\u0275providers}var yd=ae({\u0275cmp:ae}),_d=ae({\u0275dir:ae}),bd=ae({\u0275pipe:ae}),wd=ae({\u0275mod:ae}),Eo=ae({\u0275fac:ae}),hr=ae({__NG_ELEMENT_ID__:ae}),vg=ae({__NG_ENV_ID__:ae});function Ed(e){return qa(e,"@NgModule"),e[wd]||null}function Nn(e){return qa(e,"@Component"),e[yd]||null}function Cd(e){return qa(e,"@Directive"),e[_d]||null}function Eg(e){return qa(e,"@Pipe"),e[bd]||null}function qa(e,t){if(e==null)throw new I(-919,!1)}function gn(e){return typeof e=="string"?e:e==null?"":String(e)}var Cg=ae({ngErrorCode:ae}),IE=ae({ngErrorMessage:ae}),SE=ae({ngTokenPath:ae});function Dd(e,t){return Dg("",-200,t)}function za(e,t){throw new I(-201,!1)}function Dg(e,t,n){let r=new I(t,e);return r[Cg]=t,r[IE]=e,n&&(r[SE]=n),r}function TE(e){return e[Cg]}var rd;function Ig(){return rd}function ct(e){let t=rd;return rd=e,t}function Id(e,t,n){let r=To(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;za(e,"")}var ME={},cr=ME,AE="__NG_DI_FLAG__",id=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=lr(n)||0;try{return this.injector.get(t,r&8?null:cr,r)}catch(i){if(ai(i))return i;throw i}}};function xE(e,t=0){let n=Fa();if(n===void 0)throw new I(-203,!1);if(n===null)return Id(e,void 0,t);{let r=RE(t),i=n.retrieve(e,r);if(ai(i)){if(r.optional)return null;throw i}return i}}function N(e,t=0){return(Ig()||xE)($e(e),t)}function b(e,t){return N(e,lr(t))}function lr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function RE(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function od(e){let t=[];for(let n=0;n<e.length;n++){let r=$e(e[n]);if(Array.isArray(r)){if(r.length===0)throw new I(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=NE(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(N(i,o))}else t.push(N(r))}return t}function NE(e){return e[AE]}function ur(e,t){let n=e.hasOwnProperty(Eo);return n?e[Eo]:null}function Ga(e,t){e.forEach(n=>Array.isArray(n)?Ga(n,t):t(n))}function Sd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Mo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Sg(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Wa(e,t,n){let r=li(e,t);return r>=0?e[r|1]=n:(r=~r,Sg(e,r,t,n)),r}function Ka(e,t){let n=li(e,t);if(n>=0)return e[n|1]}function li(e,t){return OE(e,t,1)}function OE(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var On={},rt=[],pr=new A(""),Td=new A("",-1),Md=new A(""),Co=class{get(t,n=cr){if(n===cr){let i=Dg("",-201);throw i.name="\u0275NotFound",i}return n}};function kt(e){return{\u0275providers:e}}function Tg(e){return kt([{provide:pr,multi:!0,useValue:e}])}function Mg(...e){return{\u0275providers:Ad(!0,e),\u0275fromNgModule:!0}}function Ad(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ga(t,s=>{let a=s;Va(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ag(i,o),n}function Ag(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];xd(i,o=>{t(o,r)})}}function Va(e,t,n,r){if(e=$e(e),!e)return!1;let i=null,o=nd(e),s=!o&&Nn(e);if(!o&&!s){let c=e.ngModule;if(o=nd(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Va(l,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;Ga(o.imports,u=>{Va(u,t,n,r)&&(l||=[],l.push(u))}),l!==void 0&&Ag(l,t)}if(!a){let l=ur(i)||(()=>new i);t({provide:i,useFactory:l,deps:rt},i),t({provide:Md,useValue:i,multi:!0},i),t({provide:pr,useValue:()=>N(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=e;xd(c,u=>{t(u,l)})}}else return!1;return i!==e&&e.providers!==void 0}function xd(e,t){for(let n of e)vd(n)&&(n=n.\u0275providers),Array.isArray(n)?xd(n,t):t(n)}var kE=ae({provide:String,useValue:ae});function xg(e){return e!==null&&typeof e=="object"&&kE in e}function PE(e){return!!(e&&e.useExisting)}function FE(e){return!!(e&&e.useFactory)}function dr(e){return typeof e=="function"}function Rg(e){return!!e.useClass}var Ao=new A(""),La={},yg={},td;function xo(){return td===void 0&&(td=new Co),td}var he=class{},fr=class extends he{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,ad(t,s=>this.processProvider(s)),this.records.set(Td,ci(void 0,this)),i.has("environment")&&this.records.set(he,ci(void 0,this));let o=this.records.get(Ao);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Md,rt,{self:!0}))}retrieve(t,n){let r=lr(n)||0;try{return this.get(t,cr,r)}catch(i){if(ai(i))return i;throw i}}destroy(){wo(this),this._destroyed=!0;let t=k(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),k(t)}}onDestroy(t){return wo(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){wo(this);let n=Zt(this),r=ct(void 0),i;try{return t()}finally{Zt(n),ct(r)}}get(t,n=cr,r){if(wo(this),t.hasOwnProperty(vg))return t[vg](this);let i=lr(r),o,s=Zt(this),a=ct(void 0);try{if(!(i&4)){let l=this.records.get(t);if(l===void 0){let u=BE(t)&&To(t);u&&this.injectableDefInScope(u)?l=ci(sd(t),La):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l,i)}let c=i&2?xo():this.parent;return n=i&8&&n===cr?null:n,c.get(t,n)}catch(c){let l=TE(c);throw l===-200||l===-201?new I(l,null):c}finally{ct(a),Zt(s)}}resolveInjectorInitializers(){let t=k(null),n=Zt(this),r=ct(void 0),i;try{let o=this.get(pr,rt,{self:!0});for(let s of o)s()}finally{Zt(n),ct(r),k(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(hn(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=$e(t);let n=dr(t)?t:$e(t&&t.provide),r=jE(t);if(!dr(t)&&t.multi===!0){let i=this.records.get(n);i||(i=ci(void 0,La,!0),i.factory=()=>od(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=k(null);try{if(n.value===yg)throw Dd(hn(t));return n.value===La&&(n.value=yg,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&UE(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{k(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=$e(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sd(e){let t=To(e),n=t!==null?t.factory:ur(e);if(n!==null)return n;if(e instanceof A)throw new I(204,!1);if(e instanceof Function)return LE(e);throw new I(204,!1)}function LE(e){if(e.length>0)throw new I(204,!1);let n=DE(e);return n!==null?()=>n.factory(e):()=>new e}function jE(e){if(xg(e))return ci(void 0,e.useValue);{let t=Rd(e);return ci(t,La)}}function Rd(e,t,n){let r;if(dr(e)){let i=$e(e);return ur(i)||sd(i)}else if(xg(e))r=()=>$e(e.useValue);else if(FE(e))r=()=>e.useFactory(...od(e.deps||[]));else if(PE(e))r=(i,o)=>N($e(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=$e(e&&(e.useClass||e.provide));if(VE(e))r=()=>new i(...od(e.deps));else return ur(i)||sd(i)}return r}function wo(e){if(e.destroyed)throw new I(205,!1)}function ci(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function VE(e){return!!e.deps}function UE(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function BE(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function ad(e,t){for(let n of e)Array.isArray(n)?ad(n,t):n&&vd(n)?ad(n.\u0275providers,t):t(n)}function Oe(e,t){let n;e instanceof fr?(wo(e),n=e):n=new id(e);let r,i=Zt(n),o=ct(void 0);try{return t()}finally{Zt(i),ct(o)}}function Ng(){return Ig()!==void 0||Fa()!=null}var Pt=0,L=1,j=2,Ne=3,mt=4,vt=5,ui=6,di=7,be=8,mn=9,Qt=10,le=11,fi=12,Nd=13,gr=14,lt=15,mr=16,vr=17,yr=18,vn=19,Od=20,fn=21,Ya=22,Ro=23,ut=24,_r=25,br=26,ke=27,Og=1,kd=6,kn=7,No=8,Oo=9,we=10;function Xt(e){return Array.isArray(e)&&typeof e[Og]=="object"}function Ft(e){return Array.isArray(e)&&e[Og]===!0}function Pd(e){return(e.flags&4)!==0}function Pn(e){return e.componentOffset>-1}function ko(e){return(e.flags&1)===1}function en(e){return!!e.template}function hi(e){return(e[j]&512)!==0}function wr(e){return(e[j]&256)===256}var kg="svg",Pg="math";function yt(e){for(;Array.isArray(e);)e=e[Pt];return e}function Fd(e,t){return yt(t[e])}function Lt(e,t){return yt(t[e.index])}function Po(e,t){return e.data[t]}function _t(e,t){let n=t[e];return Xt(n)?n:n[Pt]}function Za(e){return(e[j]&128)===128}function Fg(e){return Ft(e[Ne])}function bt(e,t){return t==null?null:e[t]}function Ld(e){e[vr]=0}function jd(e){e[j]&1024||(e[j]|=1024,Za(e)&&pi(e))}function Lg(e,t){for(;e>0;)t=t[gr],e--;return t}function Fo(e){return!!(e[j]&9216||e[ut]?.dirty)}function Ja(e){e[Qt].changeDetectionScheduler?.notify(8),e[j]&64&&(e[j]|=1024),Fo(e)&&pi(e)}function pi(e){e[Qt].changeDetectionScheduler?.notify(0);let t=xn(e);for(;t!==null&&!(t[j]&8192||(t[j]|=8192,!Za(t)));)t=xn(t)}function Vd(e,t){if(wr(e))throw new I(911,!1);e[fn]===null&&(e[fn]=[]),e[fn].push(t)}function jg(e,t){if(e[fn]===null)return;let n=e[fn].indexOf(t);n!==-1&&e[fn].splice(n,1)}function xn(e){let t=e[Ne];return Ft(t)?t[Ne]:t}function Vg(e){return e[di]??=[]}function Ug(e){return e.cleanup??=[]}var W={lFrame:Qg(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cd=!1;function Bg(){return W.lFrame.elementDepthCount}function $g(){W.lFrame.elementDepthCount++}function Ud(){W.lFrame.elementDepthCount--}function Bd(){return W.bindingsEnabled}function Hg(){return W.skipHydrationRootTNode!==null}function $d(e){return W.skipHydrationRootTNode===e}function Hd(){W.skipHydrationRootTNode=null}function z(){return W.lFrame.lView}function Pe(){return W.lFrame.tView}function $(e){return W.lFrame.contextLView=e,e[be]}function H(e){return W.lFrame.contextLView=null,e}function qe(){let e=qd();for(;e!==null&&e.type===64;)e=e.parent;return e}function qd(){return W.lFrame.currentTNode}function qg(){let e=W.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function gi(e,t){let n=W.lFrame;n.currentTNode=e,n.isParent=t}function zd(){return W.lFrame.isParent}function zg(){W.lFrame.isParent=!1}function Gd(){return cd}function Wd(e){let t=cd;return cd=e,t}function Kd(){let e=W.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Yd(){return W.lFrame.bindingIndex}function Gg(e){return W.lFrame.bindingIndex=e}function Er(){return W.lFrame.bindingIndex++}function Lo(e){let t=W.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Wg(){return W.lFrame.inI18n}function Kg(e,t){let n=W.lFrame;n.bindingIndex=n.bindingRootIndex=e,Qa(t)}function Yg(){return W.lFrame.currentDirectiveIndex}function Qa(e){W.lFrame.currentDirectiveIndex=e}function Zg(e){let t=W.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Zd(e){W.lFrame.currentQueryIndex=e}function $E(e){let t=e[L];return t.type===2?t.declTNode:t.type===1?e[vt]:null}function Jd(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=$E(o),i===null||(o=o[gr],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=W.lFrame=Jg();return r.currentTNode=t,r.lView=e,!0}function Xa(e){let t=Jg(),n=e[L];W.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Jg(){let e=W.lFrame,t=e===null?null:e.child;return t===null?Qg(e):t}function Qg(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Xg(){let e=W.lFrame;return W.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Qd=Xg;function ec(){let e=Xg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function em(e){return(W.lFrame.contextLView=Lg(e,W.lFrame.contextLView))[be]}function jt(){return W.lFrame.selectedIndex}function Fn(e){W.lFrame.selectedIndex=e}function tc(){let e=W.lFrame;return Po(e.tView,e.selectedIndex)}function tm(){return W.lFrame.currentNamespace}var nm=!0;function nc(){return nm}function rc(e){nm=e}function ld(e,t=null,n=null,r){let i=Xd(e,t,n,r);return i.resolveInjectorInitializers(),i}function Xd(e,t=null,n=null,r,i=new Set){let o=[n||rt,Mg(e)];return r=r||(typeof e=="object"?void 0:hn(e)),new fr(o,t||xo(),r||null,i)}var at=class e{static THROW_IF_NOT_FOUND=cr;static NULL=new Co;static create(t,n){if(Array.isArray(t))return ld({name:""},n,t,"");{let r=t.name??"";return ld({name:r},t.parent,t.providers,r)}}static \u0275prov=M({token:e,providedIn:"any",factory:()=>N(Td)});static __NG_ELEMENT_ID__=-1},Ee=new A(""),wt=(()=>{class e{static __NG_ELEMENT_ID__=HE;static __NG_ENV_ID__=n=>n}return e})(),ud=class extends wt{_lView;constructor(t){super(),this._lView=t}get destroyed(){return wr(this._lView)}onDestroy(t){let n=this._lView;return Vd(n,t),()=>jg(n,t)}};function HE(){return new ud(z())}var rm=!1,im=new A(""),yn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ue(!1);debugTaskTracker=b(im,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new q(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),dd=class extends fe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Ng()&&(this.destroyRef=b(wt,{optional:!0})??void 0,this.pendingTasks=b(yn,{optional:!0})??void 0)}emit(t){let n=k(null);try{super.next(t)}finally{k(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof Ve&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},De=dd;function Ua(...e){}function ef(e){let t,n;function r(){e=Ua;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function om(e){return queueMicrotask(()=>e()),()=>{e=Ua}}var tf="isAngularZone",Do=tf+"_ID",qE=0,He=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new De(!1);onMicrotaskEmpty=new De(!1);onStable=new De(!1);onError=new De(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=rm}=t;if(typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,WE(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(tf)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new I(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,zE,Ua,Ua);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},zE={};function nf(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function GE(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){ef(()=>{e.callbackScheduled=!1,fd(e),e.isCheckStableRunning=!0,nf(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),fd(e)}function WE(e){let t=()=>{GE(e)},n=qE++;e._inner=e._inner.fork({name:"angular",properties:{[tf]:!0,[Do]:n,[Do+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(KE(c))return r.invokeTask(o,s,a,c);try{return _g(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),bg(e)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return _g(e),r.invoke(o,s,a,c,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!YE(c)&&t(),bg(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,fd(e),nf(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function fd(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function _g(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function bg(e){e._nesting--,nf(e)}var Io=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new De;onMicrotaskEmpty=new De;onStable=new De;onError=new De;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function KE(e){return sm(e,"__ignore_ng_zone__")}function YE(e){return sm(e,"__scheduler_tick__")}function sm(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Jt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},dt=new A("",{factory:()=>{let e=b(He),t=b(he),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(Jt),n.handleError(r))})}}}),am={provide:pr,useValue:()=>{let e=b(Jt,{optional:!0})},multi:!0},ZE=new A("",{factory:()=>{let e=b(Ee).defaultView;if(!e)return;let t=b(dt),n=o=>{t(o.reason),o.preventDefault()},r=o=>{o.error?t(o.error):t(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),b(wt).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function rf(){return kt([Tg(()=>{b(ZE)})])}function B(e,t){let[n,r,i]=Uu(e,t?.equal),o=n,s=o[et];return o.set=r,o.update=i,o.asReadonly=cm.bind(o),o}function cm(){let e=this[et];if(e.readonlyFn===void 0){let t=()=>this();t[et]=e,e.readonlyFn=t}return e.readonlyFn}var ic=(()=>{class e{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=JE}return e})();function JE(){return new ic(z(),qe())}var Rn=class{},jo=new A("",{factory:()=>!0});var of=new A(""),oc=(()=>{class e{internalPendingTasks=b(yn);scheduler=b(Rn);errorHandler=b(dt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),sf=(()=>{class e{static \u0275prov=M({token:e,providedIn:"root",factory:()=>new hd})}return e})(),hd=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},pd=class{[et];constructor(t){this[et]=t}destroy(){this[et].destroy()}};function Ie(e){return Bu(e)}function Go(e){return{toString:e}.toString()}function s0(e){return typeof e=="function"}function Lm(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var fc=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},_n=(()=>{let e=()=>jm;return e.ngInherit=!0,e})();function jm(e){return e.type.prototype.ngOnChanges&&(e.setInput=c0),a0}function a0(){let e=Um(this),t=e?.current;if(t){let n=e.previous;if(n===On)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function c0(e,t,n,r,i){let o=this.declaredInputs[r],s=Um(e)||l0(e,{previous:On,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new fc(l&&l.currentValue,n,c===On),Lm(e,t,i,n)}var Vm="__ngSimpleChanges__";function Um(e){return e[Vm]||null}function l0(e,t){return e[Vm]=t}var lm=[];var ce=function(e,t=null,n){for(let r=0;r<lm.length;r++){let i=lm[r];i(e,t,n)}},ee=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(ee||{});function u0(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=jm(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Bm(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function cc(e,t,n){$m(e,t,3,n)}function lc(e,t,n,r){(e[j]&3)===n&&$m(e,t,n,r)}function af(e,t){let n=e[j];(n&3)===t&&(n&=16383,n+=1,e[j]=n)}function $m(e,t,n,r){let i=r!==void 0?e[vr]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[vr]+=65536),(a<o||o==-1)&&(d0(e,n,t,c),e[vr]=(e[vr]&4294901760)+c+2),c++}function um(e,t){ce(ee.LifecycleHookStart,e,t);let n=k(null);try{t.call(e)}finally{k(n),ce(ee.LifecycleHookEnd,e,t)}}function d0(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[j]>>14<e[vr]>>16&&(e[j]&3)===t&&(e[j]+=16384,um(a,o)):um(a,o)}var vi=-1,Dr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function f0(e){return(e.flags&8)!==0}function h0(e){return(e.flags&16)!==0}function p0(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];g0(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Hm(e){return e===3||e===4||e===6}function g0(e){return e.charCodeAt(0)===64}function yi(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?dm(e,n,i,null,t[++r]):dm(e,n,i,null,null))}}return e}function dm(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function qm(e){return e!==vi}function hc(e){return e&32767}function m0(e){return e>>16}function pc(e,t){let n=m0(e),r=t;for(;n>0;)r=r[gr],n--;return r}var vf=!0;function fm(e){let t=vf;return vf=e,t}var v0=256,zm=v0-1,Gm=5,y0=0,tn={};function _0(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(hr)&&(r=n[hr]),r==null&&(r=n[hr]=y0++);let i=r&zm,o=1<<i;t.data[e+(i>>Gm)]|=o}function gc(e,t){let n=Wm(e,t);if(n!==-1)return n;let r=t[L];r.firstCreatePass&&(e.injectorIndex=t.length,cf(r.data,e),cf(t,null),cf(r.blueprint,null));let i=Vf(e,t),o=e.injectorIndex;if(qm(i)){let s=hc(i),a=pc(i,t),c=a[L].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function cf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Wm(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Vf(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Qm(i),r===null)return vi;if(n++,i=i[gr],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return vi}function yf(e,t,n){_0(e,t,n)}function b0(e,t){if(t==="class")return e.classes;if(t==="style")return e.styles;let n=e.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(Hm(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===t)return n[i+1];i=i+2}}}return null}function Km(e,t,n){if(n&8||e!==void 0)return e;za(t,"NodeInjector")}function Ym(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[mn],o=ct(void 0);try{return i?i.get(t,r,n&8):Id(t,r,n&8)}finally{ct(o)}}return Km(r,t,n)}function Zm(e,t,n,r=0,i){if(e!==null){if(t[j]&2048&&!(r&2)){let s=I0(e,t,n,r,tn);if(s!==tn)return s}let o=Jm(e,t,n,r,tn);if(o!==tn)return o}return Ym(t,n,r,i)}function Jm(e,t,n,r,i){let o=C0(n);if(typeof o=="function"){if(!Jd(t,e,r))return r&1?Km(i,n,r):Ym(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))za(n);else return s}finally{Qd()}}else if(typeof o=="number"){let s=null,a=Wm(e,t),c=vi,l=r&1?t[lt][vt]:null;for((a===-1||r&4)&&(c=a===-1?Vf(e,t):t[a+8],c===vi||!pm(r,!1)?a=-1:(s=t[L],a=hc(c),t=pc(c,t)));a!==-1;){let u=t[L];if(hm(o,a,u.data)){let d=w0(a,t,n,s,r,l);if(d!==tn)return d}c=t[a+8],c!==vi&&pm(r,t[L].data[a+8]===l)&&hm(o,a,t)?(s=u,a=hc(c),t=pc(c,t)):a=-1}}return i}function w0(e,t,n,r,i,o){let s=t[L],a=s.data[e+8],c=r==null?Pn(a)&&vf:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=E0(a,s,n,c,l);return u!==null?mc(t,s,u,a,i):tn}function E0(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,l=e.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=s[c];if(f&&en(f)&&f.type===n)return c}return null}function mc(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Dr){let a=o;if(a.resolving)throw Dd("");let c=fm(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?ct(a.injectImpl):null,h=Jd(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&u0(n,s[n],t)}finally{d!==null&&ct(d),fm(c),a.resolving=!1,Qd()}}return o}function C0(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(hr)?e[hr]:void 0;return typeof t=="number"?t>=0?t&zm:D0:t}function hm(e,t,n){let r=1<<e;return!!(n[t+(e>>Gm)]&r)}function pm(e,t){return!(e&2)&&!(e&1&&t)}var Cr=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Zm(this._tNode,this._lView,t,lr(r),n)}};function D0(){return new Cr(qe(),z())}function bn(e){return Go(()=>{let t=e.prototype.constructor,n=t[Eo]||_f(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Eo]||_f(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _f(e){return gd(e)?()=>{let t=_f($e(e));return t&&t()}:ur(e)}function I0(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[j]&2048&&!hi(s);){let a=Jm(o,s,n,r|2,tn);if(a!==tn)return a;let c=o.parent;if(!c){let l=s[Od];if(l){let u=l.get(n,tn,r);if(u!==tn)return u}c=Qm(s),s=s[gr]}o=c}return i}function Qm(e){let t=e[L],n=t.type;return n===2?t.declTNode:n===1?e[vt]:null}function Wo(e){return b0(qe(),e)}function S0(){return xc(qe(),z())}function xc(e,t){return new rn(Lt(e,t))}var rn=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=S0}return e})();function Xm(e){return(e.flags&128)===128}var Uf=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Uf||{}),ev=new Map,T0=0;function M0(){return T0++}function A0(e){ev.set(e[vn],e)}function bf(e){ev.delete(e[vn])}var gm="__ngContext__";function _i(e,t){Xt(t)?(e[gm]=t[vn],A0(t)):e[gm]=t}function tv(e){return rv(e[fi])}function nv(e){return rv(e[mt])}function rv(e){for(;e!==null&&!Ft(e);)e=e[mt];return e}var x0;function Bf(e){x0=e}var Rc=new A("",{factory:()=>R0}),R0="ng";var Nc=new A(""),Ko=new A("",{providedIn:"platform",factory:()=>"unknown"});var Oc=new A("",{factory:()=>b(Ee).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var iv="r";var ov="di";var sv=!1,av=new A("",{factory:()=>sv});var N0=(e,t,n,r)=>{};function O0(e,t,n,r){N0(e,t,n,r)}function $f(e){return(e.flags&32)===32}var k0=()=>null;function cv(e,t,n=!1){return k0(e,t,n)}function lv(e,t){let n=e.contentQueries;if(n!==null){let r=k(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Zd(o),a.contentQueries(2,t[s],s)}}}finally{k(r)}}}function wf(e,t,n){Zd(0);let r=k(null);try{t(e,n)}finally{k(r)}}function uv(e,t,n){if(Pd(t)){let r=k(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{k(r)}}}var Bt=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(Bt||{});var sc;function P0(){if(sc===void 0&&(sc=null,So.trustedTypes))try{sc=So.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return sc}function mm(e){return P0()?.createScriptURL(e)||e}var vc=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ba})`}};function Yo(e){return e instanceof vc?e.changingThisBreaksApplicationSecurity:e}function Hf(e,t){let n=dv(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Ba})`)}return n===t}function dv(e){return e instanceof vc&&e.getTypeName()||null}var F0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fv(e){return e=String(e),e.match(F0)?e:"unsafe:"+e}function L0(e,t){return e.createText(t)}function j0(e,t,n){e.setValue(t,n)}function hv(e,t,n){return e.createElement(t,n)}function yc(e,t,n,r,i){e.insertBefore(t,n,r,i)}function pv(e,t,n){e.appendChild(t,n)}function vm(e,t,n,r,i){r!==null?yc(e,t,n,r,i):pv(e,t,n)}function gv(e,t,n,r){e.removeChild(null,t,n,r)}function V0(e,t,n){e.setAttribute(t,"style",n)}function U0(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function mv(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&p0(e,t,r),i!==null&&U0(e,t,i),o!==null&&V0(e,t,o)}var kc=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(kc||{});function Pc(e){let t=yv();return t?t.sanitize(kc.URL,e)||"":Hf(e,"URL")?Yo(e):fv(gn(e))}function vv(e){let t=yv();if(t)return mm(t.sanitize(kc.RESOURCE_URL,e)||"");if(Hf(e,"ResourceURL"))return mm(Yo(e));throw new I(904,!1)}var B0=new Set(["embed","frame","iframe","media","script"]),$0=new Set(["base","link","script"]);function H0(e,t){return t==="src"&&B0.has(e)||t==="href"&&$0.has(e)||t==="xlink:href"&&e==="script"?vv:Pc}function qf(e,t,n){return H0(t,n)(e)}function yv(){let e=z();return e&&e[Qt].sanitizer}function _v(e){return e instanceof Function?e():e}function q0(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var bv="ng-template";function z0(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&q0(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(zf(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function zf(e){return e.type===4&&e.value!==bv}function G0(e,t,n){let r=e.type===4&&!n?bv:e.value;return t===r}function W0(e,t,n){let r=4,i=e.attrs,o=i!==null?Z0(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Vt(r)&&!Vt(c))return!1;if(s&&Vt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!G0(e,c,n)||c===""&&t.length===1){if(Vt(r))return!1;s=!0}}else if(r&8){if(i===null||!z0(e,i,c,n)){if(Vt(r))return!1;s=!0}}else{let l=t[++a],u=K0(c,i,zf(e),n);if(u===-1){if(Vt(r))return!1;s=!0;continue}if(l!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(Vt(r))return!1;s=!0}}}}return Vt(r)||s}function Vt(e){return(e&1)===0}function K0(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return J0(t,e)}function Y0(e,t,n=!1){for(let r=0;r<t.length;r++)if(W0(e,t[r],n))return!0;return!1}function Z0(e){for(let t=0;t<e.length;t++){let n=e[t];if(Hm(n))return t}return e.length}function J0(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function ym(e,t){return e?":not("+t.trim()+")":t}function Q0(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Vt(s)&&(t+=ym(o,i),i=""),r=s,o=o||!Vt(r);n++}return i!==""&&(t+=ym(o,i)),t}function X0(e){return e.map(Q0).join(",")}function eC(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!Vt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var ze={};function Gf(e,t,n,r,i,o,s,a,c,l,u){let d=ke+r,h=d+i,f=tC(d,h),p=typeof l=="function"?l():l;return f[L]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function tC(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:ze);return n}function nC(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Gf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Wf(e,t,n,r,i,o,s,a,c,l,u){let d=t.blueprint.slice();return d[Pt]=i,d[j]=r|4|128|8|64|1024,(l!==null||e&&e[j]&2048)&&(d[j]|=2048),Ld(d),d[Ne]=d[gr]=e,d[be]=n,d[Qt]=s||e&&e[Qt],d[le]=a||e&&e[le],d[mn]=c||e&&e[mn]||null,d[vt]=o,d[vn]=M0(),d[ui]=u,d[Od]=l,d[lt]=t.type==2?e[lt]:d,d}function rC(e,t,n){let r=Lt(t,e),i=nC(n),o=e[Qt].rendererFactory,s=Kf(e,Wf(e,i,null,wv(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function wv(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Ev(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Kf(e,t){return e[fi]?e[Nd][mt]=t:e[fi]=t,e[Nd]=t,t}function E(e=1){Cv(Pe(),z(),jt()+e,!1)}function Cv(e,t,n,r){if(!r)if((t[j]&3)===3){let o=e.preOrderCheckHooks;o!==null&&cc(t,o,n)}else{let o=e.preOrderHooks;o!==null&&lc(t,o,0,n)}Fn(n)}var Fc=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Fc||{});function Ef(e,t,n,r){let i=k(null);try{let[o,s,a]=e.inputs[n],c=null;(s&Fc.SignalBased)!==0&&(c=t[o][et]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):Lm(t,c,o,r)}finally{k(i)}}var nn=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(nn||{}),iC;function Yf(e,t){return iC(e,t)}var Ir=new Set,Lc=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Lc||{}),wn=new A(""),_m=new Set;function jn(e){_m.has(e)||(_m.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Zf=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),Dv=[0,1,2,3],Iv=(()=>{class e{ngZone=b(He);scheduler=b(Rn);errorHandler=b(Jt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){b(wn,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ce(ee.AfterRenderHooksStart),this.executing=!0;for(let r of Dv)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ce(ee.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[_r]??=[]).push(n),pi(r),r[j]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Lc.AFTER_NEXT_RENDER,n):n()}static \u0275prov=M({token:e,providedIn:"root",factory:()=>new e})}return e})(),_c=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,n,r,i,o,s=null){this.impl=t,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[_r];t&&(this.view[_r]=t.filter(n=>n!==this))}};function Zo(e,t){let n=t?.injector??b(at);return jn("NgAfterNextRender"),sC(e,n,t,!0)}function oC(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}function sC(e,t,n,r){let i=t.get(Zf);i.impl??=t.get(Iv);let o=t.get(wn,null,{optional:!0}),s=n?.manualCleanup!==!0?t.get(wt):null,a=t.get(ic,null,{optional:!0}),c=new _c(i.impl,oC(e),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var Sv=new A("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:b(he)})});function Tv(e,t,n){let r=e.get(Sv);if(Array.isArray(t))for(let i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function aC(e,t){let n=e.get(Sv);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function cC(e,t){for(let[n,r]of t)Tv(e,r.animateFns)}function bm(e,t,n,r){let i=e?.[br]?.enter;t!==null&&i&&i.has(n.index)&&cC(r,i)}function mi(e,t,n,r,i,o,s,a){if(i!=null){let c,l=!1;Ft(i)?c=i:Xt(i)&&(l=!0,i=i[Pt]);let u=yt(i);e===0&&r!==null?(bm(a,r,o,n),s==null?pv(t,r,u):yc(t,r,u,s||null,!0)):e===1&&r!==null?(bm(a,r,o,n),yc(t,r,u,s||null,!0)):e===2?wm(a,o,n,d=>{gv(t,u,l,d)}):e===3&&wm(a,o,n,()=>{t.destroyNode(u)}),c!=null&&wC(t,e,n,c,o,r,s)}}function lC(e,t){Mv(e,t),t[Pt]=null,t[vt]=null}function uC(e,t,n,r,i,o){r[Pt]=i,r[vt]=t,Vc(e,r,n,1,i,o)}function Mv(e,t){t[Qt].changeDetectionScheduler?.notify(9),Vc(e,t,t[le],2,null,null)}function dC(e){let t=e[fi];if(!t)return lf(e[L],e);for(;t;){let n=null;if(Xt(t))n=t[fi];else{let r=t[we];r&&(n=r)}if(!n){for(;t&&!t[mt]&&t!==e;)Xt(t)&&lf(t[L],t),t=t[Ne];t===null&&(t=e),Xt(t)&&lf(t[L],t),n=t&&t[mt]}t=n}}function Jf(e,t){let n=e[Oo],r=n.indexOf(t);n.splice(r,1)}function jc(e,t){if(wr(t))return;let n=t[le];n.destroyNode&&Vc(e,t,n,3,null,null),dC(t)}function lf(e,t){if(wr(t))return;let n=k(null);try{t[j]&=-129,t[j]|=256,t[ut]&&po(t[ut]),pC(e,t),hC(e,t),t[L].type===1&&t[le].destroy();let r=t[mr];if(r!==null&&Ft(t[Ne])){r!==t[Ne]&&Jf(r,t);let i=t[yr];i!==null&&i.detachView(e)}bf(t)}finally{k(n)}}function wm(e,t,n,r){let i=e?.[br];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);e&&Ir.add(e[vn]),Tv(n,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:u}=l();a.push(u)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),fC(e,r)}else e&&Ir.delete(e[vn]),r(!1)},i)}function fC(e,t){let n=e[br]?.running;if(n){n.then(()=>{e[br].running=void 0,Ir.delete(e[vn]),t(!0)});return}t(!1)}function hC(e,t){let n=e.cleanup,r=t[di];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[di]=null);let i=t[fn];if(i!==null){t[fn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Ro];if(o!==null){t[Ro]=null;for(let s of o)s.destroy()}}function pC(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Dr)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ce(ee.LifecycleHookStart,a,c);try{c.call(a)}finally{ce(ee.LifecycleHookEnd,a,c)}}else{ce(ee.LifecycleHookStart,i,o);try{o.call(i)}finally{ce(ee.LifecycleHookEnd,i,o)}}}}}function gC(e,t,n){return mC(e,t.parent,n)}function mC(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[Pt];if(Pn(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Bt.None||i===Bt.Emulated)return null}return Lt(r,n)}function vC(e,t,n){return _C(e,t,n)}function yC(e,t,n){return e.type&40?Lt(e,n):null}var _C=yC,Em;function Qf(e,t,n,r){let i=gC(e,r,t),o=t[le],s=r.parent||t[vt],a=vC(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)vm(o,i,n[c],a,!1);else vm(o,i,n,a,!1);Em!==void 0&&Em(o,r,t,n,i)}function Vo(e,t){if(t!==null){let n=t.type;if(n&3)return Lt(t,e);if(n&4)return Cf(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Vo(e,r);{let i=e[t.index];return Ft(i)?Cf(-1,i):yt(i)}}else{if(n&128)return Vo(e,t.next);if(n&32)return Yf(t,e)()||yt(e[t.index]);{let r=Av(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=xn(e[lt]);return Vo(i,r)}else return Vo(e,t.next)}}}return null}function Av(e,t){if(t!==null){let r=e[lt][vt],i=t.projection;return r.projection[i]}return null}function Cf(e,t){let n=we+e+1;if(n<t.length){let r=t[n],i=r[L].firstChild;if(i!==null)return Vo(r,i)}return t[kn]}function Xf(e,t,n,r,i,o,s){for(;n!=null;){let a=r[mn];if(n.type===128){n=n.next;continue}let c=r[n.index],l=n.type;if(s&&t===0&&(c&&_i(yt(c),r),n.flags|=2),!$f(n))if(l&8)Xf(e,t,n.child,r,i,o,!1),mi(t,e,a,i,c,n,o,r);else if(l&32){let u=Yf(n,r),d;for(;d=u();)mi(t,e,a,i,d,n,o,r);mi(t,e,a,i,c,n,o,r)}else l&16?bC(e,t,r,n,i,o):mi(t,e,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Vc(e,t,n,r,i,o){Xf(n,r,e.firstChild,t,i,o,!1)}function bC(e,t,n,r,i,o){let s=n[lt],c=s[vt].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];mi(t,e,n[mn],i,u,r,o,n)}else{let l=c,u=s[Ne];Xm(r)&&(l.flags|=128),Xf(e,t,l,u,i,o,!0)}}function wC(e,t,n,r,i,o,s){let a=r[kn],c=yt(r);a!==c&&mi(t,e,n,o,a,i,s);for(let l=we;l<r.length;l++){let u=r[l];Vc(u[L],u,e,t,o,a)}}function EC(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:nn.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nn.Important),e.setStyle(n,r,i,o))}}function xv(e,t,n,r,i){let o=jt(),s=r&2;try{Fn(-1),s&&t.length>ke&&Cv(e,t,ke,!1);let a=s?ee.TemplateUpdateStart:ee.TemplateCreateStart;ce(a,i,n),n(r,i)}finally{Fn(o);let a=s?ee.TemplateUpdateEnd:ee.TemplateCreateEnd;ce(a,i,n)}}function eh(e,t,n){AC(e,t,n),(n.flags&64)===64&&xC(e,t,n)}function Uc(e,t,n=Lt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function CC(e,t,n,r){let o=r.get(av,sv)||n===Bt.ShadowDom||n===Bt.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,o);return DC(s),s}function DC(e){IC(e)}var IC=()=>null;function SC(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Rv(e,t,n,r,i,o){let s=t[L];if(th(e,s,t,n,r)){Pn(e)&&MC(t,e.index);return}e.type&3&&(n=SC(n)),TC(e,t,n,r,i,o)}function TC(e,t,n,r,i,o){if(e.type&3){let s=Lt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function MC(e,t){let n=_t(t,e);n[j]&16||(n[j]|=64)}function AC(e,t,n){let r=n.directiveStart,i=n.directiveEnd;Pn(n)&&rC(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||gc(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=mc(t,e,s,n);if(_i(c,t),o!==null&&kC(t,s-r,c,a,n,o),en(a)){let l=_t(n.index,t);l[be]=mc(t,e,s,n)}}}function xC(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Yg();try{Fn(o);for(let a=r;a<i;a++){let c=e.data[a],l=t[a];Qa(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&RC(c,l)}}finally{Fn(-1),Qa(s)}}function RC(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Nv(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Y0(t,o.selectors,!1)&&(r??=[],en(o)?r.unshift(o):r.push(o))}return r}function NC(e,t,n,r,i,o){let s=Lt(e,t);OC(t[le],s,o,e.value,n,r,i)}function OC(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?gn(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function kC(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];Ef(r,n,c,l)}}function Ov(e,t,n,r,i){let o=ke+n,s=t[L],a=i(s,t,e,r,n);t[o]=a,gi(e,!0);let c=e.type===2;return c?(mv(t[le],a,e),(Bg()===0||ko(e))&&_i(a,t),$g()):_i(a,t),nc()&&(!c||!$f(e))&&Qf(s,t,a,e),e}function kv(e){let t=e;return zd()?zg():(t=t.parent,gi(t,!1)),t}function PC(e,t){let n=e[mn];if(!n)return;let r;try{r=n.get(dt,null)}catch{r=null}r?.(t)}function th(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=t.data[l];Ef(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=t.data[c];Ef(u,l,r,i),a=!0}return a}function FC(e,t){let n=_t(t,e),r=n[L];LC(r,n);let i=n[Pt];i!==null&&n[ui]===null&&(n[ui]=cv(i,n[mn])),ce(ee.ComponentStart);try{nh(r,n,n[be])}finally{ce(ee.ComponentEnd,n[be])}}function LC(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function nh(e,t,n){Xa(t);try{let r=e.viewQuery;r!==null&&wf(1,r,n);let i=e.template;i!==null&&xv(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[yr]?.finishViewCreation(e),e.staticContentQueries&&lv(e,t),e.staticViewQueries&&wf(2,e.viewQuery,n);let o=e.components;o!==null&&jC(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[j]&=-5,ec()}}function jC(e,t){for(let n=0;n<t.length;n++)FC(e,t[n])}function Bc(e,t,n,r){let i=k(null);try{let o=t.tView,a=e[j]&4096?4096:16,c=Wf(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=e[t.index];c[mr]=l;let u=e[yr];return u!==null&&(c[yr]=u.createEmbeddedView(o)),nh(o,c,n),c}finally{k(i)}}function Bo(e,t){return!t||t.firstChild===null||Xm(e)}function $o(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(yt(o)),Ft(o)&&Pv(o,r);let s=n.type;if(s&8)$o(e,t,n.child,r);else if(s&32){let a=Yf(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=Av(t,n);if(Array.isArray(a))r.push(...a);else{let c=xn(t[lt]);$o(c[L],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Pv(e,t){for(let n=we;n<e.length;n++){let r=e[n],i=r[L].firstChild;i!==null&&$o(r[L],r,i,t)}e[kn]!==e[Pt]&&t.push(e[kn])}function Fv(e){if(e[_r]!==null){for(let t of e[_r])t.impl.addSequence(t);e[_r].length=0}}var Lv=[];function VC(e){return e[ut]??UC(e)}function UC(e){let t=Lv.pop()??Object.create($C);return t.lView=e,t}function BC(e){e.lView[ut]!==e&&(e.lView=null,Lv.push(e))}var $C=Z(D({},uo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{pi(e.lView)},consumerOnSignalRead(){this.lView[ut]=this}});function HC(e){let t=e[ut]??Object.create(qC);return t.lView=e,t}var qC=Z(D({},uo),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=xn(e.lView);for(;t&&!jv(t[L]);)t=xn(t);t&&jd(t)},consumerOnSignalRead(){this.lView[ut]=this}});function jv(e){return e.type!==2}function Vv(e){if(e[Ro]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Ro])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[j]&8192)}}var zC=100;function Uv(e,t=0){let r=e[Qt].rendererFactory,i=!1;i||r.begin?.();try{GC(e,t)}finally{i||r.end?.()}}function GC(e,t){let n=Gd();try{Wd(!0),Df(e,t);let r=0;for(;Fo(e);){if(r===zC)throw new I(103,!1);r++,Df(e,1)}}finally{Wd(n)}}function WC(e,t,n,r){if(wr(t))return;let i=t[j],o=!1,s=!1;Xa(t);let a=!0,c=null,l=null;o||(jv(e)?(l=VC(t),c=ho(l)):aa()===null?(a=!1,l=HC(t),c=ho(l)):t[ut]&&(po(t[ut]),t[ut]=null));try{Ld(t),Gg(e.bindingStartIndex),n!==null&&xv(e,t,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=e.preOrderCheckHooks;f!==null&&cc(t,f,null)}else{let f=e.preOrderHooks;f!==null&&lc(t,f,0,null),af(t,0)}if(s||KC(t),Vv(t),Bv(t,0),e.contentQueries!==null&&lv(e,t),!o)if(u){let f=e.contentCheckHooks;f!==null&&cc(t,f)}else{let f=e.contentHooks;f!==null&&lc(t,f,1),af(t,1)}ZC(e,t);let d=e.components;d!==null&&Hv(t,d,0);let h=e.viewQuery;if(h!==null&&wf(2,h,r),!o)if(u){let f=e.viewCheckHooks;f!==null&&cc(t,f)}else{let f=e.viewHooks;f!==null&&lc(t,f,2),af(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Ya]){for(let f of t[Ya])f();t[Ya]=null}o||(Fv(t),t[j]&=-73)}catch(u){throw o||pi(t),u}finally{l!==null&&(ca(l,c),a&&BC(l)),ec()}}function Bv(e,t){for(let n=tv(e);n!==null;n=nv(n))for(let r=we;r<n.length;r++){let i=n[r];$v(i,t)}}function KC(e){for(let t=tv(e);t!==null;t=nv(t)){if(!(t[j]&2))continue;let n=t[Oo];for(let r=0;r<n.length;r++){let i=n[r];jd(i)}}}function YC(e,t,n){ce(ee.ComponentStart);let r=_t(t,e);try{$v(r,n)}finally{ce(ee.ComponentEnd,r[be])}}function $v(e,t){Za(e)&&Df(e,t)}function Df(e,t){let r=e[L],i=e[j],o=e[ut],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&la(o)),s||=!1,o&&(o.dirty=!1),e[j]&=-9217,s)WC(r,e,r.template,e[be]);else if(i&8192){let a=k(null);try{Vv(e),Bv(e,1);let c=r.components;c!==null&&Hv(e,c,1),Fv(e)}finally{k(a)}}}function Hv(e,t,n){for(let r=0;r<t.length;r++)YC(e,t[r],n)}function ZC(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Fn(~i);else{let o=i,s=n[++r],a=n[++r];Kg(s,o);let c=t[o];ce(ee.HostBindingsUpdateStart,c);try{a(2,c)}finally{ce(ee.HostBindingsUpdateEnd,c)}}}}finally{Fn(-1)}}function rh(e,t){let n=Gd()?64:1088;for(e[Qt].changeDetectionScheduler?.notify(t);e;){e[j]|=n;let r=xn(e);if(hi(e)&&!r)return e;e=r}return null}function qv(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function zv(e,t){let n=we+t;if(n<e.length)return e[n]}function $c(e,t,n,r=!0){let i=t[L];if(JC(i,t,e,n),r){let s=Cf(n,e),a=t[le],c=a.parentNode(e[kn]);c!==null&&uC(i,e[vt],a,t,c,s)}let o=t[ui];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Gv(e,t){let n=Ho(e,t);return n!==void 0&&jc(n[L],n),n}function Ho(e,t){if(e.length<=we)return;let n=we+t,r=e[n];if(r){let i=r[mr];i!==null&&i!==e&&Jf(i,r),t>0&&(e[n-1][mt]=r[mt]);let o=Mo(e,we+t);lC(r[L],r);let s=o[yr];s!==null&&s.detachView(o[L]),r[Ne]=null,r[mt]=null,r[j]&=-129}return r}function JC(e,t,n,r){let i=we+r,o=n.length;r>0&&(n[i-1][mt]=t),r<o-we?(t[mt]=n[i],Sd(n,we+r,t)):(n.push(t),t[mt]=null),t[Ne]=n;let s=t[mr];s!==null&&n!==s&&Wv(s,t);let a=t[yr];a!==null&&a.insertView(e),Ja(t),t[j]|=128}function Wv(e,t){let n=e[Oo],r=t[Ne];if(Xt(r))e[j]|=2;else{let i=r[Ne][lt];t[lt]!==i&&(e[j]|=2)}n===null?e[Oo]=[t]:n.push(t)}var Ln=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[L];return $o(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[be]}set context(t){this._lView[be]=t}get destroyed(){return wr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Ne];if(Ft(t)){let n=t[No],r=n?n.indexOf(this):-1;r>-1&&(Ho(t,r),Mo(n,r))}this._attachedToViewContainer=!1}jc(this._lView[L],this._lView)}onDestroy(t){Vd(this._lView,t)}markForCheck(){rh(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[j]&=-129}reattach(){Ja(this._lView),this._lView[j]|=128}detectChanges(){this._lView[j]|=1024,Uv(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=hi(this._lView),n=this._lView[mr];n!==null&&!t&&Jf(n,this._lView),Mv(this._lView[L],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=t;let n=hi(this._lView),r=this._lView[mr];r!==null&&!n&&Wv(r,this._lView),Ja(this._lView)}};var Hc=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=QC;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Bc(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ln(o)}}return e})();function QC(){return XC(qe(),z())}function XC(e,t){return e.type&4?new Hc(t,e,xc(e,t)):null}function Jo(e,t,n,r,i){let o=e.data[t];if(o===null)o=eD(e,t,n,r,i),Wg()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=qg();o.injectorIndex=s===null?-1:s.injectorIndex}return gi(o,!0),o}function eD(e,t,n,r,i){let o=qd(),s=zd(),a=s?o:o&&o.parent,c=e.data[t]=nD(e,a,n,t,r,i);return tD(e,c,o,s),c}function tD(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function nD(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Hg()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function rD(e){let t=e[kd]??[],r=e[Ne][le],i=[];for(let o of t)o.data[ov]!==void 0?i.push(o):iD(o,r);e[kd]=i}function iD(e,t){let n=0,r=e.firstChild;if(r){let i=e.data[iv];for(;n<i;){let o=r.nextSibling;gv(t,r,!1),r=o,n++}}}var oD=()=>null,sD=()=>null;function If(e,t){return oD(e,t)}function Kv(e,t,n){return sD(e,t,n)}var Yv=class{},qc=class{},Sf=class{resolveComponentFactory(t){throw new I(917,!1)}},Qo=class{static NULL=new Sf},Sr=class{},En=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>aD()}return e})();function aD(){let e=z(),t=qe(),n=_t(t.index,e);return(Xt(n)?n:e)[le]}var Zv=(()=>{class e{static \u0275prov=M({token:e,providedIn:"root",factory:()=>null})}return e})();var uc={},Tf=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,uc,r);return i!==uc||n===uc?i:this.parentInjector.get(t,n,r)}};function bc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=$a(i,a);else if(o==2){let c=a,l=t[++s];r=$a(r,c+": "+l+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Y(e,t=0){let n=z();if(n===null)return N(e,t);let r=qe();return Zm(r,n,$e(e),t)}function Jv(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}uD(e,t,n,a,o,c,l)}o!==null&&r!==null&&cD(n,r,o)}function cD(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new I(-301,!1);r.push(t[i],o)}}function lD(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function uD(e,t,n,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&en(f)&&(c=f,lD(e,n,h)),yf(gc(n,t),e,f.type)}mD(n,e.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let l=!1,u=!1,d=Ev(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=yi(n.mergedAttrs,f.hostAttrs),fD(e,n,t,d,f),gD(d,f,i),s!==null&&s.has(f)){let[v,w]=s.get(f);n.directiveToIndex.set(f.type,[d,v+n.directiveStart,w+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}dD(e,n,o)}function dD(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))Cm(0,t,i,r),Cm(1,t,i,r),Im(t,r,!1);else{let o=n.get(i);Dm(0,t,o,r),Dm(1,t,o,r),Im(t,r,!0)}}}function Cm(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Qv(t,o)}}function Dm(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Qv(t,s)}}function Qv(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Im(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||zf(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===t){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function fD(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=ur(i.type,!0)),s=new Dr(o,en(i),Y,null);e.blueprint[r]=s,n[r]=s,hD(e,t,r,Ev(e,n,i.hostVars,ze),i)}function hD(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;pD(s)!=a&&s.push(a),s.push(n,r,o)}}function pD(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function gD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;en(t)&&(n[""]=e)}}function mD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Xv(e,t,n,r,i,o,s,a){let c=t[L],l=c.consts,u=bt(l,s),d=Jo(c,e,n,r,u);return o&&Jv(c,t,d,bt(l,a),i),d.mergedAttrs=yi(d.mergedAttrs,d.attrs),d.attrs!==null&&bc(d,d.attrs,!1),d.mergedAttrs!==null&&bc(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function ey(e,t){Bm(e,t),Pd(t)&&e.queries.elementEnd(t)}function vD(e,t,n,r,i,o){let s=t.consts,a=bt(s,i),c=Jo(t,e,n,r,a);if(c.mergedAttrs=yi(c.mergedAttrs,c.attrs),o!=null){let l=bt(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&bc(c,c.attrs,!1),c.mergedAttrs!==null&&bc(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function ty(e,t,n){return e[t]=n}function yD(e,t){return e[t]}function Et(e,t,n){if(n===ze)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function ny(e,t,n,r){let i=Et(e,t,n);return Et(e,t+1,r)||i}function _D(e,t,n,r,i){let o=ny(e,t,n,r);return Et(e,t+2,i)||o}function dc(e,t,n){return function r(i){let o=Pn(e)?_t(e.index,t):t;rh(o,5);let s=t[be],a=Sm(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Sm(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Sm(e,t,n,r){let i=k(null);try{return ce(ee.OutputStart,t,n),n(r)!==!1}catch(o){return PC(e,o),!1}finally{ce(ee.OutputEnd,t,n),k(i)}}function ry(e,t,n,r,i,o,s,a){let c=ko(e),l=!1,u=null;if(!r&&c&&(u=wD(t,n,o,e.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,l=!0}else{let d=Lt(e,n),h=r?r(d):d;O0(n,h,o,a);let f=i.listen(h,o,a);if(!bD(o)){let p=r?v=>r(yt(v[e.index])):e.index;iy(p,t,n,o,a,f,!1)}}return l}function bD(e){return e.startsWith("animation")||e.startsWith("transition")}function wD(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[di],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function iy(e,t,n,r,i,o,s){let a=t.firstCreatePass?Ug(t):null,c=Vg(n),l=c.length;c.push(i,o),a&&a.push(r,e,l,(l+1)*(s?-1:1))}function Tm(e,t,n,r,i,o){let s=t[n],a=t[L],l=a.data[n].outputs[r],d=s[l].subscribe(o);iy(e.index,a,t,i,o,d,!0)}var Mf=Symbol("BINDING");var wc=class extends Qo{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Nn(t);return new bi(n,this.ngModule)}};function ED(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&Fc.SignalBased)!==0};return i&&(o.transform=i),o})}function CD(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function DD(e,t,n){let r=t instanceof he?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Tf(n,r):n}function ID(e){let t=e.get(Sr,null);if(t===null)throw new I(407,!1);let n=e.get(Zv,null),r=e.get(Rn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function SD(e,t){let n=oy(e);return hv(t,n,n==="svg"?kg:n==="math"?Pg:null)}function oy(e){return(e.selectors[0][0]||"div").toLowerCase()}var bi=class extends qc{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ED(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=CD(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=X0(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){ce(ee.DynamicComponentStart);let a=k(null);try{let c=this.componentDef,l=TD(r,c,s,o),u=DD(c,i||this.ngModule,t),d=ID(u),h=d.rendererFactory.createRenderer(null,c),f=r?CC(h,r,c.encapsulation,u):SD(c,h),p=s?.some(Mm)||o?.some(_=>typeof _!="function"&&_.bindings.some(Mm)),v=Wf(null,l,null,512|wv(c),null,null,d,h,u,null,cv(f,u,!0));v[ke]=f,Xa(v);let w=null;try{let _=Xv(ke,v,2,"#host",()=>l.directiveRegistry,!0,0);mv(h,f,_),_i(f,v),eh(l,v,_),uv(l,_,v),ey(l,_),n!==void 0&&AD(_,this.ngContentSelectors,n),w=_t(_.index,v),v[be]=w[be],nh(l,v,null)}catch(_){throw w!==null&&bf(w),bf(v),_}finally{ce(ee.DynamicComponentEnd),ec()}return new Ec(this.componentType,v,!!p)}finally{k(a)}}};function TD(e,t,n,r){let i=e?["ng-version","21.1.2"]:eC(t.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[Mf].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Mf].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=Cd(d);c.push(h)}return Gf(0,null,MD(o,s),1,a,c,null,null,null,[i],null)}function MD(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function Mm(e){let t=e[Mf].kind;return t==="input"||t==="twoWay"}var Ec=class extends Yv{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Po(n[L],ke),this.location=xc(this._tNode,n),this.instance=_t(this._tNode.index,n)[be],this.hostView=this.changeDetectorRef=new Ln(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=th(r,i[L],i,t,n);this.previousInputValues.set(t,n);let s=_t(r.index,i);rh(s,1)}get injector(){return new Cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function AD(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ei=(()=>{class e{static __NG_ELEMENT_ID__=xD}return e})();function xD(){let e=qe();return ND(e,z())}var RD=Ei,sy=class extends RD{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return xc(this._hostTNode,this._hostLView)}get injector(){return new Cr(this._hostTNode,this._hostLView)}get parentInjector(){let t=Vf(this._hostTNode,this._hostLView);if(qm(t)){let n=pc(t,this._hostLView),r=hc(t),i=n[L].data[r+8];return new Cr(i,n)}else return new Cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Am(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-we}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=If(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Bo(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!s0(t),l;if(c)l=n;else{let w=n||{};l=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef,s=w.directives,a=w.bindings}let u=c?t:new bi(Nn(t)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let _=(c?d:this.parentInjector).get(he,null);_&&(o=_)}let h=Nn(u.componentType??{}),f=If(this._lContainer,h?.id??null),p=f?.firstChild??null,v=u.create(d,i,p,o,s,a);return this.insertImpl(v.hostView,l,Bo(this._hostTNode,f)),v}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Fg(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[Ne],l=new sy(c,c[vt],c[Ne]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return $c(s,i,o,r),t.attachToViewContainerRef(),Sd(uf(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Am(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ho(this._lContainer,n);r&&(Mo(uf(this._lContainer),n),jc(r[L],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ho(this._lContainer,n);return r&&Mo(uf(this._lContainer),n)!=null?new Ln(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Am(e){return e[No]}function uf(e){return e[No]||(e[No]=[])}function ND(e,t){let n,r=t[e.index];return Ft(r)?n=r:(n=qv(r,t,null,e),t[e.index]=n,Kf(t,n)),kD(n,t,e,r),new sy(n,e,t)}function OD(e,t){let n=e[le],r=n.createComment(""),i=Lt(t,e),o=n.parentNode(i);return yc(n,o,r,n.nextSibling(i),!1),r}var kD=LD,PD=()=>!1;function FD(e,t,n){return PD(e,t,n)}function LD(e,t,n,r){if(e[kn])return;let i;n.type&8?i=yt(r):i=OD(t,n),e[kn]=i}var Tr=class{},zc=class{};var Cc=class extends Tr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new wc(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Ed(t);this._bootstrapComponents=_v(o.bootstrap),this._r3Injector=Xd(t,n,[{provide:Tr,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver},...r],hn(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Dc=class extends zc{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Cc(this.moduleType,t,[])}};var qo=class extends Tr{injector;componentFactoryResolver=new wc(this);instance=null;constructor(t){super();let n=new fr([...t.providers,{provide:Tr,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver}],t.parent||xo(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Xo(e,t,n=null){return new qo({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var jD=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Ad(!1,n.type),i=r.length>0?Xo([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=M({token:e,providedIn:"environment",factory:()=>new e(N(he))})}return e})();function Se(e){return Go(()=>{let t=ay(e),n=Z(D({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Uf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(jD).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Bt.Emulated,styles:e.styles||rt,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&jn("NgStandalone"),cy(n);let r=e.dependencies;return n.directiveDefs=xm(r,VD),n.pipeDefs=xm(r,Eg),n.id=$D(n),n})}function VD(e){return Nn(e)||Cd(e)}function $t(e){return Go(()=>({type:e.type,bootstrap:e.bootstrap||rt,declarations:e.declarations||rt,imports:e.imports||rt,exports:e.exports||rt,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function UD(e,t){if(e==null)return On;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Fc.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function BD(e){if(e==null)return On;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function me(e){return Go(()=>{let t=ay(e);return cy(t),t})}function ay(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||On,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||rt,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:UD(e.inputs,t),outputs:BD(e.outputs),debugInfo:null}}function cy(e){e.features?.forEach(t=>t(e))}function xm(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function $D(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function HD(e){return Object.getPrototypeOf(e.prototype).constructor}function Ct(e){let t=HD(e.type),n=!0,r=[e];for(;t;){let i;if(en(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new I(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=df(e.inputs),s.declaredInputs=df(e.declaredInputs),s.outputs=df(e.outputs);let a=i.hostBindings;a&&KD(e,a);let c=i.viewQuery,l=i.contentQueries;if(c&&GD(e,c),l&&WD(e,l),qD(e,i),wg(e.outputs,i.outputs),en(i)&&i.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===Ct&&(n=!1)}}t=Object.getPrototypeOf(t)}zD(r)}function qD(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function zD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=yi(i.hostAttrs,n=yi(n,i.hostAttrs))}}function df(e){return e===On?{}:e===rt?[]:e}function GD(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function WD(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function KD(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function ly(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=yi(e.mergedAttrs,e.attrs);let u=e.tView=Gf(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),u.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),gi(e,!1);let c=ZD(n,t,e,r);nc()&&Qf(n,t,c,e),_i(c,t);let l=qv(c,t,c,e);t[r+ke]=l,Kf(t,l),FD(l,e,t)}function YD(e,t,n,r,i,o,s,a,c,l,u){let d=n+ke,h;return t.firstCreatePass?(h=Jo(t,d,4,s||null,a||null),Bd()&&Jv(t,e,h,bt(t.consts,l),Nv),Bm(t,h)):h=t.data[d],ly(h,e,t,n,r,i,o,c),ko(h)&&eh(t,e,h),l!=null&&Uc(e,h,u),h}function Ic(e,t,n,r,i,o,s,a,c,l,u){let d=n+ke,h;if(t.firstCreatePass){if(h=Jo(t,d,4,s||null,a||null),l!=null){let f=bt(t.consts,l);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[d];return ly(h,e,t,n,r,i,o,c),l!=null&&Uc(e,h,u),h}function Gc(e,t,n,r,i,o,s,a){let c=z(),l=Pe(),u=bt(l.consts,o);return YD(c,l,e,t,n,r,i,u,void 0,s,a),Gc}var ZD=JD;function JD(e,t,n,r){return rc(!0),t[le].createComment("")}var ih=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function uy(e){return typeof e=="function"&&e[et]!==void 0}function oh(e){return uy(e)&&typeof e.set=="function"}var sh=new A("");function Vn(e){return!!e&&typeof e.then=="function"}function ah(e){return!!e&&typeof e.subscribe=="function"}var ch=new A("");function Wc(e){return kt([{provide:ch,multi:!0,useValue:e}])}var lh=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=b(ch,{optional:!0})??[];injector=b(at);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Oe(this.injector,i);if(Vn(o))n.push(o);else if(ah(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Kc=new A("");function dy(){Vu(()=>{let e="";throw new I(600,e)})}function fy(e){return e.isBoundToModule}var QD=10;var Ht=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=b(dt);afterRenderManager=b(Zf);zonelessEnabled=b(jo);rootEffectScheduler=b(sf);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new fe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=b(yn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(F(n=>!n))}constructor(){b(wn,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=b(he);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=at.NULL){return this._injector.get(He).run(()=>{ce(ee.BootstrapComponentStart);let s=n instanceof qc;if(!this._injector.get(lh).done){let p="";throw new I(405,p)}let c;s?c=n:c=this._injector.get(Qo).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=fy(c)?void 0:this._injector.get(Tr),u=r||c.selector,d=c.create(i,[],u,l),h=d.location.nativeElement,f=d.injector.get(sh,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Uo(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),ce(ee.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ce(ee.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Lc.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ce(ee.ChangeDetectionEnd),new I(101,!1);let n=k(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,k(n),this.afterTick.next(),ce(ee.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Sr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<QD;){ce(ee.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ce(ee.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Fo(i))continue;let o=r&&!this.zonelessEnabled?0:1;Uv(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Fo(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Uo(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Kc,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Uo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new I(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Uo(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Ci(e,t,n,r){let i=z(),o=Er();if(Et(i,o,t)){let s=Pe(),a=tc();NC(a,i,e,t,n,r)}return Ci}var rj=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Af=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),i=Math.max(t,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(t,n){this.attach(n,this.detach(t))}};function ff(e,t,n,r,i){return e===n&&Object.is(t,r)?1:Object.is(i(e,t),i(n,r))?-1:0}function XD(e,t,n,r){let i,o,s=0,a=e.length-1,c=void 0;if(Array.isArray(t)){k(r);let l=t.length-1;for(k(null);s<=a&&s<=l;){let u=e.at(s),d=t[s],h=ff(s,u,s,d,n);if(h!==0){h<0&&e.updateValue(s,d),s++;continue}let f=e.at(a),p=t[l],v=ff(a,f,l,p,n);if(v!==0){v<0&&e.updateValue(a,p),a--,l--;continue}let w=n(s,u),_=n(a,f),R=n(s,d);if(Object.is(R,_)){let S=n(l,p);Object.is(S,w)?(e.swap(s,a),e.updateValue(a,p),l--,a--):e.move(a,s),e.updateValue(s,d),s++;continue}if(i??=new Sc,o??=Nm(e,s,a,n),xf(e,i,s,R))e.updateValue(s,d),s++,a++;else if(o.has(R))i.set(w,e.detach(s)),a--;else{let S=e.create(s,t[s]);e.attach(s,S),s++,a++}}for(;s<=l;)Rm(e,i,n,s,t[s]),s++}else if(t!=null){k(r);let l=t[Symbol.iterator]();k(null);let u=l.next();for(;!u.done&&s<=a;){let d=e.at(s),h=u.value,f=ff(s,d,s,h,n);if(f!==0)f<0&&e.updateValue(s,h),s++,u=l.next();else{i??=new Sc,o??=Nm(e,s,a,n);let p=n(s,h);if(xf(e,i,s,p))e.updateValue(s,h),s++,a++,u=l.next();else if(!o.has(p))e.attach(s,e.create(s,h)),s++,a++,u=l.next();else{let v=n(s,d);i.set(v,e.detach(s)),a--}}}for(;!u.done;)Rm(e,i,n,e.length,u.value),u=l.next()}for(;s<=a;)e.destroy(e.detach(a--));i?.forEach(l=>{e.destroy(l)})}function xf(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function Rm(e,t,n,r,i){if(xf(e,t,r,n(r,i)))e.updateValue(r,i);else{let o=e.create(r,i);e.attach(r,o)}}function Nm(e,t,n,r){let i=new Set;for(let o=t;o<=n;o++)i.add(r(o,e.at(o)));return i}var Sc=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,n)}}};function ne(e,t,n,r,i,o,s,a){jn("NgControlFlow");let c=z(),l=Pe(),u=bt(l.consts,o);return Ic(c,l,e,t,n,r,i,u,256,s,a),uh}function uh(e,t,n,r,i,o,s,a){jn("NgControlFlow");let c=z(),l=Pe(),u=bt(l.consts,o);return Ic(c,l,e,t,n,r,i,u,512,s,a),uh}function re(e,t){jn("NgControlFlow");let n=z(),r=Er(),i=n[r]!==ze?n[r]:-1,o=i!==-1?Tc(n,ke+i):void 0,s=0;if(Et(n,r,e)){let a=k(null);try{if(o!==void 0&&Gv(o,s),e!==-1){let c=ke+e,l=Tc(n,c),u=kf(n[L],c),d=Kv(l,u,n),h=Bc(n,u,t,{dehydratedView:d});$c(l,h,s,Bo(u,d))}}finally{k(a)}}else if(o!==void 0){let a=zv(o,s);a!==void 0&&(a[be]=t)}}var Rf=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-we}};function Un(e,t){return t}var Nf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function Je(e,t,n,r,i,o,s,a,c,l,u,d,h){jn("NgControlFlow");let f=z(),p=Pe(),v=c!==void 0,w=z(),_=a?s.bind(w[lt][be]):s,R=new Nf(v,_);w[ke+e]=R,Ic(f,p,e+1,t,n,r,i,bt(p.consts,o),256),v&&Ic(f,p,e+2,c,l,u,d,bt(p.consts,h),512)}var Of=class extends Af{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-we}at(t){return this.getLView(t)[be].$implicit}attach(t,n){let r=n[ui];this.needsIndexUpdate||=t!==this.length,$c(this.lContainer,n,t,Bo(this.templateTNode,r)),eI(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,tI(this.lContainer,t),nI(this.lContainer,t)}create(t,n){let r=If(this.lContainer,this.templateTNode.tView.ssrId);return Bc(this.hostLView,this.templateTNode,new Rf(this.lContainer,n,t),{dehydratedView:r})}destroy(t){jc(t[L],t)}updateValue(t,n){this.getLView(t)[be].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[be].$index=t}getLView(t){return rI(this.lContainer,t)}};function Qe(e){let t=k(null),n=jt();try{let r=z(),i=r[L],o=r[n],s=n+1,a=Tc(r,s);if(o.liveCollection===void 0){let l=kf(i,s);o.liveCollection=new Of(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(XD(c,e,o.trackByFn,t),c.updateIndexes(),o.hasEmptyBlock){let l=Er(),u=c.length===0;if(Et(r,l,u)){let d=n+2,h=Tc(r,d);if(u){let f=kf(i,d),p=Kv(h,f,r),v=Bc(r,f,void 0,{dehydratedView:p});$c(h,v,0,Bo(f,p))}else i.firstUpdatePass&&rD(h),Gv(h,0)}}}finally{k(t)}}function Tc(e,t){return e[t]}function eI(e,t){if(e.length<=we)return;let n=we+t,r=e[n],i=r?r[br]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[mn];aC(o,i),Ir.delete(r[vn]),i.detachedLeaveAnimationFns=void 0}}function tI(e,t){if(e.length<=we)return;let n=we+t,r=e[n],i=r?r[br]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function nI(e,t){return Ho(e,t)}function rI(e,t){return zv(e,t)}function kf(e,t){return Po(e,t)}function ve(e,t,n){let r=z(),i=Er();if(Et(r,i,t)){let o=Pe(),s=tc();Rv(s,r,e,t,r[le],n)}return ve}function Pf(e,t,n,r,i){th(t,e,n,i?"class":"style",r)}function m(e,t,n,r){let i=z(),o=i[L],s=e+ke,a=o.firstCreatePass?Xv(s,i,2,t,Nv,Bd(),n,r):o.data[s];if(Ov(a,i,e,t,hy),ko(a)){let c=i[L];eh(c,i,a),uv(c,a,i)}return r!=null&&Uc(i,a),m}function g(){let e=Pe(),t=qe(),n=kv(t);return e.firstCreatePass&&ey(e,n),$d(n)&&Hd(),Ud(),n.classesWithoutHost!=null&&f0(n)&&Pf(e,n,z(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&h0(n)&&Pf(e,n,z(),n.stylesWithoutHost,!1),g}function Bn(e,t,n,r){return m(e,t,n,r),g(),Bn}function Di(e,t,n,r){let i=z(),o=i[L],s=e+ke,a=o.firstCreatePass?vD(s,o,2,t,n,r):o.data[s];return Ov(a,i,e,t,hy),r!=null&&Uc(i,a),Di}function Ii(){let e=qe(),t=kv(e);return $d(t)&&Hd(),Ud(),Ii}var hy=(e,t,n,r,i)=>(rc(!0),hv(t[le],r,tm()));function Te(){return z()}var es="en-US";var iI=es;function py(e){typeof e=="string"&&(iI=e.toLowerCase().replace(/_/g,"-"))}function Q(e,t,n){let r=z(),i=Pe(),o=qe();return gy(i,r,r[le],o,e,t,n),Q}function Yc(e,t,n){let r=z(),i=Pe(),o=qe();return(o.type&3||n)&&ry(o,i,r,n,r[le],e,t,dc(o,r,t)),Yc}function gy(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=dc(r,t,o),ry(r,e,t,s,n,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];c??=dc(r,t,o),Tm(r,t,h,f,i,c)}if(l&&l.length)for(let d of l)c??=dc(r,t,o),Tm(r,t,d,i,i,c)}}function T(e=1){return em(e)}function ac(e,t){return e<<17|t<<2}function Mr(e){return e>>17&32767}function oI(e){return(e&2)==2}function sI(e,t){return e&131071|t<<17}function Ff(e){return e|2}function wi(e){return(e&131068)>>2}function hf(e,t){return e&-131069|t<<2}function aI(e){return(e&1)===1}function Lf(e){return e|1}function cI(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Mr(s),c=wi(s);e[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||li(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=Mr(e[a+1]);e[r+1]=ac(h,a),h!==0&&(e[h+1]=hf(e[h+1],r)),e[a+1]=sI(e[a+1],r)}else e[r+1]=ac(a,0),a!==0&&(e[a+1]=hf(e[a+1],r)),a=r;else e[r+1]=ac(c,0),a===0?a=r:e[c+1]=hf(e[c+1],r),c=r;l&&(e[r+1]=Ff(e[r+1])),Om(e,u,r,!0),Om(e,u,r,!1),lI(t,u,e,r,o),s=ac(a,c),o?t.classBindings=s:t.styleBindings=s}function lI(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&li(o,t)>=0&&(n[r+1]=Lf(n[r+1]))}function Om(e,t,n,r){let i=e[n+1],o=t===null,s=r?Mr(i):wi(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],l=e[s+1];uI(c,t)&&(a=!0,e[s+1]=r?Lf(l):Ff(l)),s=r?Mr(l):wi(l)}a&&(e[n+1]=r?Ff(i):Lf(i))}function uI(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?li(e,t)>=0:!1}var Ut={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function dI(e){return e.substring(Ut.key,Ut.keyEnd)}function fI(e){return hI(e),my(e,vy(e,0,Ut.textEnd))}function my(e,t){let n=Ut.textEnd;return n===t?-1:(t=Ut.keyEnd=pI(e,Ut.key=t,n),vy(e,t,n))}function hI(e){Ut.key=0,Ut.keyEnd=0,Ut.value=0,Ut.valueEnd=0,Ut.textEnd=e.length}function vy(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function pI(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Ar(e,t){return mI(e,t,null,!0),Ar}function ts(e){vI(CI,gI,e,!0)}function gI(e,t){for(let n=fI(t);n>=0;n=my(t,n))Wa(e,dI(t),!0)}function mI(e,t,n,r){let i=z(),o=Pe(),s=Lo(2);if(o.firstUpdatePass&&_y(o,e,s,r),t!==ze&&Et(i,s,t)){let a=o.data[jt()];by(o,a,i,i[le],e,i[s+1]=II(t,n),r,s)}}function vI(e,t,n,r){let i=Pe(),o=Lo(2);i.firstUpdatePass&&_y(i,null,o,r);let s=z();if(n!==ze&&Et(s,o,n)){let a=i.data[jt()];if(wy(a,r)&&!yy(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=$a(c,n||"")),Pf(i,a,s,n,r)}else DI(i,a,s,s[le],s[o+1],s[o+1]=EI(e,t,n),r,o)}}function yy(e,t){return t>=e.expandoStartIndex}function _y(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[jt()],s=yy(e,n);wy(o,r)&&t===null&&!s&&(t=!1),t=yI(i,o,t,r),cI(i,o,t,n,s,r)}}function yI(e,t,n,r){let i=Zg(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=pf(null,e,t,n,r),n=zo(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=pf(i,e,t,n,r),o===null){let c=_I(e,t,r);c!==void 0&&Array.isArray(c)&&(c=pf(null,e,t,c[1],r),c=zo(c,t.attrs,r),bI(e,t,r,c))}else o=wI(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function _I(e,t,n){let r=n?t.classBindings:t.styleBindings;if(wi(r)!==0)return e[Mr(r)]}function bI(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Mr(i)]=r}function wI(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=zo(r,s,n)}return zo(r,t.attrs,n)}function pf(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=zo(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function zo(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Wa(e,s,n?!0:t[++o]))}return e===void 0?null:e}function EI(e,t,n){if(n==null||n==="")return rt;let r=[],i=Yo(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if(i instanceof Set)for(let o of i)e(r,o,!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else typeof i=="string"&&t(r,i);return r}function CI(e,t,n){let r=String(t);r!==""&&!r.includes(" ")&&Wa(e,r,n)}function DI(e,t,n,r,i,o,s,a){i===ze&&(i=rt);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=c<i.length?i[c+1]:void 0,f=l<o.length?o[l+1]:void 0,p=null,v;u===d?(c+=2,l+=2,h!==f&&(p=d,v=f)):d===null||u!==null&&u<d?(c+=2,p=u):(l+=2,p=d,v=f),p!==null&&by(e,t,n,r,p,v,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}function by(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,l=c[a+1],u=aI(l)?km(c,t,n,i,wi(l),s):void 0;if(!Mc(u)){Mc(o)||oI(l)&&(o=km(c,null,n,i,a,s));let d=Fd(jt(),n);EC(r,s,d,i,o)}}function km(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===ze&&(h=d?rt:void 0);let f=d?Ka(h,r):u===r?h:void 0;if(l&&!Mc(f)&&(f=Ka(c,r)),Mc(f)&&(a=f,s))return a;let p=e[i+1];i=s?Mr(p):wi(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=Ka(c,r))}return a}function Mc(e){return e!==void 0}function II(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=hn(Yo(e)))),e}function wy(e,t){return(e.flags&(t?8:16))!==0}function y(e,t=""){let n=z(),r=Pe(),i=e+ke,o=r.firstCreatePass?Jo(r,i,1,t,null):r.data[i],s=SI(r,n,o,t);n[i]=s,nc()&&Qf(r,n,s,o),gi(o,!1)}var SI=(e,t,n,r)=>(rc(!0),L0(t[le],r));function TI(e,t,n,r=""){return Et(e,Er(),n)?t+gn(n)+r:ze}function MI(e,t,n,r,i,o=""){let s=Yd(),a=ny(e,s,n,i);return Lo(2),a?t+gn(n)+r+gn(i)+o:ze}function AI(e,t,n,r,i,o,s,a=""){let c=Yd(),l=_D(e,c,n,i,s);return Lo(3),l?t+gn(n)+r+gn(i)+o+gn(s)+a:ze}function X(e){return pe("",e),X}function pe(e,t,n){let r=z(),i=TI(r,e,t,n);return i!==ze&&dh(r,jt(),i),pe}function Si(e,t,n,r,i){let o=z(),s=MI(o,e,t,n,r,i);return s!==ze&&dh(o,jt(),s),Si}function Ti(e,t,n,r,i,o,s){let a=z(),c=AI(a,e,t,n,r,i,o,s);return c!==ze&&dh(a,jt(),c),Ti}function dh(e,t,n){let r=Fd(t,e);j0(e[le],r,n)}function Me(e,t,n){oh(t)&&(t=t());let r=z(),i=Er();if(Et(r,i,t)){let o=Pe(),s=tc();Rv(s,r,e,t,r[le],n)}return Me}function Fe(e,t){let n=oh(e);return n&&e.set(t),n}function Ae(e,t){let n=z(),r=Pe(),i=qe();return gy(r,n,n[le],i,e,t),Ae}function Pm(e,t,n){let r=Pe();r.firstCreatePass&&Ey(t,r.data,r.blueprint,en(e),n)}function Ey(e,t,n,r,i){if(e=$e(e),Array.isArray(e))for(let o=0;o<e.length;o++)Ey(e[o],t,n,r,i);else{let o=Pe(),s=z(),a=qe(),c=dr(e)?e:$e(e.provide),l=Rd(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(dr(e)||!e.multi){let f=new Dr(l,i,Y,null),p=mf(c,t,i?u:u+h,d);p===-1?(yf(gc(a,s),o,c),gf(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=mf(c,t,u+h,d),p=mf(c,t,u,u+h),v=f>=0&&n[f],w=p>=0&&n[p];if(i&&!w||!i&&!v){yf(gc(a,s),o,c);let _=NI(i?RI:xI,n.length,i,r,l,e);!i&&w&&(n[p].providerFactory=_),gf(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),s.push(_)}else{let _=Cy(n[i?p:f],l,!i&&r);gf(o,e,f>-1?f:p,_)}!i&&r&&w&&n[p].componentProviders++}}}function gf(e,t,n,r){let i=dr(t),o=Rg(t);if(i||o){let c=(o?$e(t.useClass):t).prototype.ngOnDestroy;if(c){let l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function Cy(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function mf(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function xI(e,t,n,r,i){return jf(this.multi,[])}function RI(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=mc(r,r[L],this.providerFactory.index,i);s=c.slice(0,a),jf(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],jf(o,s);return s}function jf(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function NI(e,t,n,r,i,o){let s=new Dr(e,n,Y,null);return s.multi=[],s.index=t,s.componentProviders=0,Cy(s,i,r&&!n),s}function $n(e,t){return n=>{n.providersResolver=(r,i)=>Pm(r,i?i(e):e,!1),t&&(n.viewProvidersResolver=(r,i)=>Pm(r,i?i(t):t,!0))}}function fh(e,t){let n=Kd()+e,r=z();return r[n]===ze?ty(r,n,t()):yD(r,n)}function Cn(e,t,n){return kI(z(),Kd(),e,t,n)}function OI(e,t){let n=e[t];return n===ze?void 0:n}function kI(e,t,n,r,i,o){let s=t+n;return Et(e,s,i)?ty(e,s+1,o?r.call(o,i):r(i)):OI(e,s+1)}var Ac=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},hh=(()=>{class e{compileModuleSync(n){return new Dc(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Ed(n),o=_v(i.declarations).reduce((s,a)=>{let c=Nn(a);return c&&s.push(new bi(c)),s},[]);return new Ac(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Dy=(()=>{class e{applicationErrorHandler=b(dt);appRef=b(Ht);taskService=b(yn);ngZone=b(He);zonelessEnabled=b(jo);tracing=b(wn,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ve;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Do):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(b(of,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?om:ef;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Do+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Iy(){return[{provide:Rn,useExisting:Dy},{provide:He,useClass:Io},{provide:jo,useValue:!0}]}function PI(){return typeof $localize<"u"&&$localize.locale||es}var Zc=new A("",{factory:()=>b(Zc,{optional:!0,skipSelf:!0})||PI()});function Ge(e,t){return ua(e,t?.equal)}var Ty=Symbol("InputSignalNode#UNSET"),nS=Z(D({},da),{transformFn:void 0,applyValueToInputSignal(e,t){go(e,t)}});function My(e,t){let n=Object.create(nS);n.value=e,n.transformFn=t?.transform;function r(){if(fo(n),n.value===Ty){let i=null;throw new I(-950,i)}return n.value}return r[et]=n,r}var Qc=class{attributeName;constructor(t){this.attributeName=t}__NG_ELEMENT_ID__=()=>Wo(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function Sy(e,t){return My(e,t)}function rS(e){return My(Ty,e)}var Ay=(Sy.required=rS,Sy);var ph=new A(""),iS=new A("");function ns(e){return!e.moduleRef}function oS(e){let t=ns(e)?e.r3Injector:e.moduleRef.injector,n=t.get(He);return n.run(()=>{ns(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(dt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),ns(e)){let o=()=>t.destroy(),s=e.platformInjector.get(ph);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(ph);s.add(o),e.moduleRef.onDestroy(()=>{Uo(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return aS(r,n,()=>{let o=t.get(yn),s=o.add(),a=t.get(lh);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Zc,es);if(py(c||es),!t.get(iS,!0))return ns(e)?t.get(Ht):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(ns(e)){let u=t.get(Ht);return e.rootComponent!==void 0&&u.bootstrap(e.rootComponent),u}else return sS?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>{o.remove(s)})})})}var sS;function aS(e,t,n){try{let r=n();return Vn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Jc=null;function cS(e=[],t){return at.create({name:t,providers:[{provide:Ao,useValue:"platform"},{provide:ph,useValue:new Set([()=>Jc=null])},...e]})}function lS(e=[]){if(Jc)return Jc;let t=cS(e);return Jc=t,dy(),uS(t),t}function uS(e){let t=e.get(Nc,null);Oe(e,()=>{t?.forEach(n=>n())})}function xy(){return!1}var dS=1e4;var vH=dS-1e3;var xr=(()=>{class e{static __NG_ELEMENT_ID__=fS}return e})();function fS(e){return hS(qe(),z(),(e&16)===16)}function hS(e,t,n){if(Pn(e)&&!n){let r=_t(e.index,t);return new Ln(r,r)}else if(e.type&175){let r=t[lt];return new Ln(r,t)}return null}function Ry(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;ce(ee.BootstrapApplicationStart);try{let o=i?.injector??lS(r),s=[Iy(),am,...n||[]],a=new qo({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return oS({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{ce(ee.BootstrapApplicationEnd)}}function Rr(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var Ny=null;function Dt(){return Ny}function gh(e){Ny??=e}var rs=class{},Mi=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>b(Oy),providedIn:"platform"})}return e})();var Oy=(()=>{class e extends Mi{_location;_history;_doc=b(Ee);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dt().getBaseHref(this._doc)}onPopState(n){let r=Dt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Dt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Fy(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function ky(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function qn(e){return e&&e[0]!=="?"?`?${e}`:e}var Ai=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>b(gS),providedIn:"root"})}return e})(),pS=new A(""),gS=(()=>{class e extends Ai{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??b(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Fy(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+qn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+qn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(N(Mi),N(pS,8))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xi=(()=>{class e{_subject=new fe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yS(ky(Py(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qn(r))}normalize(n){return e.stripTrailingSlash(vS(this._basePath,Py(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=qn;static joinWithSlash=Fy;static stripTrailingSlash=ky;static \u0275fac=function(r){return new(r||e)(N(Ai))};static \u0275prov=M({token:e,factory:()=>mS(),providedIn:"root"})}return e})();function mS(){return new xi(N(Ai))}function vS(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Py(e){return e.replace(/\/index.html$/,"")}function yS(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var mh=(()=>{class e{_viewContainer;_context=new Xc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Ly(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Ly(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Y(Ei),Y(Hc))};static \u0275dir=me({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),Xc=class{$implicit=null;ngIf=null};function Ly(e,t){if(e&&!e.createEmbeddedView)throw new I(2020,!1)}var It=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$t({type:e});static \u0275inj=gt({})}return e})();function is(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Nr=class{};var jy="browser";var os=class{_doc;constructor(t){this._doc=t}manager},el=(()=>{class e extends os{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(N(Ee))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),rl=new A(""),bh=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof el));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof el);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new I(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(N(rl),N(He))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),vh="ng-app-id";function Uy(e){for(let t of e)t.remove()}function By(e,t){let n=t.createElement("style");return n.textContent=e,n}function bS(e,t,n,r){let i=e.head?.querySelectorAll(`style[${vh}="${t}"],link[${vh}="${t}"]`);if(i)for(let o of i)o.removeAttribute(vh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function _h(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var wh=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,bS(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,By);r?.forEach(i=>this.addUsage(i,this.external,_h))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Uy(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Uy(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,By(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,_h(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(N(Ee),N(Rc),N(Oc,8),N(Ko))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),yh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Eh=/%COMP%/g;var Hy="%COMP%",wS=`_nghost-${Hy}`,ES=`_ngcontent-${Hy}`,CS=!0,DS=new A("",{factory:()=>CS});function IS(e){return ES.replace(Eh,e)}function SS(e){return wS.replace(Eh,e)}function qy(e,t){return t.map(n=>n.replace(Eh,e))}var Ch=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new ss(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof nl?i.applyToHost(n):i instanceof as&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case Bt.Emulated:o=new nl(c,l,r,this.appId,u,s,a,d);break;case Bt.ShadowDom:return new tl(c,n,r,s,a,this.nonce,d,l);case Bt.ExperimentalIsolatedShadowDom:return new tl(c,n,r,s,a,this.nonce,d);default:o=new as(c,l,r,u,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(N(bh),N(wh),N(Rc),N(DS),N(Ee),N(He),N(Oc),N(wn,8))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),ss=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(yh[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){($y(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&($y(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new I(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=yh[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=yh[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(nn.DashCase|nn.Important)?t.style.setProperty(n,r,i&nn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&nn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=Dt().getGlobalEventTarget(this.doc,t),!t))throw new I(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function $y(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var tl=class extends ss{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,i,o,s,a,c){super(t,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=qy(r.id,l);for(let d of l){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=d,this.shadowRoot.appendChild(h)}let u=r.getExternalStyles?.();if(u)for(let d of u){let h=_h(d,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},as=class extends ss{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?qy(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ir.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},nl=class extends as{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=IS(l),this.hostAttr=SS(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var il=class e extends rs{supportsDOMEvents=!0;static makeCurrent(){gh(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=TS();return n==null?null:MS(n)}resetBaseElement(){cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return is(document.cookie,t)}},cs=null;function TS(){return cs=cs||document.head.querySelector("base"),cs?cs.getAttribute("href"):null}function MS(e){return new URL(e,document.baseURI).pathname}var AS=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),zy=["alt","control","meta","shift"],xS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RS={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Gy=(()=>{class e extends os{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dt().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),zy.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=xS[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zy.forEach(s=>{if(s!==i){let a=RS[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(N(Ee))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})();async function Dh(e,t,n){let r=D({rootComponent:e},NS(t,n));return Ry(r)}function NS(e,t){return{platformRef:t?.platformRef,appProviders:[...LS,...e?.providers??[]],platformProviders:FS}}function OS(){il.makeCurrent()}function kS(){return new Jt}function PS(){return Bf(document),document}var FS=[{provide:Ko,useValue:jy},{provide:Nc,useValue:OS,multi:!0},{provide:Ee,useFactory:PS}];var LS=[{provide:Ao,useValue:"root"},{provide:Jt,useFactory:kS},{provide:rl,useClass:el,multi:!0},{provide:rl,useClass:Gy,multi:!0},Ch,wh,bh,{provide:Sr,useExisting:Ch},{provide:Nr,useClass:AS},[]];var Or=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var sl=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},al=class{encodeKey(t){return Wy(t)}encodeValue(t){return Wy(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function jS(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var VS=/%(\d[a-f0-9])/gi,US={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Wy(e){return encodeURIComponent(e).replace(VS,(t,n)=>US[n]??t)}function ol(e){return`${e}`}var zn=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new al,t.fromString){if(t.fromObject)throw new I(2805,!1);this.map=jS(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(ol):[ol(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(ol(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(ol(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function BS(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ky(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Yy(e){return typeof Blob<"u"&&e instanceof Blob}function Zy(e){return typeof FormData<"u"&&e instanceof FormData}function $S(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Jy="Content-Type",Qy="Accept",Xy="text/plain",e_="application/json",HS=`${e_}, ${Xy}, */*`,ls=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,i){this.url=n,this.method=t.toUpperCase();let o;if(BS(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new I(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new Or,this.context??=new sl,!this.params)this.params=new zn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ky(this.body)||Yy(this.body)||Zy(this.body)||$S(this.body)?this.body:this.body instanceof zn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Zy(this.body)?null:Yy(this.body)?this.body.type||null:Ky(this.body)?null:typeof this.body=="string"?Xy:this.body instanceof zn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?e_:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,l=t.redirect||this.redirect,u=t.credentials||this.credentials,d=t.referrer||this.referrer,h=t.integrity||this.integrity,f=t.referrerPolicy||this.referrerPolicy,p=t.transferCache??this.transferCache,v=t.timeout??this.timeout,w=t.body!==void 0?t.body:this.body,_=t.withCredentials??this.withCredentials,R=t.reportProgress??this.reportProgress,S=t.headers||this.headers,C=t.params||this.params,G=t.context??this.context;return t.setHeaders!==void 0&&(S=Object.keys(t.setHeaders).reduce((Ke,J)=>Ke.set(J,t.setHeaders[J]),S)),t.setParams&&(C=Object.keys(t.setParams).reduce((Ke,J)=>Ke.set(J,t.setParams[J]),C)),new e(n,r,w,{params:C,headers:S,context:G,reportProgress:R,responseType:i,withCredentials:_,transferCache:p,keepalive:o,cache:a,priority:s,timeout:v,mode:c,redirect:l,credentials:u,referrer:d,integrity:h,referrerPolicy:f})}},Ri=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(Ri||{}),Ni=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,r="OK"){this.headers=t.headers||new Or,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},cl=class e extends Ni{constructor(t={}){super(t)}type=Ri.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},ll=class e extends Ni{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Ri.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},us=class extends Ni{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},qS=200,zS=204;var GS=new A("");var WS=/^\)\]\}',?\n/;var Sh=(()=>{class e{xhrFactory;tracingService=b(wn,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new I(-2800,!1);let r=this.xhrFactory;return K(null).pipe(Ze(()=>new q(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((w,_)=>s.setRequestHeader(w,_.join(","))),n.headers.has(Qy)||s.setRequestHeader(Qy,HS),!n.headers.has(Jy)){let w=n.detectContentTypeHeader();w!==null&&s.setRequestHeader(Jy,w)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let w=n.responseType.toLowerCase();s.responseType=w!=="json"?w:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let w=s.statusText||"OK",_=new Or(s.getAllResponseHeaders()),R=s.responseURL||n.url;return c=new cl({headers:_,status:s.status,statusText:w,url:R}),c},u=this.maybePropagateTrace(()=>{let{headers:w,status:_,statusText:R,url:S}=l(),C=null;_!==zS&&(C=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=C?qS:0);let G=_>=200&&_<300;if(n.responseType==="json"&&typeof C=="string"){let Ke=C;C=C.replace(WS,"");try{C=C!==""?JSON.parse(C):null}catch(J){C=Ke,G&&(G=!1,C={error:J,text:C})}}G?(o.next(new ll({body:C,headers:w,status:_,statusText:R,url:S||void 0})),o.complete()):o.error(new us({error:C,headers:w,status:_,statusText:R,url:S||void 0}))}),d=this.maybePropagateTrace(w=>{let{url:_}=l(),R=new us({error:w,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(R)}),h=d;n.timeout&&(h=this.maybePropagateTrace(w=>{let{url:_}=l(),R=new us({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:_||void 0});o.error(R)}));let f=!1,p=this.maybePropagateTrace(w=>{f||(o.next(l()),f=!0);let _={type:Ri.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(_.total=w.total),n.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)}),v=this.maybePropagateTrace(w=>{let _={type:Ri.UploadProgress,loaded:w.loaded};w.lengthComputable&&(_.total=w.total),o.next(_)});return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",h),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",v)),s.send(a),o.next({type:Ri.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",v)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(N(Nr))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function KS(e,t){return t(e)}function YS(e,t,n){return(r,i)=>Oe(n,()=>t(r,o=>e(o,i)))}var t_=new A("",{factory:()=>[]}),ZS=new A(""),n_=new A("",{factory:()=>!0});var Th=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=N(Sh),i},providedIn:"root"})}return e})();var ul=(()=>{class e{backend;injector;chain=null;pendingTasks=b(oc);contributeToStability=b(n_);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(t_),...this.injector.get(ZS,[])]));this.chain=r.reduceRight((i,o)=>YS(i,o,this.injector),KS)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(_o(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(N(Th),N(he))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Mh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=N(ul),i},providedIn:"root"})}return e})();function Ih(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var JS=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof ls)o=n;else{let c;i.headers instanceof Or?c=i.headers:c=new Or(i.headers);let l;i.params&&(i.params instanceof zn?l=i.params:l=new zn({fromObject:i.params})),o=new ls(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=K(o).pipe(si(c=>this.handler.handle(c)));if(n instanceof ls||i.observe==="events")return s;let a=s.pipe(st(c=>c instanceof ll));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(F(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new I(2806,!1);return c.body}));case"blob":return a.pipe(F(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new I(2807,!1);return c.body}));case"text":return a.pipe(F(c=>{if(c.body!==null&&typeof c.body!="string")throw new I(2808,!1);return c.body}));default:return a.pipe(F(c=>c.body))}case"response":return a;default:throw new I(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new zn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Ih(i,r))}post(n,r,i={}){return this.request("POST",n,Ih(i,r))}put(n,r,i={}){return this.request("PUT",n,Ih(i,r))}static \u0275fac=function(r){return new(r||e)(N(Mh))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var QS=new A("",{factory:()=>!0}),XS="XSRF-TOKEN",eT=new A("",{factory:()=>XS}),tT="X-XSRF-TOKEN",nT=new A("",{factory:()=>tT}),rT=(()=>{class e{cookieName=b(eT);doc=b(Ee);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=is(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),r_=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=N(rT),i},providedIn:"root"})}return e})();function iT(e,t){if(!b(QS)||e.method==="GET"||e.method==="HEAD")return t(e);try{let i=b(Mi).href,{origin:o}=new URL(i),{origin:s}=new URL(e.url,o);if(o!==s)return t(e)}catch{return t(e)}let n=b(r_).getToken(),r=b(nT);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}function Ah(...e){let t=[JS,ul,{provide:Mh,useExisting:ul},{provide:Th,useFactory:()=>b(GS,{optional:!0})??b(Sh)},{provide:t_,useValue:iT,multi:!0}];for(let n of e)t.push(...n.\u0275providers);return kt(t)}var i_=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(N(Ee))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var V="primary",Es=Symbol("RouteTitle"),kh=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fr(e){return new kh(e)}function xh(e,t,n){for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i[0]===":")n[i.substring(1)]=o;else if(i!==o.path)return!1}return!0}function p_(e,t,n){let r=n.path.split("/"),i=r.indexOf("**");if(i===-1){if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let c={},l=e.slice(0,r.length);return xh(r,l,c)?{consumed:l,posParams:c}:null}if(i!==r.lastIndexOf("**"))return null;let o=r.slice(0,i),s=r.slice(i+1);if(o.length+s.length>e.length||n.pathMatch==="full"&&t.hasChildren()&&n.path!=="**")return null;let a={};return!xh(o,e.slice(0,o.length),a)||!xh(s,e.slice(e.length-s.length),a)?null:{consumed:e,posParams:a}}function ml(e){return new Promise((t,n)=>{e.pipe(dn()).subscribe({next:r=>t(r),error:r=>n(r)})})}function sT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!on(e[n],t[n]))return!1;return!0}function on(e,t){let n=e?Ph(e):void 0,r=t?Ph(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!g_(e[i],t[i]))return!1;return!0}function Ph(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function g_(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function aT(e){return e.length>0?e[e.length-1]:null}function Vr(e){return Ra(e)?e:Vn(e)?te(Promise.resolve(e)):K(e)}function m_(e){return Ra(e)?ml(e):Promise.resolve(e)}var cT={exact:y_,subset:__},v_={exact:lT,subset:uT,ignored:()=>!0};function o_(e,t,n){return cT[n.paths](e.root,t.root,n.matrixParams)&&v_[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function lT(e,t){return on(e,t)}function y_(e,t,n){if(!kr(e.segments,t.segments)||!hl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!y_(e.children[r],t.children[r],n))return!1;return!0}function uT(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>g_(e[n],t[n]))}function __(e,t,n){return b_(e,t,t.segments,n)}function b_(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!kr(i,n)||t.hasChildren()||!hl(i,n,r))}else if(e.segments.length===n.length){if(!kr(e.segments,n)||!hl(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!__(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!kr(e.segments,i)||!hl(e.segments,i,r)||!e.children[V]?!1:b_(e.children[V],t,o,r)}}function hl(e,t,n){return t.every((r,i)=>v_[n](e[i].parameters,r.parameters))}var zt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new ie([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fr(this.queryParams),this._queryParamMap}toString(){return hT.serialize(this)}},ie=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pl(this)}},Gn=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Fr(this.parameters),this._parameterMap}toString(){return E_(this)}};function dT(e,t){return kr(e,t)&&e.every((n,r)=>on(n.parameters,t[r].parameters))}function kr(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function fT(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===V&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==V&&(n=n.concat(t(i,r)))}),n}var Cs=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>new Wn,providedIn:"root"})}return e})(),Wn=class{parse(t){let n=new Lh(t);return new zt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ds(t.root,!0)}`,r=mT(t.queryParams),i=typeof t.fragment=="string"?`#${pT(t.fragment)}`:"";return`${n}${r}${i}`}},hT=new Wn;function pl(e){return e.segments.map(t=>E_(t)).join("/")}function ds(e,t){if(!e.hasChildren())return pl(e);if(t){let n=e.children[V]?ds(e.children[V],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==V&&r.push(`${i}:${ds(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=fT(e,(r,i)=>i===V?[ds(e.children[V],!1)]:[`${i}:${ds(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[V]!=null?`${pl(e)}/${n[0]}`:`${pl(e)}/(${n.join("//")})`}}function w_(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dl(e){return w_(e).replace(/%3B/gi,";")}function pT(e){return encodeURI(e)}function Fh(e){return w_(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gl(e){return decodeURIComponent(e)}function s_(e){return gl(e.replace(/\+/g,"%20"))}function E_(e){return`${Fh(e.path)}${gT(e.parameters)}`}function gT(e){return Object.entries(e).map(([t,n])=>`;${Fh(t)}=${Fh(n)}`).join("")}function mT(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${dl(n)}=${dl(i)}`).join("&"):`${dl(n)}=${dl(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var vT=/^[^\/()?;#]+/;function Rh(e){let t=e.match(vT);return t?t[0]:""}var yT=/^[^\/()?;=#]+/;function _T(e){let t=e.match(yT);return t?t[0]:""}var bT=/^[^=?&#]+/;function wT(e){let t=e.match(bT);return t?t[0]:""}var ET=/^[^&#]+/;function CT(e){let t=e.match(ET);return t?t[0]:""}var Lh=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ie([],{}):new ie([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[V]=new ie(t,n)),r}parseSegment(){let t=Rh(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(t),new Gn(gl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=_T(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Rh(this.remaining);i&&(r=i,this.capture(r))}t[gl(n)]=gl(r)}parseQueryParam(t){let n=wT(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=CT(this.remaining);s&&(r=s,this.capture(r))}let i=s_(n),o=s_(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Rh(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new I(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=V);let s=this.parseChildren();n[o??V]=Object.keys(s).length===1&&s[V]?s[V]:new ie([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new I(4011,!1)}};function C_(e){return e.segments.length>0?new ie([],{[V]:e}):e}function D_(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=D_(i);if(r===V&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new ie(e.segments,t);return DT(n)}function DT(e){if(e.numberOfChildren===1&&e.children[V]){let t=e.children[V];return new ie(e.segments.concat(t.segments),t.children)}return e}function Kn(e){return e instanceof zt}function I_(e,t,n=null,r=null,i=new Wn){let o=S_(e);return T_(o,t,n,r,i)}function S_(e){let t;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ie(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=C_(r);return t??i}function T_(e,t,n,r,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return Nh(o,o,o,n,r,i);let s=IT(t);if(s.toRoot())return Nh(o,o,new ie([],{}),n,r,i);let a=ST(s,o,e),c=a.processChildren?hs(a.segmentGroup,a.index,s.commands):A_(a.segmentGroup,a.index,s.commands);return Nh(o,a.segmentGroup,c,n,r,i)}function vl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ms(e){return typeof e=="object"&&e!=null&&e.outlets}function a_(e,t,n){e||="\u0275";let r=new zt;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function Nh(e,t,n,r,i,o){let s={};for(let[l,u]of Object.entries(r??{}))s[l]=Array.isArray(u)?u.map(d=>a_(l,d,o)):a_(l,u,o);let a;e===t?a=n:a=M_(e,t,n);let c=C_(D_(a));return new zt(c,s,i)}function M_(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=M_(o,t,n)}),new ie(e.segments,r)}var yl=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&vl(r[0]))throw new I(4003,!1);let i=r.find(ms);if(i&&i!==aT(r))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function IT(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new yl(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new yl(n,t,r)}var ki=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function ST(e,t,n){if(e.isAbsolute)return new ki(t,!0,0);if(!n)return new ki(t,!1,NaN);if(n.parent===null)return new ki(n,!0,0);let r=vl(e.commands[0])?0:1,i=n.segments.length-1+r;return TT(n,i,e.numberOfDoubleDots)}function TT(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new I(4005,!1);i=r.segments.length}return new ki(r,!1,i-o)}function MT(e){return ms(e[0])?e[0].outlets:{[V]:e}}function A_(e,t,n){if(e??=new ie([],{}),e.segments.length===0&&e.hasChildren())return hs(e,t,n);let r=AT(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new ie(e.segments.slice(0,r.pathIndex),{});return o.children[V]=new ie(e.segments.slice(r.pathIndex),e.children),hs(o,0,i)}else return r.match&&i.length===0?new ie(e.segments,{}):r.match&&!e.hasChildren()?jh(e,t,n):r.match?hs(e,0,i):jh(e,t,n)}function hs(e,t,n){if(n.length===0)return new ie(e.segments,{});{let r=MT(n),i={};if(Object.keys(r).some(o=>o!==V)&&e.children[V]&&e.numberOfChildren===1&&e.children[V].segments.length===0){let o=hs(e.children[V],t,n);return new ie(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=A_(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ie(e.segments,i)}}function AT(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ms(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!l_(c,l,s))return o;r+=2}else{if(!l_(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function jh(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ms(o)){let c=xT(o.outlets);return new ie(r,c)}if(i===0&&vl(n[0])){let c=e.segments[t];r.push(new Gn(c.path,c_(n[0]))),i++;continue}let s=ms(o)?o.outlets[V]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&vl(a)?(r.push(new Gn(s,c_(a))),i+=2):(r.push(new Gn(s,{})),i++)}return new ie(r,{})}function xT(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=jh(new ie([],{}),0,r))}),t}function c_(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function l_(e,t,n){return e==n.path&&on(t,n.parameters)}var ps="imperative",Le=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(Le||{}),ht=class{id;url;constructor(t,n){this.id=t,this.url=n}},Lr=class extends ht{type=Le.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends ht{urlAfterRedirects;type=Le.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xe=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Xe||{}),vs=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(vs||{}),St=class extends ht{reason;code;type=Le.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function x_(e){return e instanceof St&&(e.code===Xe.Redirect||e.code===Xe.SupersededByNewNavigation)}var In=class extends ht{reason;code;type=Le.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},jr=class extends ht{error;target;type=Le.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fi=class extends ht{urlAfterRedirects;state;type=Le.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_l=class extends ht{urlAfterRedirects;state;type=Le.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bl=class extends ht{urlAfterRedirects;state;shouldActivate;type=Le.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},wl=class extends ht{urlAfterRedirects;state;type=Le.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},El=class extends ht{urlAfterRedirects;state;type=Le.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cl=class{route;type=Le.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Dl=class{route;type=Le.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Il=class{snapshot;type=Le.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sl=class{snapshot;type=Le.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tl=class{snapshot;type=Le.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ml=class{snapshot;type=Le.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Li=class{},ji=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function RT(e){return!(e instanceof Li)&&!(e instanceof ji)}var Al=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Bi(this.rootInjector)}},Bi=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Al(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(N(he))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xl=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Vh(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Vh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Uh(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Uh(t,this._root).map(n=>n.value)}};function Vh(e,t){if(e===t.value)return t;for(let n of t.children){let r=Vh(e,n);if(r)return r}return null}function Uh(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Uh(e,n);if(r.length)return r.unshift(t),r}return[]}var ft=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Oi(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ys=class extends xl{snapshot;constructor(t,n){super(t),this.snapshot=n,Kh(this,t)}toString(){return this.snapshot.toString()}};function R_(e,t){let n=NT(e,t),r=new Ue([new Gn("",{})]),i=new Ue({}),o=new Ue({}),s=new Ue({}),a=new Ue(""),c=new it(r,i,s,a,o,V,e,n.root);return c.snapshot=n.root,new ys(new ft(c,[]),n)}function NT(e,t){let n={},r={},i={},s=new Pr([],n,i,"",r,V,e,null,{},t);return new _s("",new ft(s,[]))}var it=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(F(l=>l[Es]))??K(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(F(t=>Fr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(F(t=>Fr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Rl(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:D(D({},t.params),e.params),data:D(D({},t.data),e.data),resolve:D(D(D(D({},e.data),t.data),i?.data),e._resolvedData)}:r={params:D({},e.params),data:D({},e.data),resolve:D(D({},e.data),e._resolvedData??{})},i&&O_(i)&&(r.resolve[Es]=i.title),r}var Pr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Es]}constructor(t,n,r,i,o,s,a,c,l,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l,this._environmentInjector=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},_s=class extends xl{url;constructor(t,n){super(n),this.url=t,Kh(this,n)}toString(){return N_(this._root)}};function Kh(e,t){t.value._routerState=e,t.children.forEach(n=>Kh(e,n))}function N_(e){let t=e.children.length>0?` { ${e.children.map(N_).join(", ")} } `:"";return`${e.value}${t}`}function Oh(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,on(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),on(t.params,n.params)||e.paramsSubject.next(n.params),sT(t.url,n.url)||e.urlSubject.next(n.url),on(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Bh(e,t){let n=on(e.params,t.params)&&dT(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Bh(e.parent,t.parent))}function O_(e){return typeof e.title=="string"||e.title===null}var k_=new A(""),Ds=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=V;activateEvents=new De;deactivateEvents=new De;attachEvents=new De;detachEvents=new De;routerOutletData=Ay();parentContexts=b(Bi);location=b(Ei);changeDetector=b(xr);inputBinder=b(Pl,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new $h(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=me({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_n]})}return e})(),$h=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===it?this.route:t===Bi?this.childContexts:t===k_?this.outletData:this.parent.get(t,n)}},Pl=new A("");var Yh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Se({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Bn(0,"router-outlet")},dependencies:[Ds],encapsulation:2})}return e})();function Zh(e){let t=e.children&&e.children.map(Zh),n=t?Z(D({},e),{children:t}):D({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==V&&(n.component=Yh),n}function OT(e,t,n){let r=bs(e,t._root,n?n._root:void 0);return new ys(r,t)}function bs(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=kT(e,t,n);return new ft(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>bs(e,a)),s}}let r=PT(t.value),i=t.children.map(o=>bs(e,o));return new ft(r,i)}}function kT(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return bs(e,r,i);return bs(e,r)})}function PT(e){return new it(new Ue(e.url),new Ue(e.params),new Ue(e.queryParams),new Ue(e.fragment),new Ue(e.data),e.outlet,e.component,e)}var Vi=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},P_="ngNavigationCancelingError";function Nl(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Kn(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=F_(!1,Xe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function F_(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[P_]=!0,n.cancellationCode=t,n}function FT(e){return L_(e)&&Kn(e.url)}function L_(e){return!!e&&e[P_]}var Hh=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Oh(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Oi(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Oi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Oi(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Oi(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ml(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Sl(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Oh(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Oh(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Ol=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Pi=class{component;route;constructor(t,n){this.component=t,this.route=n}};function LT(e,t,n){let r=e._root,i=t?t._root:null;return fs(r,i,n,[r.value])}function jT(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function $i(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!md(e)?e:t.get(e):r}function fs(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Oi(t);return e.children.forEach(s=>{VT(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>gs(a,n.getContext(s),i)),i}function VT(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=UT(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ol(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fs(e,t,a?a.children:null,r,i):fs(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pi(a.outlet.component,s))}else s&&gs(t,a,i),i.canActivateChecks.push(new Ol(r)),o.component?fs(e,null,a?a.children:null,r,i):fs(e,null,n,r,i);return i}function UT(e,t,n){if(typeof n=="function")return Oe(t._environmentInjector,()=>n(e,t));switch(n){case"pathParamsChange":return!kr(e.url,t.url);case"pathParamsOrQueryParamsChange":return!kr(e.url,t.url)||!on(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bh(e,t)||!on(e.queryParams,t.queryParams);default:return!Bh(e,t)}}function gs(e,t,n){let r=Oi(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?gs(s,t.children.getContext(o),n):gs(s,null,n):gs(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Pi(t.outlet.component,i)):n.canDeactivateChecks.push(new Pi(null,i)):n.canDeactivateChecks.push(new Pi(null,i))}function Is(e){return typeof e=="function"}function BT(e){return typeof e=="boolean"}function $T(e){return e&&Is(e.canLoad)}function HT(e){return e&&Is(e.canActivate)}function qT(e){return e&&Is(e.canActivateChild)}function zT(e){return e&&Is(e.canDeactivate)}function GT(e){return e&&Is(e.canMatch)}function j_(e){return e instanceof ar||e?.name==="EmptyError"}var fl=Symbol("INITIAL_VALUE");function Ui(){return Ze(e=>Ju(e.map(t=>t.pipe(nt(1),Xu(fl)))).pipe(F(t=>{for(let n of t)if(n!==!0){if(n===fl)return fl;if(n===!1||WT(n))return n}return!0}),st(t=>t!==fl),nt(1)))}function WT(e){return Kn(e)||e instanceof Vi}function V_(e){return e.aborted?K(void 0).pipe(nt(1)):new q(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function U_(e){return bo(V_(e))}function KT(e){return tt(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=t;return o.length===0&&i.length===0?K(Z(D({},t),{guardsResult:!0})):YT(o,n,r).pipe(tt(s=>s&&BT(s)?ZT(n,i,e):K(s)),F(s=>Z(D({},t),{guardsResult:s})))})}function YT(e,t,n){return te(e).pipe(tt(r=>tM(r.component,r.route,n,t)),dn(r=>r!==!0,!0))}function ZT(e,t,n){return te(t).pipe(si(r=>oi(QT(r.route.parent,n),JT(r.route,n),eM(e,r.path),XT(e,r.route))),dn(r=>r!==!0,!0))}function JT(e,t){return e!==null&&t&&t(new Tl(e)),K(!0)}function QT(e,t){return e!==null&&t&&t(new Il(e)),K(!0)}function XT(e,t){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return K(!0);let r=n.map(i=>vo(()=>{let o=t._environmentInjector,s=$i(i,o),a=HT(s)?s.canActivate(t,e):Oe(o,()=>s(t,e));return Vr(a).pipe(dn())}));return K(r).pipe(Ui())}function eM(e,t){let n=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(o=>jT(o)).filter(o=>o!==null).map(o=>vo(()=>{let s=o.guards.map(a=>{let c=o.node._environmentInjector,l=$i(a,c),u=qT(l)?l.canActivateChild(n,e):Oe(c,()=>l(n,e));return Vr(u).pipe(dn())});return K(s).pipe(Ui())}));return K(i).pipe(Ui())}function tM(e,t,n,r){let i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let a=t._environmentInjector,c=$i(s,a),l=zT(c)?c.canDeactivate(e,t,n,r):Oe(a,()=>c(e,t,n,r));return Vr(l).pipe(dn())});return K(o).pipe(Ui())}function nM(e,t,n,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return K(!0);let s=o.map(a=>{let c=$i(a,e),l=$T(c)?c.canLoad(t,n):Oe(e,()=>c(t,n)),u=Vr(l);return i?u.pipe(U_(i)):u});return K(s).pipe(Ui(),B_(r))}function B_(e){return Wu(Yt(t=>{if(typeof t!="boolean")throw Nl(e,t)}),F(t=>t===!0))}function rM(e,t,n,r,i){let o=t.canMatch;if(!o||o.length===0)return K(!0);let s=o.map(a=>{let c=$i(a,e),l=GT(c)?c.canMatch(t,n):Oe(e,()=>c(t,n));return Vr(l).pipe(U_(i))});return K(s).pipe(Ui(),B_(r))}var Dn=class e extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,e.prototype)}},ws=class e extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,e.prototype)}};function iM(e){throw new I(4e3,!1)}function oM(e){throw F_(!1,Xe.GuardRejected)}var qh=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[V])throw iM(`${t.redirectTo}`);i=i.children[V]}}async applyRedirectCommands(t,n,r,i,o){let s=await sM(n,i,o);if(s instanceof zt)throw new ws(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new ws(a);return a}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new zt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new ie(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new I(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function sM(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:u,title:d,paramMap:h,queryParamMap:f}=t;return ml(Vr(Oe(n,()=>r({params:l,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d,paramMap:h,queryParamMap:f}))))}function aM(e,t){return e.providers&&!e._injector&&(e._injector=Xo(e.providers,t,`Route: ${e.path}`)),e._injector??t}function qt(e){return e.outlet||V}function cM(e,t){let n=e.filter(r=>qt(r)===t);return n.push(...e.filter(r=>qt(r)!==t)),n}var zh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lM(e,t,n,r,i,o){let s=$_(e,t,n);return s.matched?(r=aM(t,r),rM(r,t,n,i,o).pipe(F(a=>a===!0?s:D({},zh)))):K(s)}function $_(e,t,n){if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?D({},zh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||p_)(n,e,t);if(!i)return D({},zh);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?D(D({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function u_(e,t,n,r){return n.length>0&&fM(e,n,r)?{segmentGroup:new ie(t,dM(r,new ie(n,e.children))),slicedSegments:[]}:n.length===0&&hM(e,n,r)?{segmentGroup:new ie(e.segments,uM(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new ie(e.segments,e.children),slicedSegments:n}}function uM(e,t,n,r){let i={};for(let o of n)if(Fl(e,t,o)&&!r[qt(o)]){let s=new ie([],{});i[qt(o)]=s}return D(D({},r),i)}function dM(e,t){let n={};n[V]=t;for(let r of e)if(r.path===""&&qt(r)!==V){let i=new ie([],{});n[qt(r)]=i}return n}function fM(e,t,n){return n.some(r=>Fl(e,t,r)&&qt(r)!==V)}function hM(e,t,n){return n.some(r=>Fl(e,t,r))}function Fl(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pM(e,t,n){return t.length===0&&!e.children[n]}var Gh=class{};async function gM(e,t,n,r,i,o,s="emptyOnly",a){return new Wh(e,t,n,r,i,s,o,a).recognize()}var mM=31,Wh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new qh(this.urlSerializer,this.urlTree)}noMatchError(t){return new I(4002,`'${t.segmentGroup}'`)}async recognize(){let t=u_(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),i=new ft(r,n),o=new _s("",i),s=I_(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let n=new Pr([],Object.freeze({}),Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),V,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,t,V,n),rootSnapshot:n}}catch(r){if(r instanceof ws)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Dn?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,o);let s=await this.processSegment(t,n,r,r.segments,i,!0,o);return s instanceof ft?[s]:[]}async processChildren(t,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],u=cM(n,c),d=await this.processSegmentGroup(t,u,l,c,i);s.push(...d)}let a=H_(s);return vM(a),a}async processSegment(t,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a)}catch(l){if(l instanceof Dn||j_(l))continue;throw l}if(pM(r,i,o))return new Gh;throw new Dn(r)}async processSegmentAgainstRoute(t,n,r,i,o,s,a,c){if(qt(r)!==s&&(s===V||!Fl(i,o,r)))throw new Dn(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c);throw new Dn(i)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=$_(n,i,o);if(!c)throw new Dn(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mM&&(this.allowRedirects=!1));let f=new Pr(o,l,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,d_(i),qt(i),i.component??i._loadedComponent??null,i,f_(i),t),p=Rl(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let v=await this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t),w=await this.applyRedirects.lineralizeSegments(i,v);return this.processSegment(t,r,n,w.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ml(lM(n,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Dn(n);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),l=r._loadedInjector??t,{parameters:u,consumedSegments:d,remainingSegments:h}=a,f=new Pr(d,u,Object.freeze(D({},this.urlTree.queryParams)),this.urlTree.fragment,d_(r),qt(r),r.component??r._loadedComponent??null,r,f_(r),t),p=Rl(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:v,slicedSegments:w}=u_(n,d,h,c);if(w.length===0&&v.hasChildren()){let S=await this.processChildren(l,c,v,f);return new ft(f,S)}if(c.length===0&&w.length===0)return new ft(f,[]);let _=qt(r)===o,R=await this.processSegment(l,c,v,w,_?V:o,!0,f);return new ft(f,R instanceof ft?[R]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0){let o=n._loadedNgModuleFactory;return o&&!n._loadedInjector&&(n._loadedInjector=o.create(t).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ml(nM(t,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,n._loadedNgModuleFactory=o.factory,o}throw oM(n)}return{routes:[],injector:t}}};function vM(e){e.sort((t,n)=>t.value.outlet===V?-1:n.value.outlet===V?1:t.value.outlet.localeCompare(n.value.outlet))}function yM(e){let t=e.value.routeConfig;return t&&t.path===""}function H_(e){let t=[],n=new Set;for(let r of e){if(!yM(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=H_(r.children);t.push(new ft(r.value,i))}return t.filter(r=>!n.has(r))}function d_(e){return e.data||{}}function f_(e){return e.resolve||{}}function _M(e,t,n,r,i,o,s){return tt(async a=>{let{state:c,tree:l}=await gM(e,t,n,r,a.extractedUrl,i,o,s);return Z(D({},a),{targetSnapshot:c,urlAfterRedirects:l})})}function bM(e){return tt(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return K(t);let i=new Set(r.map(a=>a.route)),o=new Set;for(let a of i)if(!o.has(a))for(let c of q_(a))o.add(c);let s=0;return te(o).pipe(si(a=>i.has(a)?wM(a,n,e):(a.data=Rl(a,a.parent,e).resolve,K(void 0))),Yt(()=>s++),Pa(1),tt(a=>s===o.size?K(t):Be))})}function q_(e){let t=e.children.map(n=>q_(n)).flat();return[e,...t]}function wM(e,t,n){let r=e.routeConfig,i=e._resolve;return r?.title!==void 0&&!O_(r)&&(i[Es]=r.title),vo(()=>(e.data=Rl(e,e.parent,n).resolve,EM(i,e,t).pipe(F(o=>(e._resolvedData=o,e.data=D(D({},e.data),o),null)))))}function EM(e,t,n){let r=Ph(e);if(r.length===0)return K({});let i={};return te(r).pipe(tt(o=>CM(e[o],t,n).pipe(dn(),Yt(s=>{if(s instanceof Vi)throw Nl(new Wn,s);i[o]=s}))),Pa(1),F(()=>i),yo(o=>j_(o)?Be:Zu(o)))}function CM(e,t,n){let r=t._environmentInjector,i=$i(e,r),o=i.resolve?i.resolve(t,n):Oe(r,()=>i(t,n));return Vr(o)}function h_(e){return Ze(t=>{let n=e(t);return n?te(n).pipe(F(()=>t)):K(t)})}var Jh=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===V);return r}getResolvedTitleForRoute(n){return n.data[Es]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>b(z_),providedIn:"root"})}return e})(),z_=(()=>{class e extends Jh{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(N(i_))};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Hi=new A("",{factory:()=>({})}),Ss=new A(""),G_=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=b(hh);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await m_(Oe(n,()=>r.loadComponent())),s=await Y_(K_(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await W_(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,r._loadedNgModuleFactory=o.factory,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function W_(e,t,n,r){let i=await m_(Oe(n,()=>e.loadChildren())),o=await Y_(K_(i)),s;o instanceof zc||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(e);let a,c,l=!1,u;return Array.isArray(s)?(c=s,l=!0):(a=s.create(n).injector,u=s,c=a.get(Ss,[],{optional:!0,self:!0}).flat()),{routes:c.map(Zh),injector:a,factory:u}}function DM(e){return e&&typeof e=="object"&&"default"in e}function K_(e){return DM(e)?e.default:e}async function Y_(e){return e}var Ll=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>b(IM),providedIn:"root"})}return e})(),IM=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Z_=new A("");var SM=()=>{},J_=new A(""),Q_=(()=>{class e{currentNavigation=B(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=B(null);events=new fe;transitionAbortWithErrorSubject=new fe;configLoader=b(G_);environmentInjector=b(he);destroyRef=b(wt);urlSerializer=b(Cs);rootContexts=b(Bi);location=b(xi);inputBindingEnabled=b(Pl,{optional:!0})!==null;titleStrategy=b(Jh);options=b(Hi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=b(Ll);createViewTransition=b(Z_,{optional:!0});navigationErrorHandler=b(J_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Cl(i)),r=i=>this.events.next(new Dl(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Ie(()=>{this.transitions?.next(Z(D({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Ue(null),this.transitions.pipe(st(r=>r!==null),Ze(r=>{let i=!1,o=new AbortController,s=()=>!i&&this.currentTransition?.id===r.id;return K(r).pipe(Ze(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),Be;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?Z(D({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&u!=="reload")return this.events.next(new In(a.id,this.urlSerializer.serialize(a.rawUrl),"",vs.IgnoredSameUrlNavigation)),a.resolve(!1),Be;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return K(a).pipe(Ze(d=>(this.events.next(new Lr(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Be:Promise.resolve(d))),_M(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Yt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=d.urlAfterRedirects,f));let h=new Fi(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:d,extractedUrl:h,source:f,restoredState:p,extras:v}=a,w=new Lr(d,this.urlSerializer.serialize(h),f,p);this.events.next(w);let _=R_(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=Z(D({},a),{targetSnapshot:_,urlAfterRedirects:h,extras:Z(D({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(R=>(R.finalUrl=h,R)),K(r)}else return this.events.next(new In(a.id,this.urlSerializer.serialize(a.extractedUrl),"",vs.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Be}),F(a=>{let c=new _l(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r=Z(D({},a),{guards:LT(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),KT(a=>this.events.next(a)),Ze(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw Nl(this.urlSerializer,a.guardsResult);let c=new bl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return Be;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",Xe.GuardRejected),Be;if(a.guards.canActivateChecks.length===0)return K(a);let l=new wl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(l),!s())return Be;let u=!1;return K(a).pipe(bM(this.paramsInheritanceStrategy),Yt({next:()=>{u=!0;let d=new El(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)},complete:()=>{u||this.cancelNavigationTransition(a,"",Xe.NoDataFromResolver)}}))}),h_(a=>{let c=u=>{let d=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let h=u._environmentInjector;d.push(this.configLoader.loadComponent(h,u.routeConfig).then(f=>{u.component=f}))}for(let h of u.children)d.push(...c(h));return d},l=c(a.targetSnapshot.root);return l.length===0?K(a):te(Promise.all(l).then(()=>a))}),h_(()=>this.afterPreactivation()),Ze(()=>{let{currentSnapshot:a,targetSnapshot:c}=r,l=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return l?te(l).pipe(F(()=>r)):K(r)}),nt(1),F(a=>{let c=OT(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=Z(D({},a),{targetRouterState:c}),this.currentNavigation.update(l=>(l.targetRouterState=c,l)),this.events.next(new Li),s()&&(new Hh(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,l=>this.events.next(l),this.inputBindingEnabled).activate(this.rootContexts),s()&&(i=!0,this.currentNavigation.update(l=>(l.abort=SM,l)),this.lastSuccessfulNavigation.set(Ie(this.currentNavigation)),this.events.next(new sn(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),bo(V_(o.signal).pipe(st(()=>!i&&!r.targetRouterState),Yt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Xe.Aborted)}))),Yt({complete:()=>{i=!0}}),bo(this.transitionAbortWithErrorSubject.pipe(Yt(a=>{throw a}))),_o(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Xe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),yo(a=>{if(i=!0,this.destroyed)return r.resolve(!1),Be;if(L_(a))this.events.next(new St(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),FT(a)?this.events.next(new ji(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let c=new jr(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let l=Oe(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(l instanceof Vi){let{message:u,cancellationCode:d}=Nl(this.urlSerializer,l);this.events.next(new St(r.id,this.urlSerializer.serialize(r.extractedUrl),u,d)),this.events.next(new ji(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(c),a}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Be}))}))}cancelNavigationTransition(n,r,i){let o=new St(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ie(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function TM(e){return e!==ps}var X_=new A("");var eb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>b(MM),providedIn:"root"})}return e})(),kl=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}shouldDestroyInjector(t){return!0}},MM=(()=>{class e extends kl{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bn(e)))(i||e)}})();static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Qh=(()=>{class e{urlSerializer=b(Cs);options=b(Hi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=b(xi);urlHandlingStrategy=b(Ll);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof zt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=R_(null,b(he));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:()=>b(AM),providedIn:"root"})}return e})(),AM=(()=>{class e extends Qh{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Lr?this.updateStateMemento():n instanceof In?this.commitTransition(r):n instanceof Fi?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Li?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof St&&!x_(n)?this.restoreHistory(r):n instanceof jr?this.restoreHistory(r,!0):n instanceof sn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=D(D({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=D(D({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bn(e)))(i||e)}})();static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Xh(e,t){e.events.pipe(st(n=>n instanceof sn||n instanceof St||n instanceof jr||n instanceof In),F(n=>n instanceof sn||n instanceof In?0:(n instanceof St?n.code===Xe.Redirect||n.code===Xe.SupersededByNewNavigation:!1)?2:1),st(n=>n!==2),nt(1)).subscribe(()=>{t()})}var tb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Gt=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=b(ih);stateManager=b(Qh);options=b(Hi,{optional:!0})||{};pendingTasks=b(yn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=b(Q_);urlSerializer=b(Cs);location=b(xi);urlHandlingStrategy=b(Ll);injector=b(he);_events=new fe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=b(eb);injectorCleanup=b(X_,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=b(Ss,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!b(Pl,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ve;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ie(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof St&&r.code!==Xe.Redirect&&r.code!==Xe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sn)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof ji){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=D({scroll:i.extras.scroll,browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||TM(i.source)},s);this.scheduleNavigation(a,ps,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}RT(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ps,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=D({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(dt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ie(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Zh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=D(D({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=S_(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return T_(d,n,u,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Kn(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ps,null,r)}navigate(n,r={skipLocationChange:!1}){return xM(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(pn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=D({},tb):r===!1?i=D({},nb):i=r,Kn(n))return o_(this.currentUrlTree,n,i);let o=this.parseUrl(n);return o_(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});let u=this.pendingTasks.add();return Xh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function xM(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new I(4008,!1)}var an=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=B(null);get href(){return Ie(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new fe;applicationErrorHandler=b(dt);options=b(Hi,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(b(new Qc("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){this.subscription===void 0&&(this.subscription=this.router.events.subscribe(n=>{n instanceof sn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Kn(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Kn(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(Y(Gt),Y(it),Wo("tabindex"),Y(En),Y(rn),Y(Ai))};static \u0275dir=me({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Q("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ci("href",i.reactiveHref(),qf)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Rr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Rr],replaceUrl:[2,"replaceUrl","replaceUrl",Rr],routerLink:"routerLink"},features:[_n]})}return e})();var OM=new A("");function ep(e,...t){return kt([{provide:Ss,multi:!0,useValue:e},[],{provide:it,useFactory:kM},{provide:Kc,multi:!0,useFactory:PM},t.map(n=>n.\u0275providers)])}function kM(){return b(Gt).routerState.root}function PM(){let e=b(at);return t=>{let n=e.get(Ht);if(t!==n.components[0])return;let r=e.get(Gt),i=e.get(FM);e.get(LM)===1&&r.initialNavigation(),e.get(jM,null,{optional:!0})?.setUpPreloading(),e.get(OM,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FM=new A("",{factory:()=>new fe}),LM=new A("",{factory:()=>1});var jM=new A("");var jl=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-home"]],decls:8,vars:0,consts:[[1,"welcome-container"],[1,"welcome-content"],["routerLink","/menu",1,"btn","btn-primary","btn-start"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"div",1)(2,"h1"),y(3,"INVENTARIO ADEX"),g(),m(4,"p"),y(5,"Sistema de Gesti\xF3n del \xC1rea de Soporte Inform\xE1tico"),g(),m(6,"button",2),y(7," Start "),g()()())},dependencies:[an],styles:[".welcome-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:#0055a4}.welcome-content[_ngcontent-%COMP%]{text-align:center;color:#fff;padding:2rem}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:2rem;opacity:.9}.btn-start[_ngcontent-%COMP%]{padding:1rem 3rem;font-size:1.5rem;background:#fff;color:#0055a4}.btn-start[_ngcontent-%COMP%]:hover{background:#004080;color:#fff}"]})};var Vl=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-menu"]],decls:21,vars:0,consts:[[1,"menu-container"],[1,"header"],["routerLink","/",1,"btn","btn-secondary"],[1,"menu-options"],["routerLink","/equipos",1,"menu-card"],[1,"card-icon"],["routerLink","/ambientes",1,"menu-card"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"header",1)(2,"h1"),y(3,"Men\xFA Principal"),g(),m(4,"a",2),y(5,"Volver"),g()(),m(6,"div",3)(7,"a",4)(8,"div",5),y(9,"\u{1F5A5}\uFE0F"),g(),m(10,"h2"),y(11,"Equipos"),g(),m(12,"p"),y(13,"Ver y gestionar equipos"),g()(),m(14,"a",6)(15,"div",5),y(16,"\u{1F3E2}"),g(),m(17,"h2"),y(18,"Ambientes"),g(),m(19,"p"),y(20,"Ver y gestionar ambientes"),g()()()())},dependencies:[an],styles:[".menu-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:#f5f5f5}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0;color:#333}.menu-options[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center;flex-wrap:wrap}.menu-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:3rem;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000001a;text-decoration:none;color:#333;transition:transform .2s,box-shadow .2s;min-width:250px}.menu-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.card-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:1rem}h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#667eea}p[_ngcontent-%COMP%]{margin:0;color:#666}"]})};var fb=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Y(En),Y(rn))};static \u0275dir=me({type:e})}return e})(),rp=(()=>{class e extends fb{static \u0275fac=(()=>{let n;return function(i){return(n||(n=bn(e)))(i||e)}})();static \u0275dir=me({type:e,features:[Ct]})}return e})(),Kl=new A("");var VM={provide:Kl,useExisting:Ot(()=>Zn),multi:!0};function UM(){let e=Dt()?Dt().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var BM=new A(""),Zn=(()=>{class e extends fb{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!UM())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Y(En),Y(rn),Y(BM,8))};static \u0275dir=me({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Q("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[$n([VM]),Ct]})}return e})();function $M(e){return e==null||HM(e)===0}function HM(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var ip=new A(""),hb=new A("");function qM(e){return $M(e.value)?{required:!0}:null}function rb(e){return null}function pb(e){return e!=null}function gb(e){return Vn(e)?te(e):e}function mb(e){let t={};return e.forEach(n=>{t=n!=null?D(D({},t),n):t}),Object.keys(t).length===0?null:t}function vb(e,t){return t.map(n=>n(e))}function zM(e){return!e.validate}function yb(e){return e.map(t=>zM(t)?t:n=>t.validate(n))}function GM(e){if(!e)return null;let t=e.filter(pb);return t.length==0?null:function(n){return mb(vb(n,t))}}function op(e){return e!=null?GM(yb(e)):null}function WM(e){if(!e)return null;let t=e.filter(pb);return t.length==0?null:function(n){let r=vb(n,t).map(gb);return Qu(r).pipe(F(mb))}}function sp(e){return e!=null?WM(yb(e)):null}function ib(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function KM(e){return e._rawValidators}function YM(e){return e._rawAsyncValidators}function tp(e){return e?Array.isArray(e)?e:[e]:[]}function Bl(e,t){return Array.isArray(e)?e.includes(t):e===t}function ob(e,t){let n=tp(t);return tp(e).forEach(i=>{Bl(n,i)||n.push(i)}),n}function sb(e,t){return tp(t).filter(n=>!Bl(e,n))}var $l=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=op(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=sp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Gi=class extends $l{name;get formDirective(){return null}get path(){return null}},Ns=class extends $l{_parent=null;name=null;valueAccessor=null},Hl=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Wi=(()=>{class e extends Hl{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Y(Ns,2))};static \u0275dir=me({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ar("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ct]})}return e})(),Yl=(()=>{class e extends Hl{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Y(Gi,10))};static \u0275dir=me({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ar("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ct]})}return e})();var Ts="VALID",Ul="INVALID",qi="PENDING",Ms="DISABLED",Yn=class{},ql=class extends Yn{value;source;constructor(t,n){super(),this.value=t,this.source=n}},xs=class extends Yn{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Rs=class extends Yn{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},zi=class extends Yn{status;source;constructor(t,n){super(),this.status=t,this.source=n}},np=class extends Yn{source;constructor(t){super(),this.source=t}},zl=class extends Yn{source;constructor(t){super(),this.source=t}};function _b(e){return(Zl(e)?e.validators:e)||null}function ZM(e){return Array.isArray(e)?op(e):e||null}function bb(e,t){return(Zl(t)?t.asyncValidators:e)||null}function JM(e){return Array.isArray(e)?sp(e):e||null}function Zl(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function QM(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new I(1e3,"");if(!r[n])throw new I(1001,"")}function XM(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new I(1002,"")})}var Gl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Ie(this.statusReactive)}set status(t){Ie(()=>this.statusReactive.set(t))}_status=Ge(()=>this.statusReactive());statusReactive=B(void 0);get valid(){return this.status===Ts}get invalid(){return this.status===Ul}get pending(){return this.status==qi}get disabled(){return this.status===Ms}get enabled(){return this.status!==Ms}errors;get pristine(){return Ie(this.pristineReactive)}set pristine(t){Ie(()=>this.pristineReactive.set(t))}_pristine=Ge(()=>this.pristineReactive());pristineReactive=B(!0);get dirty(){return!this.pristine}get touched(){return Ie(this.touchedReactive)}set touched(t){Ie(()=>this.touchedReactive.set(t))}_touched=Ge(()=>this.touchedReactive());touchedReactive=B(!1);get untouched(){return!this.touched}_events=new fe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ob(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ob(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(sb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(sb(t,this._rawAsyncValidators))}hasValidator(t){return Bl(this._rawValidators,t)}hasAsyncValidator(t){return Bl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Z(D({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Rs(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Rs(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Z(D({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new xs(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new xs(!0,r))}markAsPending(t={}){this.status=qi;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new zi(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Z(D({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ms,this.errors=null,this._forEachChild(i=>{i.disable(Z(D({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ql(this.value,r)),this._events.next(new zi(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(D({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ts,this._forEachChild(r=>{r.enable(Z(D({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Z(D({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ts||this.status===qi)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ql(this.value,n)),this._events.next(new zi(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Z(D({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ms:Ts}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=qi,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=gb(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new zi(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new De,this.statusChanges=new De}_calculateStatus(){return this._allControlsDisabled()?Ms:this.errors?Ul:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qi)?qi:this._anyControlsHaveStatus(Ul)?Ul:Ts}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new xs(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Rs(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Zl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=ZM(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=JM(this._rawAsyncValidators)}},Wl=class extends Gl{constructor(t,n,r){super(_b(n),bb(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){XM(this,!0,t),Object.keys(t).forEach(r=>{QM(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,Z(D({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new zl(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var ap=new A("",{factory:()=>cp}),cp="always";function eA(e,t){return[...t.path,e]}function wb(e,t,n=cp){Eb(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),nA(e,t),iA(e,t),rA(e,t),tA(e,t)}function ab(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function tA(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Eb(e,t){let n=KM(e);t.validator!==null?e.setValidators(ib(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=YM(e);t.asyncValidator!==null?e.setAsyncValidators(ib(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();ab(t._rawValidators,i),ab(t._rawAsyncValidators,i)}function nA(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Cb(e,t)})}function rA(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Cb(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Cb(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function iA(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function oA(e,t){e==null,Eb(e,t)}function sA(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function aA(e){return Object.getPrototypeOf(e.constructor)===rp}function cA(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function lA(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===Zn?n=o:aA(o)?r=o:i=o}),i||r||n||null}var uA={provide:Gi,useExisting:Ot(()=>Os)},As=Promise.resolve(),Os=(()=>{class e extends Gi{callSetDisabledState;get submitted(){return Ie(this.submittedReactive)}_submitted=Ge(()=>this.submittedReactive());submittedReactive=B(!1);_directives=new Set;form;ngSubmit=new De;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Wl({},op(n),sp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){As.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),wb(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){As.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){As.then(()=>{let r=this._findContainer(n.path),i=new Wl({});oA(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){As.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){As.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),cA(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new np(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)(Y(ip,10),Y(hb,10),Y(ap,8))};static \u0275dir=me({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Q("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[$n([uA]),Ct]})}return e})();function cb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function lb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var dA=class extends Gl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(_b(n),bb(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zl(n)&&(n.nonNullable||n.initialValueIsDefault)&&(lb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new zl(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){cb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){cb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){lb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var fA={provide:Ns,useExisting:Ot(()=>Ur)},ub=Promise.resolve(),Ur=(()=>{class e extends Ns{_changeDetectorRef;callSetDisabledState;control=new dA;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new De;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=lA(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),sA(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){wb(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){ub.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Rr(r);ub.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?eA(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Y(Gi,9),Y(ip,10),Y(hb,10),Y(Kl,10),Y(xr,8),Y(ap,8))};static \u0275dir=me({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[$n([fA]),Ct,_n]})}return e})();var Jl=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=me({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})();var hA={provide:Kl,useExisting:Ot(()=>Ki),multi:!0};function Db(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function pA(e){return e.split(":")[0]}var Ki=(()=>{class e extends rp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=b(Ht).injector;destroyRef=b(wt);cdr=b(xr);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Zo({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Db(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=pA(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bn(e)))(i||e)}})();static \u0275dir=me({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Q("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$n([hA]),Ct]})}return e})(),Ql=(()=>{class e{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Db(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||e)(Y(rn),Y(En),Y(Ki,9))};static \u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})(),gA={provide:Kl,useExisting:Ot(()=>Ib),multi:!0};function db(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function mA(e){return e.split(":")[0]}var Ib=(()=>{class e extends rp{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=mA(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bn(e)))(i||e)}})();static \u0275dir=me({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Q("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[$n([gA]),Ct]})}return e})(),Xl=(()=>{class e{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(db(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(db(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||e)(Y(rn),Y(En),Y(Ib,9))};static \u0275dir=me({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return e})();var vA=(()=>{class e{_validator=rb;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):rb,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=me({type:e,features:[_n]})}return e})();var yA={provide:ip,useExisting:Ot(()=>ks),multi:!0};var ks=(()=>{class e extends vA{required;inputName="required";normalizeInput=Rr;createValidator=n=>qM;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=bn(e)))(i||e)}})();static \u0275dir=me({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ci("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[$n([yA]),Ct]})}return e})();var _A=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=$t({type:e});static \u0275inj=gt({})}return e})();var Yi=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:ap,useValue:n.callSetDisabledState??cp}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=$t({type:e});static \u0275inj=gt({imports:[_A]})}return e})();var Sb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var Zi=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},Ps=class extends Zi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},Ji=class extends Zi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Qi=class extends Zi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},eu=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(eu||{});var Fs=class{constructor(t,{headers:n={},customFetch:r,region:i=eu.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Sb(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ya(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{let{headers:a,method:c,body:l,signal:u,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let v;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?v=JSON.stringify(l):v=l;let w=u;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),u?(w=s.signal,u.addEventListener("abort",()=>s.abort())):w=s.signal);let _=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:v,signal:w}).catch(G=>{throw new Ps(G)}),R=_.headers.get("x-relay-error");if(R&&R==="true")throw new Ji(_);if(!_.ok)throw new Qi(_);let S=((i=_.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),C;return S==="application/json"?C=yield _.json():S==="application/octet-stream"||S==="application/pdf"?C=yield _.blob():S==="text/event-stream"?C=_:S==="multipart/form-data"?C=yield _.formData():C=yield _.text(),{data:C,error:null,response:_}}catch(a){return{data:null,error:a,response:a instanceof Qi||a instanceof Ji?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Ab=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},bA=class{constructor(e){var t,n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=e.urlLengthLimit)!==null&&r!==void 0?r:8e3,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let s=null,a=null,c=null,l=o.status,u=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var f;let _=await o.text();_===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=_:a=JSON.parse(_))}let v=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),w=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&w&&w.length>1&&(c=parseInt(w[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,l=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let v=await o.text();try{s=JSON.parse(v),Array.isArray(s)&&o.status===404&&(a=[],s=null,l=200,u="OK")}catch{o.status===404&&v===""?(l=204,u="No Content"):s={message:v}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,l=200,u="OK"),s&&n.shouldThrowOnError)throw new Ab(s)}return{error:s,data:a,count:c,status:l,statusText:u}});return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c="",l="",u=o?.cause;if(u){var d,h,f,p;let _=(d=u?.message)!==null&&d!==void 0?d:"",R=(h=u?.code)!==null&&h!==void 0?h:"";a=`${(f=o?.name)!==null&&f!==void 0?f:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(p=u?.name)!==null&&p!==void 0?p:"Error"}: ${_}`,R&&(a+=` (${R})`),u?.stack&&(a+=`
${u.stack}`)}else{var v;a=(v=o?.stack)!==null&&v!==void 0?v:""}let w=this.url.toString().length;return o?.name==="AbortError"||o?.code==="ABORT_ERR"?(l="",c="Request was aborted (timeout or manual cancellation)",w>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${w} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(u?.name==="HeadersOverflowError"||u?.code==="UND_ERR_HEADERS_OVERFLOW")&&(l="",c="HTTP headers exceeded server limits (typically 16KB)",w>this.urlLengthLimit&&(c+=`. Your request URL is ${w} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:c,code:l},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},wA=class extends bA{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},Tb=new RegExp("[,()]"),Xi=class extends wA{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Tb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Tb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},EA=class{constructor(e,{headers:t={},schema:n,fetch:r,urlLengthLimit:i=8e3}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET",o=!1,s=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new Xi({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(a.length>0){let c=[...new Set(a)].map(l=>`"${l}"`);o.searchParams.set("columns",c.join(","))}}return new Xi({method:i,url:o,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){let l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){let u=[...new Set(l)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new Xi({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(e,{count:t}={}){var n;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new Xi({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:e}={}){var t;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Xi({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ls(e){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(e)}function CA(e,t){if(Ls(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ls(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DA(e){var t=CA(e,"string");return Ls(t)=="symbol"?t:t+""}function IA(e,t,n){return(t=DA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function tu(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mb(Object(n),!0).forEach(function(r){IA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xb=class Rb{constructor(t,{headers:n={},schema:r,fetch:i,timeout:o,urlLengthLimit:s=8e3}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=s;let a=i??globalThis.fetch;o!==void 0&&o>0?this.fetch=(c,l)=>{let u=new AbortController,d=setTimeout(()=>u.abort(),o),h=l?.signal;if(h){if(h.aborted)return clearTimeout(d),a(c,l);let f=()=>{clearTimeout(d),u.abort()};return h.addEventListener("abort",f,{once:!0}),a(c,tu(tu({},l),{},{signal:u.signal})).finally(()=>{clearTimeout(d),h.removeEventListener("abort",f)})}return a(c,tu(tu({},l),{},{signal:u.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new EA(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new Rb(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),l,u=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(u)),d=r&&Object.values(n).some(u);d?(a="POST",l=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(a="POST",l=n);let h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new Xi({method:a,url:c,headers:h,schema:this.schemaName,body:l,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}};var up=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},dp=up;var Nb="2.94.0";var Ob=`realtime-js/${Nb}`,kb="1.0.0",fp="2.0.0",hp=fp;var js=1e4,Pb=1e3,Fb=100,Jn=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(Jn||{}),xe=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(xe||{}),Tt=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(Tt||{}),pp=(function(e){return e.websocket="websocket",e})(pp||{}),Br=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(Br||{});var nu=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",l=t.payload.event,u=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),v=0;p.setUint8(v++,this.KINDS.userBroadcastPush),p.setUint8(v++,c.length),p.setUint8(v++,a.length),p.setUint8(v++,s.length),p.setUint8(v++,l.length),p.setUint8(v++,d.length),p.setUint8(v++,n),Array.from(c,_=>p.setUint8(v++,_.charCodeAt(0))),Array.from(a,_=>p.setUint8(v++,_.charCodeAt(0))),Array.from(s,_=>p.setUint8(v++,_.charCodeAt(0))),Array.from(l,_=>p.setUint8(v++,_.charCodeAt(0))),Array.from(d,_=>p.setUint8(v++,_.charCodeAt(0)));var w=new Uint8Array(f.byteLength+r.byteLength);return w.set(new Uint8Array(f),0),w.set(new Uint8Array(r),f.byteLength),w.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;if(r===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,n,i)}_decodeUserBroadcast(t,n,r){let i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,l=r.decode(t.slice(c,c+i));c=c+i;let u=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:u,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var eo=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ue=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(ue||{}),mp=(e,t,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=SA(s,e,t,i),o),{}):{}},SA=(e,t,n,r)=>{let i=t.find(a=>a.name===e),o=i?.type,s=n[e];return o&&!r.includes(o)?Lb(o,s):gp(s)},Lb=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return xA(t,n)}switch(e){case ue.bool:return TA(t);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return MA(t);case ue.json:case ue.jsonb:return AA(t);case ue.timestamp:return RA(t);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return gp(t);default:return gp(t)}},gp=e=>e,TA=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},MA=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},AA=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},xA=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o,s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>Lb(t,a))}return e},RA=e=>typeof e=="string"?e.replace(" ","T"):e,ru=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var to=class{constructor(t,n,r={},i=js){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Vs=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=e.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){let o=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(o,(l,u)=>{s[l]||(c[l]=u)}),this.map(s,(l,u)=>{let d=o[l];if(d){let h=u.map(w=>w.presence_ref),f=d.map(w=>w.presence_ref),p=u.filter(w=>f.indexOf(w.presence_ref)<0),v=d.filter(w=>h.indexOf(w.presence_ref)<0);p.length>0&&(a[l]=p),v.length>0&&(c[l]=v)}else a[l]=u}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,n,r,i){let{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var l;let u=(l=t[a])!==null&&l!==void 0?l:[];if(t[a]=this.cloneDeep(c),u.length>0){let d=t[a].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,u,c)}),this.map(s,(a,c)=>{let l=t[a];if(!l)return;let u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),t[a]=l,i(a,l,c),l.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Us=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(Us||{}),Sn=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})(Sn||{});var Bs=class e{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new to(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new eo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Vs(this),this.broadcastEndpointURL=ru(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,l=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Us.PRESENCE]&&this.bindings[Us.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(Sn.CHANNEL_ERROR,f)),this._onClose(()=>t?.(Sn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t?.(Sn.SUBSCRIBED);return}else{let v=this.bindings.postgres_changes,w=(p=v?.length)!==null&&p!==void 0?p:0,_=[];for(let R=0;R<w;R++){let S=v[R],{filter:{event:C,schema:G,table:Ke,filter:J}}=S,de=f&&f[R];if(de&&de.event===C&&e.isFilterValueEqual(de.schema,G)&&e.isFilterValueEqual(de.table,Ke)&&e.isFilterValueEqual(de.filter,J))_.push(Object.assign(Object.assign({},S),{id:de.id}));else{this.unsubscribe(),this.state=xe.errored,t?.(Sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Sn.SUBSCRIBED);return}}).receive("error",f=>{this.state=xe.errored,t?.(Sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(Sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===xe.joined&&t===Us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);let s={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let l=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xe.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new to(this,Tt.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new to(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Fb){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Tt;if(r&&[a,c,l,u].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,v,w;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((w=(v=f.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,v,w,_,R,S;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let C=f.id,G=(p=f.filter)===null||p===void 0?void 0:p.event;return C&&((v=n.ids)===null||v===void 0?void 0:v.includes(C))&&(G==="*"||G?.toLocaleLowerCase()===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{let C=(R=(_=f?.filter)===null||_===void 0?void 0:_.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return C==="*"||C===((S=n?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:v,table:w,commit_timestamp:_,type:R,errors:S}=p;h=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:_,eventType:R,new:{},old:{},errors:S}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&e.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Tt.close,{},t)}_onError(t){this._on(Tt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=mp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=mp(t.columns,t.old_record)),n}};var vp=()=>{},iu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},OA=[1e3,2e3,5e3,1e4],kA=1e4,PA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,$s=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=js,this.transport=null,this.heartbeatIntervalMs=iu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vp,this.ref=0,this.reconnectTimer=null,this.vsn=hp,this.logger=vp,this.conn=null,this.sendBuffer=[],this.serializer=new nu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${pp.websocket}`,this.httpEndpoint=ru(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dp.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Jn.connecting:return Br.Connecting;case Jn.open:return Br.Open;case Jn.closing:return Br.Closing;default:return Br.Closed}}isConnected(){return this.connectionState()===Br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new Bs(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){let{topic:n,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Pb,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},iu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",l)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Jn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Jn.open||this.conn.readyState===Jn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(Tt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([PA],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let o={access_token:n,version:Ob};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Tt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new eo(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},iu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,s,a,c,l,u,d,h,f;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:js,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:iu.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:vp,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:hp,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t?.reconnectAfterMs)!==null&&l!==void 0?l:p=>OA[p-1]||kA,this.vsn){case kb:this.encode=(u=t?.encode)!==null&&u!==void 0?u:(p,v)=>v(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,v)=>v(JSON.parse(p));break;case fp:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var Hs=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function FA(e,t,n){let r=new URL(t,e);if(n)for(let[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function LA(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function jA(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:s}){let a=FA(e.baseUrl,r,i),c=await LA(e.auth),l=await t(a,{method:n,headers:D(D(D({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){let f=d?h:void 0,p=f?.error;throw new Hs(p?.message??`Request failed with status ${l.status}`,{status:l.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function ou(e){return e.join("")}var VA=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:ou(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ou(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ou(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ou(e.namespace)}`}),!0}catch(t){if(t instanceof Hs&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Hs&&n.status===409)return;throw n}}};function no(e){return e.join("")}var UA=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${no(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${no(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${no(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${no(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${no(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${no(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Hs&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Hs&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},jb=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=jA({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new VA(this.client,t),this.tableOps=new UA(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var au=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function cu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var su=class extends au{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},$b=class extends au{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};var BA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$A=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yp=e=>{if(Array.isArray(e))return e.map(n=>yp(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=yp(r)}),t},HA=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function zs(e){"@babel/helpers - typeof";return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function qA(e,t){if(zs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zA(e){var t=qA(e,"string");return zs(t)=="symbol"?t:t+""}function GA(e,t,n){return(t=zA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vb(Object(n),!0).forEach(function(r){GA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ub=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},WA=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let i=e,o=i.status||500;if(typeof i.json=="function")i.json().then(s=>{let a=s?.statusCode||s?.code||o+"";t(new su(Ub(s),o,a,r))}).catch(()=>{if(r==="vectors"){let s=o+"";t(new su(i.statusText||`HTTP ${o} error`,o,s,r))}else{let s=o+"";t(new su(i.statusText||`HTTP ${o} error`,o,s,r))}});else{let s=o+"";t(new su(i.statusText||`HTTP ${o} error`,o,s,r))}}else t(new $b(Ub(e),e,r))},KA=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?P(P({},i),n):($A(r)?(i.headers=P({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),P(P({},i),n))};async function qs(e,t,n,r,i,o,s){return new Promise((a,c)=>{e(n,KA(t,r,i,o)).then(l=>{if(!l.ok)throw l;if(r?.noResolveJson)return l;if(s==="vectors"){let u=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!u||!u.includes("application/json"))return{}}return l.json()}).then(l=>a(l)).catch(l=>WA(l,c,r,s))})}function Hb(e="storage"){return{get:async(t,n,r,i)=>qs(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,o)=>qs(t,"POST",n,i,o,r,e),put:async(t,n,r,i,o)=>qs(t,"PUT",n,i,o,r,e),head:async(t,n,r,i)=>qs(t,"HEAD",n,P(P({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,o)=>qs(t,"DELETE",n,i,o,r,e)}}var YA=Hb("storage"),{get:Gs,post:Wt,put:_p,head:ZA,remove:bp}=YA,pt=Hb("vectors"),ro=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=BA(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(cu(n))return{data:null,error:n};throw n}}},JA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cu(t))return{data:null,error:t};throw t}}},qb;qb=Symbol.toStringTag;var QA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[qb]="BlobDownloadBuilder",this.promise=null}asStream(){return new JA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cu(t))return{data:null,error:t};throw t}}},XA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ex=class extends ro{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let o,s=P(P({},Bb),r),a=P(P({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=P(P({},a),r.headers));let l=i._removeEmptyFolders(t),u=i._getFinalPath(l),d=await(e=="PUT"?_p:Wt)(i.fetch,`${i.url}/object/${u}`,o,P({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{path:l,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;let o=i._removeEmptyFolders(e),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let c,l=P({upsert:Bb.upsert},r),u=P(P({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType),{path:o,fullPath:(await _p(i.fetch,a.toString(),c,{headers:u})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e),i=P({},n.headers);t?.upsert&&(i["x-upsert"]="true");let o=await Wt(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new au("No token returned by API");return{signedUrl:s.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await Wt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await Wt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),o=await Wt(r.fetch,`${r.url}/object/sign/${i}`,P({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{let i=await Wt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>P(P({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null}))})}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),s=()=>Gs(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new QA(s,this.shouldThrowOnError)}async info(e){var t=this;let n=t._getFinalPath(e);return t.handleOperation(async()=>yp(await Gs(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;let n=t._getFinalPath(e);try{return await ZA(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cu(r)&&r instanceof $b){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);let o=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await bp(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{let i=P(P(P({},XA),t),{},{prefix:e||""});return await Wt(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{let r=P({},e);return await Wt(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},tx="2.94.0",Ws={"X-Client-Info":`storage-js/${tx}`},nx=class extends ro{constructor(e,t={},n,r){let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let o=i.href.replace(/\/$/,""),s=P(P({},Ws),t);super(o,s,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=t.listBucketOptionsToQueryString(e);return await Gs(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await Gs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await Wt(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await _p(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await Wt(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await bp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},rx=class extends ro{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},Ws),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await Wt(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await Gs(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await bp(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!HA(e))throw new au("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new jb({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){let s=i[o];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},ix=class extends ro{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},Ws),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await pt.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await pt.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},ox=class extends ro{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},Ws),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},sx=class extends ro{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=P(P({},Ws),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await pt.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},ax=class extends sx{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new cx(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},cx=class extends ix{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new lx(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},lx=class extends ox{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,P(P({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},zb=class extends nx{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new ex(this.url,this.headers,e,this.fetch)}get vectors(){return new ax(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rx(this.url+"/iceberg",this.headers,this.fetch)}};var lu="2.94.0";var $r=30*1e3,uu=3,du=uu*$r,Gb="http://localhost:9999",Wb="supabase.auth.token";var Kb={"X-Client-Info":`gotrue-js/${lu}`};var Ks="X-Supabase-Api-Version",wp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yb=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zb=600*1e3;var Qn=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function x(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var fu=class extends Qn{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function Jb(e){return x(e)&&e.name==="AuthApiError"}var Mt=class extends Qn{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Kt=class extends Qn{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},We=class extends Kt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function pu(e){return x(e)&&e.name==="AuthSessionMissingError"}var Tn=class extends Kt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Hr=class extends Kt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},qr=class extends Kt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Qb(e){return x(e)&&e.name==="AuthImplicitGrantRedirectError"}var Ys=class extends Kt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},hu=class extends Kt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var io=class extends Kt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function gu(e){return x(e)&&e.name==="AuthRetryableFetchError"}var Zs=class extends Kt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var zr=class extends Kt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xb=` 	
\r=`.split(""),ux=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Xb.length;t+=1)e[Xb[t].charCodeAt(0)]=-2;for(let t=0;t<mu.length;t+=1)e[mu[t].charCodeAt(0)]=t;return e})();function ew(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(mu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(mu[r]),t.queuedBits-=6}}function tw(e,t,n){let r=ux[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ep(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{hx(s,r,n)};for(let s=0;s<e.length;s+=1)tw(e.charCodeAt(s),i,o);return t.join("")}function dx(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fx(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}dx(r,t)}}function hx(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Xn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)tw(e.charCodeAt(i),n,r);return new Uint8Array(t)}function nw(e){let t=[];return fx(e,n=>t.push(n)),new Uint8Array(t)}function Mn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>ew(i,n,r)),ew(null,n,r),t.join("")}function rw(e){return Math.round(Date.now()/1e3)+e}function iw(){return Symbol("auth-callback")}var Re=()=>typeof window<"u"&&typeof document<"u",Gr={tested:!1,writable:!1},vu=()=>{if(!Re())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gr.tested)return Gr.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gr.tested=!0,Gr.writable=!0}catch{Gr.tested=!0,Gr.writable=!1}return Gr.writable};function ow(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}var yu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),sw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},er=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},je=async(e,t)=>{await e.removeItem(t)},Js=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};Js.promiseConstructor=Promise;function Qs(e){let t=e.split(".");if(t.length!==3)throw new zr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Yb.test(t[r]))throw new zr("JWT not in base64url format");return{header:JSON.parse(Ep(t[0])),payload:JSON.parse(Ep(t[1])),signature:Xn(t[2]),raw:{header:t[0],payload:t[1]}}}async function aw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function cw(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await e(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function px(e){return("0"+e.toString(16)).substr(-2)}function gx(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,px).join("")}async function mx(e){let n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function vx(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=await mx(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kr(e,t,n=!1){let r=gx(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await Wr(e,`${t}-code-verifier`,i);let o=await vx(r);return[o,r===o?"plain":"s256"]}var yx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function lw(e){let t=e.headers.get(Ks);if(!t||!t.match(yx))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function uw(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function dw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _x=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yr(e){if(!_x.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _u(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function fw(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function Cp(e){return JSON.parse(JSON.stringify(e))}var Zr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bx=[502,503,504];async function hw(e){var t;if(!sw(e))throw new io(Zr(e),0);if(bx.includes(e.status))throw new io(Zr(e),e.status);let n;try{n=await e.json()}catch(o){throw new Mt(Zr(o),o)}let r,i=lw(e);if(i&&i.getTime()>=wp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Zs(Zr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new We}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new Zs(Zr(n),e.status,n.weak_password.reasons);throw new fu(Zr(n),e.status||500,r)}var wx=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function O(e,t,n,r){var i;let o=Object.assign({},r?.headers);o[Ks]||(o[Ks]=wp["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await Ex(e,t,n+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function Ex(e,t,n,r,i,o){let s=wx(t,r,i,o),a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new io(Zr(c),0)}if(a.ok||await hw(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await hw(c)}}function At(e){var t;let n=null;Cx(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=rw(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Dp(e){let t=At(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function cn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function pw(e){return{data:e,error:null}}function gw(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=sr(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function Ip(e){return e}function Cx(e){return e.access_token&&e.refresh_token&&e.expires_in}var bu=["global","local","others"];var oo=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=yu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=bu[0]){if(bu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${bu.join(", ")}`);try{return await O(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(x(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await O(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:cn})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:n}=t,r=sr(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await O(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:gw,redirectTo:n?.redirectTo})}catch(n){if(x(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await O(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:cn})}catch(n){if(x(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await O(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ip});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(x(l))return{data:{users:[]},error:l};throw l}}async getUserById(t){Yr(t);try{return await O(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:cn})}catch(n){if(x(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Yr(t);try{return await O(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:cn})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Yr(t);try{return await O(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:cn})}catch(r){if(x(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Yr(t.userId);try{let{data:n,error:r}=await O(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(x(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Yr(t.userId),Yr(t.id);try{return{data:await O(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,s,a,c;try{let l={nextPage:null,lastPage:0,total:0},u=await O(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ip});if(u.error)throw u.error;let d=await u.json(),h=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(p.split(";")[1].split("=")[1]);l[`${w}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(x(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(t){try{return await O(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(x(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await O(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(x(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await O(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(x(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await O(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(x(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await O(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(x(n))return{data:null,error:n};throw n}}};function Sp(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var Jr={debug:!!(globalThis&&vu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Xs=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},wu=class extends Xs{};async function Tp(e,t,n){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wu(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jr.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function mw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Mp(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function vw(e){return parseInt(e,16)}function yw(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function _w(e){var t;let{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:l,scheme:u,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=Mp(e.address),p=u?`${u}://${r}`:r,v=e.statement?`${e.statement}
`:"",w=`${p} wants you to sign in with your Ethereum account:
${f}

${v}`,_=`URI: ${d}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(_+=`
Expiration Time: ${i.toISOString()}`),a&&(_+=`
Not Before: ${a.toISOString()}`),c&&(_+=`
Request ID: ${c}`),l){let R=`
Resources:`;for(let S of l){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);R+=`
- ${S}`}_+=R}return`${w}
${_}`}var ge=class extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}},Qr=class extends ge{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function bw({error:e,options:t}){var n,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ge({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(Ap(s)){if(o.rp.id!==s)return new ge({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ww({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ge({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(Ap(r)){if(n.rpId!==r)return new ge({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var xp=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},Dx=new xp;function Cw(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=sr(e,["challenge","user","excludeCredentials"]),o=Xn(t).buffer,s=Object.assign(Object.assign({},n),{id:Xn(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let l=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Xn(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function Dw(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=sr(e,["challenge","allowCredentials"]),i=Xn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Xn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function Iw(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Mn(new Uint8Array(e.response.attestationObject)),clientDataJSON:Mn(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Sw(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Mn(new Uint8Array(i.authenticatorData)),clientDataJSON:Mn(new Uint8Array(i.clientDataJSON)),signature:Mn(new Uint8Array(i.signature)),userHandle:i.userHandle?Mn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Ap(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ew(){var e,t;return!!(Re()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Ix(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qr("Browser returned unexpected credential type",t)}:{data:null,error:new Qr("Empty credential response",t)}}catch(t){return{data:null,error:bw({error:t,options:e})}}}async function Sx(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qr("Browser returned unexpected credential type",t)}:{data:null,error:new Qr("Empty credential response",t)}}catch(t){return{data:null,error:ww({error:t,options:e})}}}var Tx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Mx={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eu(...e){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of e)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=Eu(a,s):r[o]=Eu(s)}else r[o]=s}return r}function Ax(e,t){return Eu(Tx,e,t||{})}function xx(e,t){return Eu(Mx,e,t||{})}var Cu=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){var s;try{let{data:a,error:c}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!a)return{data:null,error:c};let l=i??Dx.createNewAbortSignal();if(a.webauthn.type==="create"){let{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){let d=r;if(d)u.name=`${u.id}:${d}`;else{let f=(await this.client.getUser()).data.user,p=((s=f?.user_metadata)===null||s===void 0?void 0:s.name)||f?.email||f?.id||"User";u.name=`${u.id}:${p}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{let u=Ax(a.webauthn.credential_options.publicKey,o?.create),{data:d,error:h}=await Ix({publicKey:u,signal:l});return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{let u=xx(a.webauthn.credential_options.publicKey,o?.request),{data:d,error:h}=await Sx(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return d?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return x(a)?{data:null,error:a}:{data:null,error:new Mt("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Qn("rpId is required for WebAuthn authentication")};try{if(!Ew())return{data:null,error:new Mt("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return x(s)?{data:null,error:s}:{data:null,error:new Mt("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new Qn("rpId is required for WebAuthn registration")};try{if(!Ew())return{data:null,error:new Mt("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};let{data:c,error:l}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(s){return x(s)?{data:null,error:s}:{data:null,error:new Mt("Unexpected error in register",s)}}}};mw();var Rx={url:Gb,storageKey:Wb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Kb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Tw(e,t,n){return await n()}var so={},Nx=(()=>{class e{get jwks(){var n,r;return(r=(n=so[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){so[this.storageKey]=Object.assign(Object.assign({},so[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=so[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){so[this.storageKey]=Object.assign(Object.assign({},so[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},Rx),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Re()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new oo({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=yu(s.fetch),this.lock=s.lock||Tw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&Re()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Tp:this.lock=Tw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Cu(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:vu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sp(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Sp(this.memoryStorage)),Re()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lu}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(Re()&&(r=ow(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),Re()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Qb(s)){let l=(n=s.details)===null||n===void 0?void 0:n.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return x(r)?this._returnResult({error:r}):this._returnResult({error:new Mt("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,o;try{let s=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:At}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(x(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(n){var r,i,o;try{let s;if("email"in n){let{email:d,password:h,options:f}=n,p=null,v=null;this.flowType==="pkce"&&([p,v]=await Kr(this.storage,this.storageKey)),s=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:v},xform:At})}else if("phone"in n){let{phone:d,password:h,options:f}=n;s=await O(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:At})}else throw new Hr("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return await je(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(n){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=await O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Dp})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=await O(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Dp})}else throw new Hr("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new Tn;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(x(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,o,s;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,o,s,a,c,l,u,d,h,f;let p,v;if("message"in n)p=n.message,v=n.signature;else{let{chain:w,wallet:_,statement:R,options:S}=n,C;if(Re())if(typeof _=="object")C=_;else{let ln=window;if("ethereum"in ln&&typeof ln.ethereum=="object"&&"request"in ln.ethereum&&typeof ln.ethereum.request=="function")C=ln.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=_}let G=new URL((r=S?.url)!==null&&r!==void 0?r:window.location.href),Ke=await C.request({method:"eth_requestAccounts"}).then(ln=>ln).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ke||Ke.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let J=Mp(Ke[0]),de=(i=S?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!de){let ln=await C.request({method:"eth_chainId"});de=vw(ln)}let jw={domain:G.host,address:J,statement:R,uri:G.href,version:"1",chainId:de,nonce:(o=S?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=S?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=S?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=S?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=S?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=S?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=_w(jw),v=await C.request({method:"personal_sign",params:[yw(p),J]})}try{let{data:w,error:_}=await O(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:At});if(_)throw _;if(!w||!w.session||!w.user){let R=new Tn;return this._returnResult({data:{user:null,session:null},error:R})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(x(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(n){var r,i,o,s,a,c,l,u,d,h,f,p;let v,w;if("message"in n)v=n.message,w=n.signature;else{let{chain:_,wallet:R,statement:S,options:C}=n,G;if(Re())if(typeof R=="object")G=R;else{let J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))G=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=R}let Ke=new URL((r=C?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in G&&G.signIn){let J=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C?.signInWithSolana),{version:"1",domain:Ke.host,uri:Ke.href}),S?{statement:S}:null)),de;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")de=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)de=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in de&&"signature"in de&&(typeof de.signedMessage=="string"||de.signedMessage instanceof Uint8Array)&&de.signature instanceof Uint8Array)v=typeof de.signedMessage=="string"?de.signedMessage:new TextDecoder().decode(de.signedMessage),w=de.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${Ke.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${Ke.href}`,`Issued At: ${(o=(i=C?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=C?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((a=C?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((c=C?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((l=C?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((u=C?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((h=(d=C?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...C.signInWithSolana.resources.map(de=>`- ${de}`)]:[]].join(`
`);let J=await G.signMessage(new TextEncoder().encode(v),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=J}}try{let{data:_,error:R}=await O(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Mn(w)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=n.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:At});if(R)throw R;if(!_||!_.session||!_.user){let S=new Tn;return this._returnResult({data:{user:null,session:null},error:S})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:R})}catch(_){if(x(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(n){let r=await er(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new hu;let{data:s,error:a}=await O(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:At});if(await je(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Tn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(n){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=n,c=await O(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:At}),{data:l,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){let d=new Tn;return this._returnResult({data:{user:null,session:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(x(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,o,s,a;try{if("email"in n){let{email:c,options:l}=n,u=null,d=null;this.flowType==="pkce"&&([u,d]=await Kr(this.storage,this.storageKey));let{error:h}=await O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in n){let{phone:c,options:l}=n,{data:u,error:d}=await O(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=l?.data)!==null&&o!==void 0?o:{},create_user:(s=l?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:d})}throw new Hr("You must provide either an email or phone number.")}catch(c){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,i;try{let o,s;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await O(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:At});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,u=a.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(x(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,i,o,s,a;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=await Kr(this.storage,this.storageKey));let u=await O(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:pw});return!((s=u.data)===null||s===void 0)&&s.url&&Re()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new We;let{error:o}=await O(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(x(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:o,options:s}=n,{error:a}=await O(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:o,options:s}=n,{data:a,error:c}=await O(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new Hr("You must provide either an email or phone number and a type")}catch(r){if(x(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await er(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<du:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await er(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=_u()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=fw(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:cn}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new We}:await O(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:cn})})}catch(r){if(x(r))return pu(r)&&(await this._removeSession(),await je(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new We;let a=o.session,c=null,l=null;this.flowType==="pkce"&&n.email!=null&&([c,l]=await Kr(this.storage,this.storageKey));let{data:u,error:d}=await O(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:l}),jwt:a.access_token,xform:cn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new We;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=Qs(n.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:l}=await this._callRefreshToken(n.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:l}=await this._getUser(n.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(x(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new We;let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(x(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Re())throw new qr("No browser detected.");if(n.error||n.error_description||n.error_code)throw new qr(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ys("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new Ys("No code detected.");let{data:S,error:C}=await this._exchangeCodeForSession(n.code);if(C)throw C;let G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:S.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:l,token_type:u}=n;if(!s||!c||!a||!u)throw new qr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;l&&(f=parseInt(l));let p=f-d;p*1e3<=$r&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);let{data:w,error:_}=await this._getUser(s);if(_)throw _;let R={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:n.type},error:null})}catch(i){if(x(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await er(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s&&!pu(s))return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,n);if(c&&!(Jb(c)&&(c.status===404||c.status===401||c.status===403)||pu(c)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await je(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=iw(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}})}async resetPasswordForEmail(n,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Kr(this.storage,this.storageKey,!0));try{return await O(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,l,u,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await O(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return Re()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(x(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:l,access_token:u,nonce:d}=n,h=await O(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:At}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Tn}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(await je(this.storage,`${this.storageKey}-code-verifier`),x(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await O(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await cw(async o=>(o>0&&await aw(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await O(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:At})),(o,s)=>{let a=200*Math.pow(2,o);return s&&gu(s)&&Date.now()+a-i<$r})}catch(i){if(this._debug(r,"error",i),x(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),Re()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await er(this.storage,this.storageKey);if(o&&this.userStorage){let a=await er(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await Wr(this.userStorage,this.storageKey+"-user",a)),o.user=(n=a?.user)!==null&&n!==void 0?n:_u()}else if(o&&!o.user&&!o.user){let a=await er(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await je(this.storage,this.storageKey+"-user"),await Wr(this.storage,this.storageKey,o)):o.user=_u()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<du;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${du}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),gu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new We;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Js;let{data:s,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new We;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),x(s)){let a={data:null,error:s};return gu(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,i=!0){let o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await je(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Wr(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=Cp(o);await Wr(this.storage,this.storageKey,s)}else{let o=Cp(r);await Wr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await je(this.storage,this.storageKey),await je(this.storage,this.storageKey+"-code-verifier"),await je(this.storage,this.storageKey+"-user"),this.userStorage&&await je(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Re()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),$r);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-n)/$r);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${$r}ms, refresh threshold is ${uu} ticks`),o<=uu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Xs)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Re()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await Kr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await O(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:l,error:u}=await O(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&l.type==="totp"&&(!((o=l?.totp)===null||o===void 0)&&o.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Iw(n.webauthn.credential_response):Sw(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:l}=await O(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await O(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Cw(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Dw(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,o,s;if(n)try{let{payload:p}=Qs(n),v=null;p.aal&&(v=p.aal);let w=v,{data:{user:_},error:R}=await this.getUser(n);if(R)return this._returnResult({data:null,error:R});((i=(r=_?.factors)===null||r===void 0?void 0:r.filter(G=>G.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(w="aal2");let C=p.amr||[];return{data:{currentLevel:v,nextLevel:w,currentAuthenticationMethods:C},error:null}}catch(p){if(x(p))return this._returnResult({data:null,error:p});throw p}let{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:l}=Qs(a.access_token),u=null;l.aal&&(u=l.aal);let d=u;((s=(o=a.user.factors)===null||o===void 0?void 0:o.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");let f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await O(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new We})})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new We});let a=await O(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Re()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(x(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new We});let a=await O(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&Re()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(x(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await O(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new We})})}catch(n){if(x(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await O(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new We})})}catch(r){if(x(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(c=>c.kid===n);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===n),i&&this.jwks_cached_at+Zb>o)return i;let{data:s,error:a}=await O(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});i=p.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:l}}=Qs(i);r?.allowExpired||uw(s.exp);let u=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:o,signature:a},error:null}}let d=dw(o.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,nw(`${c}.${l}`)))throw new zr("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(x(i))return this._returnResult({data:null,error:i});throw i}}}return e.nextInstanceID={},e})(),Rp=Nx;var Ox=Rp,Np=Ox;var kx="2.94.0",ea="";typeof Deno<"u"?ea="deno":typeof document<"u"?ea="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ea="react-native":ea="node";var Px={"X-Client-Info":`supabase-js-${ea}/${kx}`},Fx={headers:Px},Lx={schema:"public"},jx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vx={};function ta(e){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(e)}function Ux(e,t){if(ta(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ta(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bx(e){var t=Ux(e,"string");return ta(t)=="symbol"?t:t+""}function $x(e,t,n){return(t=Bx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(n),!0).forEach(function(r){$x(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Hx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qx=()=>Headers,zx=(e,t,n)=>{let r=Hx(n),i=qx();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:e,l=new i(s?.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(o,_e(_e({},s),{},{headers:l}))}};function Gx(e){return e.endsWith("/")?e:e+"/"}function Wx(e,t){var n,r;let{db:i,auth:o,realtime:s,global:a}=e,{db:c,auth:l,realtime:u,global:d}=t,h={db:_e(_e({},c),i),auth:_e(_e({},l),o),realtime:_e(_e({},u),s),storage:{},global:_e(_e(_e({},d),a),{},{headers:_e(_e({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function Kx(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Gx(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Yx=class extends Np{constructor(e){super(e)}},Zx=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;let o=Kx(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:Lx,realtime:Vx,auth:_e(_e({},jx),{},{storageKey:s}),global:Fx},c=Wx(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=c.auth)!==null&&l!==void 0?l:{},this.headers,c.global.fetch)}this.fetch=zx(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(_e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new xb(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new zb(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Fs(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();let{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:l},u,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yx({url:this.authUrl.href,headers:_e(_e({},h),u),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:l,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new $s(this.realtimeUrl.href,_e(_e({},e),{},{params:_e(_e({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},Aw=(e,t,n)=>new Zx(e,t,n);function Jx(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(t==null)return!1;let n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Jx()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Qx="https://uzkxigqcipcempyyayww.supabase.co",Xx="sb_publishable_fsrePnC0uaE5kO5Ji7q_mg_CBnUkRhf",xt=Aw(Qx,Xx);var ao=class e{tableName="equipo";getAll(){return te(xt.from(this.tableName).select("*").order("id",{ascending:!0})).pipe(F(t=>{if(t.error)throw new Error(t.error.message);return t.data}))}getById(t){return te(xt.from(this.tableName).select("*").eq("id",t).single()).pipe(F(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}create(t){return te(xt.from(this.tableName).insert([t]).select().single()).pipe(F(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}update(t,n){return te(xt.from(this.tableName).update(n).eq("id",t).select().single()).pipe(F(r=>{if(r.error)throw new Error(r.error.message);return r.data}))}delete(t){return te(xt.from(this.tableName).delete().eq("id",t)).pipe(F(n=>{if(n.error)throw new Error(n.error.message)}))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})};var Du=["Micr\xF3fonos","Computadoras","Monitores","Parlantes","Proyectores","Controles"];var eR=()=>["/equipos","nuevo"],tR=e=>({categoria:e}),Op=e=>["/equipos",e],xw=(e,t)=>t.id;function nR(e,t){if(e&1){let n=Te();m(0,"button",12),Q("click",function(){$(n);let i=T();return i.clearCategoria(),H(i.router.navigate(["/equipos"]))}),y(1," \u2190 Ver todas las categor\xEDas "),g()}}function rR(e,t){if(e&1&&Bn(0,"img",15),e&2){let n=T().$implicit,r=T(2);ve("src","icons/"+r.getCategoriaIcon(n),Pc)("alt",n)}}function iR(e,t){if(e&1&&(m(0,"div",16),y(1),g()),e&2){let n=T().$implicit,r=T(2);E(),X(r.getCategoriaIcon(n))}}function oR(e,t){if(e&1){let n=Te();m(0,"div",14),Q("click",function(){let i=$(n).$implicit,o=T(2);return H(o.selectCategoria(i))}),ne(1,rR,1,2,"img",15)(2,iR,2,1,"div",16),m(3,"div",17),y(4),g(),m(5,"div",18),y(6),g()()}if(e&2){let n=t.$implicit,r=T(2);E(),re(r.getCategoriaIcon(n).endsWith(".png")||r.getCategoriaIcon(n).endsWith(".jpg")||r.getCategoriaIcon(n).endsWith(".svg")?1:2),E(3),X(n),E(2),pe("",r.equiposPorCategoria()[n]||0," equipos")}}function sR(e,t){if(e&1&&(m(0,"div",8),Je(1,oR,7,3,"div",13,Un),g()),e&2){let n=T();E(),Qe(n.categorias)}}function aR(e,t){if(e&1&&(m(0,"option",28),y(1),g()),e&2){let n=t.$implicit;ve("value",n),E(),X(n)}}function cR(e,t){if(e&1&&(m(0,"option",28),y(1),g()),e&2){let n=t.$implicit;ve("value",n),E(),X(n)}}function lR(e,t){if(e&1&&(m(0,"option",28),y(1),g()),e&2){let n=t.$implicit;ve("value",n),E(),X(n)}}function uR(e,t){if(e&1){let n=Te();m(0,"div",9)(1,"div",19)(2,"h3"),y(3,"Filtros"),g(),m(4,"button",20),Q("click",function(){$(n);let i=T();return H(i.clearFilters())}),y(5," Limpiar "),g()(),m(6,"div",21)(7,"div",22)(8,"label",23),y(9,"Buscar"),g(),m(10,"input",24),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.filterSearch,i)||(o.filterSearch=i),H(i)}),g()(),m(11,"div",22)(12,"label",25),y(13,"Piso"),g(),m(14,"select",26),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.filterPiso,i)||(o.filterPiso=i),H(i)}),m(15,"option",27),y(16,"Todos los pisos"),g(),Je(17,aR,2,2,"option",28,Un),g()(),m(19,"div",22)(20,"label",29),y(21,"Estado"),g(),m(22,"select",30),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.filterEstado,i)||(o.filterEstado=i),H(i)}),m(23,"option",27),y(24,"Todos los estados"),g(),Je(25,cR,2,2,"option",28,Un),g()(),m(27,"div",22)(28,"label",31),y(29,"Ambiente"),g(),m(30,"select",32),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.filterAmbiente,i)||(o.filterAmbiente=i),H(i)}),m(31,"option",27),y(32,"Todos los ambientes"),g(),Je(33,lR,2,2,"option",28,Un),g()()()()}if(e&2){let n=T();E(10),Me("ngModel",n.filterSearch),E(4),Me("ngModel",n.filterPiso),E(3),Qe(n.pisos),E(5),Me("ngModel",n.filterEstado),E(3),Qe(n.estados),E(5),Me("ngModel",n.filterAmbiente),E(3),Qe(n.ambientes())}}function dR(e,t){e&1&&(m(0,"div",10),y(1,"Cargando equipos..."),g())}function fR(e,t){if(e&1&&(m(0,"div",11),y(1),g()),e&2){let n=T();E(),X(n.error())}}function hR(e,t){if(e&1&&(m(0,"span",34),y(1),g()),e&2){let n=T(3);E(),pe("Piso: ",n.filterPiso())}}function pR(e,t){if(e&1&&(m(0,"span",34),y(1),g()),e&2){let n=T(3);E(),pe("Estado: ",n.filterEstado())}}function gR(e,t){if(e&1&&(m(0,"span",34),y(1),g()),e&2){let n=T(3);E(),pe("Ambiente: ",n.filterAmbiente())}}function mR(e,t){if(e&1&&(m(0,"span",34),y(1),g()),e&2){let n=T(3);E(),pe("Busqueda: ",n.filterSearch())}}function vR(e,t){if(e&1&&(m(0,"div",33)(1,"span"),y(2,"Filtros activos:"),g(),ne(3,hR,2,1,"span",34),ne(4,pR,2,1,"span",34),ne(5,gR,2,1,"span",34),ne(6,mR,2,1,"span",34),g()),e&2){let n=T(2);E(3),re(n.filterPiso()?3:-1),E(),re(n.filterEstado()?4:-1),E(),re(n.filterAmbiente()?5:-1),E(),re(n.filterSearch()?6:-1)}}function yR(e,t){if(e&1){let n=Te();m(0,"tr")(1,"td"),y(2),g(),m(3,"td"),y(4),g(),m(5,"td"),y(6),g(),m(7,"td"),y(8),g(),m(9,"td"),y(10),g(),m(11,"td"),y(12),g(),m(13,"td"),y(14),g(),m(15,"td",42)(16,"a",43),y(17," Editar "),g(),m(18,"button",44),Q("click",function(){let i=$(n).$implicit,o=T(3);return H(o.deleteEquipo(i.id))}),y(19," Eliminar "),g()()()}if(e&2){let n=t.$implicit;E(2),X(n.nombre),E(2),X(n.piso||"-"),E(2),X(n.descripcion||"-"),E(2),X(n.marca),E(2),X(n.modelo),E(2),X(n.estado),E(2),X(n.ambientecodigo||"Sin asignar"),E(2),ve("routerLink",Cn(8,Op,n.id))}}function _R(e,t){e&1&&(m(0,"tr")(1,"td",45),y(2,"No hay equipos en esta categor\xEDa"),g()())}function bR(e,t){if(e&1){let n=Te();m(0,"div",38)(1,"button",46),Q("click",function(){$(n);let i=T(3);return H(i.prevPage())}),y(2," \u2190 Anterior "),g(),m(3,"span",47),y(4),g(),m(5,"button",46),Q("click",function(){$(n);let i=T(3);return H(i.nextPage())}),y(6," Siguiente \u2192 "),g()()}if(e&2){let n=T(3);E(),ve("disabled",n.currentPage()===1),E(3),Ti(" ",n.equiposFiltradosOrdenados().length," equipos - P\xE1gina ",n.currentPage()," de ",n.totalPages()," "),E(),ve("disabled",n.currentPage()===n.totalPages())}}function wR(e,t){if(e&1&&(m(0,"p",52),y(1),g()),e&2){let n=T().$implicit;E(),pe("\u{1F3E2} Piso: ",n.piso)}}function ER(e,t){if(e&1&&(m(0,"p",53),y(1),g()),e&2){let n=T().$implicit;E(),X(n.descripcion)}}function CR(e,t){if(e&1&&(m(0,"p",57),y(1),g()),e&2){let n=T().$implicit;E(),pe(" \u{1F4CD} ",n.ambientecodigo," ")}}function DR(e,t){if(e&1){let n=Te();m(0,"div",40)(1,"div",48)(2,"span",49),y(3),g(),m(4,"span",50),y(5),g()(),m(6,"div",51),ne(7,wR,2,1,"p",52),ne(8,ER,2,1,"p",53),m(9,"p",54),y(10),g(),Gc(11,CR,2,1,"p",55),g(),m(12,"div",56)(13,"a",43),y(14," Editar "),g(),m(15,"button",44),Q("click",function(){let i=$(n).$implicit,o=T(3);return H(o.deleteEquipo(i.id))}),y(16," Eliminar "),g()()()}if(e&2){let n=t.$implicit;E(3),X(n.nombre),E(),ts(n.estado==null?null:n.estado.toLowerCase()),E(),X(n.estado),E(),ve("routerLink",Cn(11,Op,n.id)),E(),re(n.piso?7:-1),E(),re(n.descripcion?8:-1),E(2),Si("",n.marca," - ",n.modelo),E(),ve("ngIf",n.ambientecodigo),E(2),ve("routerLink",Cn(13,Op,n.id))}}function IR(e,t){e&1&&(m(0,"div",41),y(1,"No hay equipos en esta categor\xEDa"),g())}function SR(e,t){if(e&1){let n=Te();m(0,"div",35)(1,"table",36)(2,"thead")(3,"tr")(4,"th",37),Q("click",function(){$(n);let i=T(2);return H(i.setSortField("nombre"))}),y(5),g(),m(6,"th"),y(7,"Piso"),g(),m(8,"th"),y(9,"Descripci\xF3n"),g(),m(10,"th",37),Q("click",function(){$(n);let i=T(2);return H(i.setSortField("marca"))}),y(11),g(),m(12,"th",37),Q("click",function(){$(n);let i=T(2);return H(i.setSortField("modelo"))}),y(13),g(),m(14,"th"),y(15,"Estado"),g(),m(16,"th",37),Q("click",function(){$(n);let i=T(2);return H(i.setSortField("ambientecodigo"))}),y(17),g(),m(18,"th"),y(19,"Acciones"),g()()(),m(20,"tbody"),Je(21,yR,20,10,"tr",null,xw,!1,_R,3,0,"tr"),g()(),ne(24,bR,7,5,"div",38),g(),m(25,"div",39),Je(26,DR,17,15,"div",40,xw,!1,IR,2,0,"div",41),g()}if(e&2){let n=T(2);E(5),pe(" Nombre ",n.getSortIcon("nombre")," "),E(6),pe(" Marca ",n.getSortIcon("marca")," "),E(2),pe(" Modelo ",n.getSortIcon("modelo")," "),E(4),pe(" Ambiente ",n.getSortIcon("ambientecodigo")," "),E(4),Qe(n.equiposPaginados()),E(3),re(n.totalPages()>1?24:-1),E(2),Qe(n.equiposFiltradosOrdenados())}}function TR(e,t){if(e&1&&(ne(0,vR,7,4,"div",33),ne(1,SR,29,7)),e&2){let n=T();re((n.filterPiso()||n.filterEstado()||n.filterAmbiente()||n.filterSearch())&&n.selectedCategoria()?0:-1),E(),re(n.selectedCategoria()?1:-1)}}var Iu=class e{equipoService=b(ao);route=b(it);router=b(Gt);equipos=B([]);loading=B(!0);error=B(null);categorias=Du;selectedCategoria=B(null);showFilters=B(!1);filterPiso=B("");filterEstado=B("");filterAmbiente=B("");filterSearch=B("");sortField=B("ambientecodigo");sortOrder=B("asc");pageSize=10;currentPage=B(1);estados=["Nuevo","Usado","Desgastado","Obsoleto"];pisos=["S\xF3tano","Piso 1","Piso 2","Piso 3","Piso 4","Piso 5","Piso 6","Piso 7","Piso 8"];equiposPorCategoria=Ge(()=>{let t={};return this.categorias.forEach(n=>t[n]=0),this.equipos().forEach(n=>{n.categoria&&t.hasOwnProperty(n.categoria)&&t[n.categoria]++}),t});ambientes=Ge(()=>{let t=new Set;return this.equiposFiltrados().forEach(n=>{n.ambientecodigo&&t.add(n.ambientecodigo)}),Array.from(t).sort((n,r)=>n.localeCompare(r,void 0,{numeric:!0}))});totalPages=Ge(()=>Math.ceil(this.equiposFiltradosOrdenados().length/this.pageSize));equiposFiltrados=Ge(()=>{let t=[...this.equipos()],n=this.selectedCategoria();return n&&(t=t.filter(r=>r.categoria===n)),t});equiposFiltradosOrdenados=Ge(()=>{let t=this.equiposFiltrados(),n=this.filterPiso(),r=this.filterEstado().toLowerCase(),i=this.filterAmbiente().toLowerCase(),o=this.filterSearch().toLowerCase();n&&(t=t.filter(c=>c.piso===n)),r&&(t=t.filter(c=>c.estado?.toLowerCase()===r)),i&&(t=t.filter(c=>c.ambientecodigo?.toLowerCase().includes(i))),o&&(t=t.filter(c=>c.nombre?.toLowerCase().includes(o)||c.marca?.toLowerCase().includes(o)||c.modelo?.toLowerCase().includes(o)));let s=this.sortField(),a=this.sortOrder();return t.sort((c,l)=>{let u=c[s]||"",d=l[s]||"",h=u.localeCompare(d,void 0,{numeric:!0,sensitivity:"base"});return a==="asc"?h:-h}),t});equiposPaginados=Ge(()=>{let t=(this.currentPage()-1)*this.pageSize,n=t+this.pageSize;return this.equiposFiltradosOrdenados().slice(t,n)});ngOnInit(){let t=this.route.snapshot.queryParamMap.get("categoria");t&&this.selectedCategoria.set(t),this.loadEquipos()}loadEquipos(){this.loading.set(!0),this.error.set(null),this.equipoService.getAll().subscribe({next:t=>{this.equipos.set(t),this.loading.set(!1)},error:t=>{this.error.set("Error al cargar equipos"),this.loading.set(!1),console.error(t)}})}selectCategoria(t){this.selectedCategoria.set(t),this.currentPage.set(1),this.clearFilters()}clearCategoria(){this.selectedCategoria.set(null),this.currentPage.set(1)}toggleFilters(){this.showFilters.update(t=>!t)}clearFilters(){this.filterPiso.set(""),this.filterEstado.set(""),this.filterAmbiente.set(""),this.filterSearch.set(""),this.currentPage.set(1)}setSortField(t){this.sortField()===t?this.sortOrder.set(this.sortOrder()==="asc"?"desc":"asc"):(this.sortField.set(t),this.sortOrder.set("asc"))}getSortIcon(t){return this.sortField()!==t?"\u2195":this.sortOrder()==="asc"?"\u2191":"\u2193"}getCategoriaIcon(t){return{Micr\u00F3fonos:"\u{1F3A4}",Computadoras:"\u{1F4BB}",Monitores:"\u{1F5A5}\uFE0F",Parlantes:"\u{1F50A}",Proyectores:"icon-proyector.png",Controles:"icon-control.png"}[t]||"\u{1F4E6}"}nextPage(){this.currentPage()<this.totalPages()&&this.currentPage.set(this.currentPage()+1)}prevPage(){this.currentPage()>1&&this.currentPage.set(this.currentPage()-1)}deleteEquipo(t){confirm("\xBFEst\xE1s seguro de eliminar este equipo?")&&this.equipoService.delete(t).subscribe({next:()=>{this.loadEquipos()},error:n=>{this.error.set("Error al eliminar equipo"),console.error(n)}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-inventario-list"]],decls:18,vars:14,consts:[[1,"container"],[1,"header"],[1,"header-title"],["routerLink","/menu","title","Volver al men\xFA",1,"btn-volver"],[1,"header-actions"],[1,"btn","btn-secondary"],[1,"btn","btn-filter",3,"click"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"categorias-grid"],[1,"filter-panel"],[1,"loading"],[1,"error"],[1,"btn","btn-secondary",3,"click"],[1,"categoria-card"],[1,"categoria-card",3,"click"],[1,"categoria-img",3,"src","alt"],[1,"categoria-icon"],[1,"categoria-nombre"],[1,"categoria-count"],[1,"filter-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"filter-content"],[1,"filter-group"],["for","filter-search"],["type","text","id","filter-search","placeholder","Nombre, marca, modelo...",1,"form-control",3,"ngModelChange","ngModel"],["for","filter-piso"],["id","filter-piso",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","filter-estado"],["id","filter-estado",1,"form-control",3,"ngModelChange","ngModel"],["for","filter-ambiente"],["id","filter-ambiente",1,"form-control",3,"ngModelChange","ngModel"],[1,"filter-summary"],[1,"filter-tag"],[1,"table-container","desktop-only"],[1,"table"],[1,"sortable",3,"click"],[1,"pagination"],[1,"cards-container","mobile-only"],[1,"card"],[1,"empty-card"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"routerLink"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","8",1,"empty"],[1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"pagination-info"],[1,"card-header"],[1,"card-nombre"],[1,"card-estado"],[1,"card-body",3,"routerLink"],[1,"card-piso"],[1,"card-descripcion"],[1,"card-marca"],["class","card-ambiente",4,"ngIf"],[1,"card-actions"],[1,"card-ambiente"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"header",1)(2,"div",2)(3,"a",3),y(4," \u2190 "),g(),m(5,"h1"),y(6),g()(),m(7,"div",4),ne(8,nR,2,0,"button",5),m(9,"button",6),Q("click",function(){return r.toggleFilters()}),y(10," \u{1F50D} Filtros "),g(),m(11,"a",7),y(12," + Agregar "),g()()(),ne(13,sR,3,0,"div",8),ne(14,uR,35,4,"div",9),ne(15,dR,2,0,"div",10),ne(16,fR,2,1,"div",11),ne(17,TR,2,2),g()),n&2&&(E(6),X(r.selectedCategoria()?r.selectedCategoria():"Equipos"),E(2),re(r.selectedCategoria()?8:-1),E(3),Ar("disabled",!r.selectedCategoria()),ve("routerLink",fh(11,eR))("queryParams",Cn(12,tR,r.selectedCategoria())),E(2),re(r.selectedCategoria()?-1:13),E(),re(r.showFilters()&&r.selectedCategoria()?14:-1),E(),re(r.loading()?15:-1),E(),re(r.error()?16:-1),E(),re(!r.loading()&&!r.error()?17:-1))},dependencies:[It,mh,an,Yi,Ql,Xl,Zn,Ki,Wi,Ur],styles:[".table-container[_ngcontent-%COMP%]{display:block}.desktop-only[_ngcontent-%COMP%]{display:table}.mobile-only[_ngcontent-%COMP%]{display:none}.cards-container[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#0055a4;color:#fff}.card-nombre[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.card-descripcion[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#666;font-size:.875rem}.card-estado[_ngcontent-%COMP%]{font-size:.75rem;padding:.25rem .75rem;border-radius:20px;background:#fff3}.card-estado.nuevo[_ngcontent-%COMP%]{background:#28a745}.card-estado.usado[_ngcontent-%COMP%]{background:#0055a4}.card-estado.desgastado[_ngcontent-%COMP%]{background:#fd7e14;color:#333}.card-estado.obsoleto[_ngcontent-%COMP%]{background:#dc3545}.card-body[_ngcontent-%COMP%]{padding:1rem;cursor:pointer;transition:background-color .2s}.card-body[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.125rem;color:#1a1a2e}.card-marca[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#666;font-size:.875rem}.card-ambiente[_ngcontent-%COMP%]{margin:0;color:#0055a4;font-size:.875rem;font-weight:500}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.empty-card[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.btn-filter[_ngcontent-%COMP%]{background:#0055a4;color:#fff;border:none;padding:.5rem 1rem;border-radius:8px;cursor:pointer;font-size:.875rem;font-weight:500;transition:background-color .2s}.btn-filter[_ngcontent-%COMP%]:hover{background:#004080}.filter-panel[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 16px #00000026;margin-bottom:1rem;overflow:hidden;animation:_ngcontent-%COMP%_slideDown .3s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#0055a4;color:#fff}.filter-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600}.filter-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;padding:1rem}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#333}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:6px;font-size:.875rem}.filter-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0055a4;box-shadow:0 0 0 2px #0055a433}.filter-summary[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center;padding:.75rem 1rem;background:#e8f4ff;border-radius:8px;margin-bottom:1rem;font-size:.875rem;color:#0055a4}.filter-tag[_ngcontent-%COMP%]{background:#0055a4;color:#fff;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:500}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-top:1rem}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media(max-width:1000px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:flex!important}.cards-container[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filter-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}.btn-volver[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;font-size:1.5rem;font-weight:700;color:#0055a4;background:#fff;border:2px solid #0055A4;border-radius:50%;text-decoration:none;transition:all .3s ease;cursor:pointer}.btn-volver[_ngcontent-%COMP%]:hover{background:#0055a4;color:#fff;box-shadow:0 4px 12px #0055a466;transform:translate(-4px)}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.card-piso[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#0055a4;font-size:.875rem;font-weight:500}.categorias-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1rem;padding:1rem 0}.categoria-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:1.5rem;text-align:center;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #0000001a;border:2px solid transparent}.categoria-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 24px #00000026;border-color:#0055a4}.categoria-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:.75rem}.categoria-nombre[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#1a1a2e;margin-bottom:.5rem}.categoria-count[_ngcontent-%COMP%]{font-size:.875rem;color:#666;background:#f0f4f8;padding:.25rem .75rem;border-radius:20px;display:inline-block}.categoria-img[_ngcontent-%COMP%]{width:64px;height:64px;object-fit:contain;margin-bottom:.75rem}@media(max-width:600px){.categorias-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:.75rem}.categoria-card[_ngcontent-%COMP%]{padding:1rem}.categoria-icon[_ngcontent-%COMP%]{font-size:2rem}.categoria-nombre[_ngcontent-%COMP%]{font-size:.875rem}.categoria-count[_ngcontent-%COMP%]{font-size:.75rem}}"]})};var tr=class e{tableName="ambiente";getAll(){return te(xt.from(this.tableName).select("*").order("id",{ascending:!0})).pipe(F(t=>{if(t.error)throw new Error(t.error.message);return t.data}))}getById(t){return te(xt.from(this.tableName).select("*").eq("id",t).single()).pipe(F(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}create(t){return te(xt.from(this.tableName).insert([t]).select().single()).pipe(F(n=>{if(n.error)throw new Error(n.error.message);return n.data}))}update(t,n){return te(xt.from(this.tableName).update(n).eq("id",t).select().single()).pipe(F(r=>{if(r.error)throw new Error(r.error.message);return r.data}))}delete(t){return te(xt.from(this.tableName).delete().eq("id",t)).pipe(F(n=>{if(n.error)throw new Error(n.error.message)}))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})};var co=class e{toasts=B([]);nextId=0;show(t,n="info",r=3e3){let i={id:this.nextId++,message:t,type:n};this.toasts.update(o=>[...o,i]),setTimeout(()=>{this.remove(i.id)},r)}success(t,n){this.show(t,"success",n)}error(t,n){this.show(t,"error",n)}info(t,n){this.show(t,"info",n)}warning(t,n){this.show(t,"warning",n)}remove(t){this.toasts.update(n=>n.filter(r=>r.id!==t))}static \u0275fac=function(n){return new(n||e)};static \u0275prov=M({token:e,factory:e.\u0275fac,providedIn:"root"})};var MR=(e,t)=>t.id;function AR(e,t){e&1&&(m(0,"div",2),y(1,"Cargando..."),g())}function xR(e,t){if(e&1&&(m(0,"div",3),y(1),g()),e&2){let n=T();E(),X(n.error())}}function RR(e,t){if(e&1&&(m(0,"option",12),y(1),g()),e&2){let n=t.$implicit;ve("value",n),E(),X(n)}}function NR(e,t){if(e&1&&(m(0,"option",39),y(1),g()),e&2){let n=t.$implicit,r=T(2);ve("value",n.id)("selected",r.form.ambientecodigo===n.codigo),E(),Si(" ",n.codigo," - ",n.nombre," ")}}function OR(e,t){if(e&1){let n=Te();m(0,"form",5),Q("ngSubmit",function(){$(n);let i=T();return H(i.onSubmit())}),m(1,"div",6)(2,"label",7),y(3,"Nombre *"),g(),m(4,"input",8),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.nombre,i)||(o.form.nombre=i),H(i)}),g()(),m(5,"div",6)(6,"label",9),y(7,"Categor\xEDa *"),g(),m(8,"select",10),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.categoria,i)||(o.form.categoria=i),H(i)}),m(9,"option",11),y(10,"Seleccionar categor\xEDa"),g(),Je(11,RR,2,2,"option",12,Un),g()(),m(13,"div",6)(14,"label",13),y(15,"Descripci\xF3n"),g(),m(16,"textarea",14),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.descripcion,i)||(o.form.descripcion=i),H(i)}),g()(),m(17,"div",6)(18,"label",15),y(19,"Piso"),g(),m(20,"select",16),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.piso,i)||(o.form.piso=i),H(i)}),m(21,"option",11),y(22,"Sin asignar"),g(),m(23,"option",17),y(24,"S\xF3tano"),g(),m(25,"option",18),y(26,"Piso 1"),g(),m(27,"option",19),y(28,"Piso 2"),g(),m(29,"option",20),y(30,"Piso 3"),g(),m(31,"option",21),y(32,"Piso 4"),g(),m(33,"option",22),y(34,"Piso 5"),g(),m(35,"option",23),y(36,"Piso 6"),g(),m(37,"option",24),y(38,"Piso 7"),g(),m(39,"option",25),y(40,"Piso 8"),g()()(),m(41,"div",26)(42,"div",6)(43,"label",27),y(44,"Marca *"),g(),m(45,"input",28),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.marca,i)||(o.form.marca=i),H(i)}),g()(),m(46,"div",6)(47,"label",29),y(48,"Modelo *"),g(),m(49,"input",30),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.modelo,i)||(o.form.modelo=i),H(i)}),g()()(),m(50,"div",26)(51,"div",6)(52,"label",31),y(53,"Estado *"),g(),m(54,"select",32),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.estado,i)||(o.form.estado=i),H(i)}),m(55,"option",11),y(56,"Seleccionar estado"),g(),m(57,"option",33),y(58,"Nuevo"),g(),m(59,"option",34),y(60,"Usado"),g(),m(61,"option",35),y(62,"Desgastado"),g(),m(63,"option",36),y(64,"Obsoleto"),g()()(),m(65,"div",6)(66,"label",37),y(67,"Ambiente (C\xF3digo)"),g(),m(68,"select",38),Q("change",function(i){$(n);let o=T();return H(o.onAmbienteChange(i))}),m(69,"option",11),y(70,"Sin asignar"),g(),Je(71,NR,2,4,"option",39,MR),g()()(),m(73,"div",40)(74,"button",41),y(75),g(),m(76,"button",42),Q("click",function(){$(n);let i=T();return H(i.cancel())}),y(77," Cancelar "),g()()()}if(e&2){let n=T();E(4),Me("ngModel",n.form.nombre),E(4),Me("ngModel",n.form.categoria),E(3),Qe(n.categorias),E(5),Me("ngModel",n.form.descripcion),E(4),Me("ngModel",n.form.piso),E(25),Me("ngModel",n.form.marca),E(4),Me("ngModel",n.form.modelo),E(5),Me("ngModel",n.form.estado),E(17),Qe(n.ambientes()),E(4),pe(" ",n.isEditing()?"Actualizar":"Crear"," ")}}var na=class e{equipoService=b(ao);ambienteService=b(tr);router=b(Gt);route=b(it);toastService=b(co);isEditing=B(!1);loading=B(!1);error=B(null);ambientes=B([]);categorias=Du;form={nombre:"",descripcion:"",piso:"",categoria:"",marca:"",modelo:"",estado:"",ambientecodigo:"",ambientenombre:""};equipoId=null;fromCategoria=null;equipoCategoria=null;ngOnInit(){this.loadAmbientes(),this.fromCategoria=this.route.snapshot.queryParamMap.get("categoria");let t=this.route.snapshot.paramMap.get("id");t?(this.isEditing.set(!0),this.equipoId=+t,this.loadEquipo(this.equipoId)):this.fromCategoria&&(this.form.categoria=this.fromCategoria)}loadAmbientes(){this.ambienteService.getAll().subscribe({next:t=>{this.ambientes.set(t)},error:t=>{console.error("Error al cargar ambientes",t)}})}loadEquipo(t){this.loading.set(!0),this.equipoService.getById(t).subscribe({next:n=>{this.form={nombre:n.nombre,descripcion:n.descripcion||"",piso:n.piso||"",categoria:n.categoria||"",marca:n.marca,modelo:n.modelo,estado:n.estado,ambientecodigo:n.ambientecodigo||"",ambientenombre:n.ambientenombre||""},this.equipoCategoria=n.categoria||null,this.loading.set(!1)},error:n=>{this.error.set("Error al cargar equipo"),this.loading.set(!1),console.error(n)}})}getCategoria(){return this.equipoCategoria?this.equipoCategoria:this.fromCategoria}navigateToList(){let t=this.getCategoria();t?this.router.navigate(["/equipos"],{queryParams:{categoria:t}}):this.router.navigate(["/equipos"])}onAmbienteChange(t){let r=t.target.value;if(!r){this.form.ambientecodigo="",this.form.ambientenombre="";return}let i=this.ambientes().find(o=>o.id===+r);i&&(this.form.ambientecodigo=i.codigo,this.form.ambientenombre=i.nombre)}onSubmit(){this.equipoId?this.update():this.create()}create(){this.loading.set(!0),this.error.set(null),this.equipoService.create(this.form).subscribe({next:()=>{this.toastService.success("Equipo creado exitosamente"),this.navigateToList()},error:t=>{this.error.set("Error al crear equipo"),this.loading.set(!1),console.error(t)}})}update(){this.equipoId&&(this.loading.set(!0),this.error.set(null),this.equipoService.update(this.equipoId,this.form).subscribe({next:()=>{this.toastService.success("Equipo actualizado exitosamente"),this.navigateToList()},error:t=>{this.error.set("Error al actualizar equipo"),this.loading.set(!1),console.error(t)}}))}cancel(){this.toastService.success("Se cancel\xF3 exitosamente"),this.fromCategoria?this.router.navigate(["/equipos"],{queryParams:{categoria:this.fromCategoria}}):this.router.navigate(["/equipos"])}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-producto-form"]],decls:7,vars:4,consts:[[1,"container"],[1,"header"],[1,"loading"],[1,"error"],[1,"form"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","text","id","nombre","name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","categoria"],["id","categoria","name","categoria","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","descripcion"],["id","descripcion","name","descripcion","rows","3",1,"form-control",3,"ngModelChange","ngModel"],["for","piso"],["id","piso","name","piso",1,"form-control",3,"ngModelChange","ngModel"],["value","S\xF3tano"],["value","Piso 1"],["value","Piso 2"],["value","Piso 3"],["value","Piso 4"],["value","Piso 5"],["value","Piso 6"],["value","Piso 7"],["value","Piso 8"],[1,"form-row"],["for","marca"],["type","text","id","marca","name","marca","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","modelo"],["type","text","id","modelo","name","modelo","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","estado"],["id","estado","name","estado","required","",1,"form-control",3,"ngModelChange","ngModel"],["value","Nuevo"],["value","Usado"],["value","Desgastado"],["value","Obsoleto"],["for","ambiente"],["id","ambiente",1,"form-control",3,"change"],[3,"value","selected"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"header",1)(2,"h1"),y(3),g()(),ne(4,AR,2,0,"div",2),ne(5,xR,2,1,"div",3),ne(6,OR,78,8,"form",4),g()),n&2&&(E(3),pe("",r.isEditing()?"Editar":"Nuevo"," Equipo"),E(),re(r.loading()?4:-1),E(),re(r.error()?5:-1),E(),re(r.loading()?-1:6))},dependencies:[It,Yi,Jl,Ql,Xl,Zn,Ki,Wi,Yl,ks,Ur,Os],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:600px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333}.form[_ngcontent-%COMP%]{background:#fff;padding:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:16px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#333}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#0055a4;box-shadow:0 0 0 2px #0055a440}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px}.form-row[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{flex:1}.form-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:24px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background-color:#0055a4;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#004080}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#545b62}.loading[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;padding:12px;border-radius:4px;margin-bottom:20px}"]})};var Nw=e=>["/ambientes",e],Rw=(e,t)=>t.id;function kR(e,t){e&1&&(m(0,"div",4),y(1,"Cargando ambientes..."),g())}function PR(e,t){if(e&1&&(m(0,"div",5),y(1),g()),e&2){let n=T();E(),X(n.error())}}function FR(e,t){if(e&1){let n=Te();m(0,"tr")(1,"td"),y(2),g(),m(3,"td"),y(4),g(),m(5,"td"),y(6),g(),m(7,"td",12)(8,"a",13),y(9," Editar "),g(),m(10,"button",14),Q("click",function(){let i=$(n).$implicit,o=T(2);return H(o.deleteAmbiente(i.id))}),y(11," Eliminar "),g()()()}if(e&2){let n=t.$implicit;E(2),X(n.codigo),E(2),X(n.nombre),E(2),X(n.ubicacion),E(2),ve("routerLink",Cn(4,Nw,n.id))}}function LR(e,t){e&1&&(m(0,"tr")(1,"td",15),y(2,"No hay ambientes"),g()())}function jR(e,t){if(e&1){let n=Te();m(0,"div",8)(1,"button",16),Q("click",function(){$(n);let i=T(2);return H(i.prevPage())}),y(2," \u2190 Anterior "),g(),m(3,"span",17),y(4),g(),m(5,"button",16),Q("click",function(){$(n);let i=T(2);return H(i.nextPage())}),y(6," Siguiente \u2192 "),g()()}if(e&2){let n=T(2);E(),ve("disabled",n.currentPage()===1),E(3),Ti(" ",n.ambientes().length," ambientes - P\xE1gina ",n.currentPage()," de ",n.totalPages()," "),E(),ve("disabled",n.currentPage()===n.totalPages())}}function VR(e,t){if(e&1){let n=Te();m(0,"div",10)(1,"div",18)(2,"span",19),y(3),g()(),m(4,"div",20)(5,"h3"),y(6),g(),m(7,"p",21),y(8),g()(),m(9,"div",22)(10,"a",13),y(11," Editar "),g(),m(12,"button",14),Q("click",function(){let i=$(n).$implicit,o=T(2);return H(o.deleteAmbiente(i.id))}),y(13," Eliminar "),g()()()}if(e&2){let n=t.$implicit;E(3),X(n.codigo),E(3),X(n.nombre),E(2),pe("\u{1F4CD} ",n.ubicacion),E(2),ve("routerLink",Cn(4,Nw,n.id))}}function UR(e,t){e&1&&(m(0,"div",11),y(1,"No hay ambientes registrados"),g())}function BR(e,t){if(e&1&&(m(0,"div",6)(1,"table",7)(2,"thead")(3,"tr")(4,"th"),y(5,"C\xF3digo"),g(),m(6,"th"),y(7,"Nombre"),g(),m(8,"th"),y(9,"Ubicaci\xF3n"),g(),m(10,"th"),y(11,"Acciones"),g()()(),m(12,"tbody"),Je(13,FR,12,6,"tr",null,Rw,!1,LR,3,0,"tr"),g()(),ne(16,jR,7,5,"div",8),g(),m(17,"div",9),Je(18,VR,14,6,"div",10,Rw,!1,UR,2,0,"div",11),g()),e&2){let n=T();E(13),Qe(n.ambientesPaginados()),E(3),re(n.totalPages()>1?16:-1),E(2),Qe(n.ambientes())}}var Su=class e{ambienteService=b(tr);ambientes=B([]);loading=B(!0);error=B(null);pageSize=10;currentPage=B(1);totalPages=Ge(()=>Math.ceil(this.ambientes().length/this.pageSize));ambientesPaginados=Ge(()=>{let t=(this.currentPage()-1)*this.pageSize,n=t+this.pageSize;return this.ambientes().slice(t,n)});ngOnInit(){this.loadAmbientes()}loadAmbientes(){this.loading.set(!0),this.error.set(null),this.ambienteService.getAll().subscribe({next:t=>{this.ambientes.set(t),this.currentPage.set(1),this.loading.set(!1)},error:t=>{this.error.set("Error al cargar ambientes"),this.loading.set(!1),console.error(t)}})}nextPage(){this.currentPage()<this.totalPages()&&this.currentPage.set(this.currentPage()+1)}prevPage(){this.currentPage()>1&&this.currentPage.set(this.currentPage()-1)}deleteAmbiente(t){confirm("\xBFEst\xE1s seguro de eliminar este ambiente?")&&this.ambienteService.delete(t).subscribe({next:()=>{this.loadAmbientes()},error:n=>{this.error.set("Error al eliminar ambiente"),console.error(n)}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-ambiente-list"]],decls:12,vars:3,consts:[[1,"container"],[1,"header"],["routerLink","/menu",1,"btn","btn-secondary","btn-sm"],["routerLink","/ambientes/nuevo",1,"btn","btn-primary"],[1,"loading"],[1,"error"],[1,"table-container","desktop-only"],[1,"table"],[1,"pagination"],[1,"cards-container","mobile-only"],[1,"card"],[1,"empty-card"],[1,"actions"],[1,"btn","btn-sm","btn-edit",3,"routerLink"],[1,"btn","btn-sm","btn-delete",3,"click"],["colspan","4",1,"empty"],[1,"btn","btn-sm","btn-secondary",3,"click","disabled"],[1,"pagination-info"],[1,"card-header"],[1,"card-codigo"],[1,"card-body"],[1,"card-ubicacion"],[1,"card-actions"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"header",1)(2,"div")(3,"a",2),y(4,"\u2190 Volver"),g(),m(5,"h1"),y(6,"Ambientes"),g()(),m(7,"a",3),y(8," + Agregar "),g()(),ne(9,kR,2,0,"div",4),ne(10,PR,2,1,"div",5),ne(11,BR,21,3),g()),n&2&&(E(9),re(r.loading()?9:-1),E(),re(r.error()?10:-1),E(),re(!r.loading()&&!r.error()?11:-1))},dependencies:[It,an],styles:[".container[_ngcontent-%COMP%]{padding:2rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}h1[_ngcontent-%COMP%]{margin:0}.table-container[_ngcontent-%COMP%]{display:block}.desktop-only[_ngcontent-%COMP%]{display:table}.mobile-only[_ngcontent-%COMP%]{display:none}.cards-container[_ngcontent-%COMP%]{display:none;flex-direction:column;gap:1rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 1rem;background:#0055a4;color:#fff}.card-codigo[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9}.card-body[_ngcontent-%COMP%]{padding:1rem}.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.125rem;color:#1a1a2e}.card-ubicacion[_ngcontent-%COMP%]{margin:0;color:#0055a4;font-size:.875rem;font-weight:500}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding:1rem;border-top:1px solid #eee}.card-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.empty-card[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem;padding:1rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;margin-top:1rem}.pagination-info[_ngcontent-%COMP%]{font-size:.875rem;color:#666;font-weight:500}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 4px #0000001a}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #eee}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#0055a4;color:#fff}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f5f5f5}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666}.error[_ngcontent-%COMP%]{padding:1rem;background:#fee;color:#c00;border-radius:4px;margin-bottom:1rem}.empty[_ngcontent-%COMP%]{text-align:center;color:#999;padding:2rem}@media(max-width:1000px){.desktop-only[_ngcontent-%COMP%]{display:none!important}.mobile-only[_ngcontent-%COMP%]{display:flex!important}.cards-container[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}"]})};function $R(e,t){e&1&&(m(0,"div",2),y(1,"Cargando..."),g())}function HR(e,t){if(e&1&&(m(0,"div",3),y(1),g()),e&2){let n=T();E(),X(n.error())}}function qR(e,t){if(e&1){let n=Te();m(0,"form",5),Q("ngSubmit",function(){$(n);let i=T();return H(i.onSubmit())}),m(1,"div",6)(2,"label",7),y(3,"C\xF3digo *"),g(),m(4,"input",8),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.codigo,i)||(o.form.codigo=i),H(i)}),g()(),m(5,"div",6)(6,"label",9),y(7,"Nombre *"),g(),m(8,"input",10),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.nombre,i)||(o.form.nombre=i),H(i)}),g()(),m(9,"div",6)(10,"label",11),y(11,"Ubicaci\xF3n *"),g(),m(12,"input",12),Ae("ngModelChange",function(i){$(n);let o=T();return Fe(o.form.ubicacion,i)||(o.form.ubicacion=i),H(i)}),g()(),m(13,"div",13)(14,"button",14),y(15),g(),m(16,"button",15),Q("click",function(){$(n);let i=T();return H(i.cancel())}),y(17," Cancelar "),g()()()}if(e&2){let n=T();E(4),Me("ngModel",n.form.codigo),E(4),Me("ngModel",n.form.nombre),E(4),Me("ngModel",n.form.ubicacion),E(3),pe(" ",n.isEditing()?"Actualizar":"Crear"," ")}}var ra=class e{ambienteService=b(tr);router=b(Gt);route=b(it);isEditing=B(!1);loading=B(!1);error=B(null);form={codigo:"",nombre:"",ubicacion:""};ambienteId=null;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditing.set(!0),this.ambienteId=+t,this.loadAmbiente(this.ambienteId))}loadAmbiente(t){this.loading.set(!0),this.ambienteService.getById(t).subscribe({next:n=>{this.form={codigo:n.codigo,nombre:n.nombre,ubicacion:n.ubicacion},this.loading.set(!1)},error:n=>{this.error.set("Error al cargar ambiente"),this.loading.set(!1),console.error(n)}})}onSubmit(){this.ambienteId?this.update():this.create()}create(){this.loading.set(!0),this.error.set(null),this.ambienteService.create(this.form).subscribe({next:()=>{this.router.navigate(["/ambientes"])},error:t=>{this.error.set("Error al crear ambiente"),this.loading.set(!1),console.error(t)}})}update(){this.ambienteId&&(this.loading.set(!0),this.error.set(null),this.ambienteService.update(this.ambienteId,this.form).subscribe({next:()=>{this.router.navigate(["/ambientes"])},error:t=>{this.error.set("Error al actualizar ambiente"),this.loading.set(!1),console.error(t)}}))}cancel(){this.router.navigate(["/ambientes"])}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-ambiente-form"]],decls:7,vars:4,consts:[[1,"container"],[1,"header"],[1,"loading"],[1,"error"],[1,"form"],[1,"form",3,"ngSubmit"],[1,"form-group"],["for","codigo"],["type","text","id","codigo","name","codigo","required","","placeholder","Ej: A001",1,"form-control",3,"ngModelChange","ngModel"],["for","nombre"],["type","text","id","nombre","name","nombre","required","","placeholder","Ej: Aula 101",1,"form-control",3,"ngModelChange","ngModel"],["for","ubicacion"],["type","text","id","ubicacion","name","ubicacion","required","","placeholder","Ej: Edificio A - Piso 1",1,"form-control",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(n,r){n&1&&(m(0,"div",0)(1,"header",1)(2,"h1"),y(3),g()(),ne(4,$R,2,0,"div",2),ne(5,HR,2,1,"div",3),ne(6,qR,18,4,"form",4),g()),n&2&&(E(3),pe("",r.isEditing()?"Editar":"Nuevo"," Ambiente"),E(),re(r.loading()?4:-1),E(),re(r.error()?5:-1),E(),re(r.loading()?-1:6))},dependencies:[It,Yi,Jl,Zn,Wi,Yl,ks,Ur,Os],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:600px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}h1[_ngcontent-%COMP%]{margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#4a5568}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.loading[_ngcontent-%COMP%]{padding:2rem;text-align:center;color:#666}.error[_ngcontent-%COMP%]{padding:1rem;background:#fee;color:#c00;border-radius:8px;margin-bottom:1rem}"]})};var Ow=[{path:"",component:jl},{path:"menu",component:Vl},{path:"equipos",component:Iu},{path:"equipos/nuevo",component:na},{path:"equipos/:id",component:na},{path:"ambientes",component:Su},{path:"ambientes/nuevo",component:ra},{path:"ambientes/:id",component:ra}];var kp="Service workers are disabled or not supported by this browser",lo=class{serviceWorker;worker;registration;events;constructor(t,n){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new q(r=>r.error(new I(5601,!1)));else{let r=null,i=new fe;this.worker=new q(l=>(r!==null&&l.next(r),i.subscribe(u=>l.next(u))));let o=()=>{let{controller:l}=t;l!==null&&(r=l,i.next(r))};t.addEventListener("controllerchange",o),o(),this.registration=this.worker.pipe(Ze(()=>t.getRegistration().then(l=>{if(!l)throw new I(5601,!1);return l})));let s=new fe;this.events=s.asObservable();let a=l=>{let{data:u}=l;u?.type&&s.next(u)};t.addEventListener("message",a),n?.get(Ht,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",o),t.removeEventListener("message",a)})}}postMessage(t,n){return new Promise(r=>{this.worker.pipe(nt(1)).subscribe(i=>{i.postMessage(D({action:t},n)),r()})})}postMessageWithOperation(t,n,r){let i=this.waitForOperationCompleted(r),o=this.postMessage(t,n);return Promise.all([o,i]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=r=>r.type===t:n=r=>t.includes(r.type),this.events.pipe(st(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(nt(1))}waitForOperationCompleted(t){return new Promise((n,r)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(st(i=>i.nonce===t),nt(1),F(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:n,error:r})})}get isEnabled(){return!!this.serviceWorker}},zR=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new fe;constructor(n){if(this.sw=n,!n.isEnabled){this.messages=un,this.notificationClicks=un,this.notificationCloses=un,this.pushSubscriptionChanges=un,this.subscription=un;return}this.messages=this.sw.eventsOfType("PUSH").pipe(F(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(F(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(F(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(F(i=>i.data)),this.pushManager=this.sw.registration.pipe(F(i=>i.pushManager));let r=this.pushManager.pipe(Ze(i=>i.getSubscription()));this.subscription=new q(i=>{let o=r.subscribe(i),s=this.subscriptionChanges.subscribe(i);return()=>{o.unsubscribe(),s.unsubscribe()}})}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(kp));let r={userVisibleOnly:!0},i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(i.length));for(let s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return r.applicationServerKey=o,new Promise((s,a)=>{this.pushManager.pipe(Ze(c=>c.subscribe(r)),nt(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),s(c)},error:a})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(kp));let n=r=>{if(r===null)throw new I(5602,!1);return r.unsubscribe().then(i=>{if(!i)throw new I(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((r,i)=>{this.subscription.pipe(nt(1),Ze(n)).subscribe({next:r,error:i})})}decodeBase64(n){return atob(n)}static \u0275fac=function(r){return new(r||e)(N(lo))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),GR=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=un,this.unrecoverable=un;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kp));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let n=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new I(5601,!1));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static \u0275fac=function(r){return new(r||e)(N(lo))};static \u0275prov=M({token:e,factory:e.\u0275fac})}return e})(),Pw=new A("");function WR(){let e=b(ia);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let t=b(Pw),n=b(He),r=b(Ht);n.runOutsideAngular(()=>{let i=navigator.serviceWorker,o=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",o),r.onDestroy(()=>{i.removeEventListener("controllerchange",o)})}),n.runOutsideAngular(()=>{let i,{registrationStrategy:o}=e;if(typeof o=="function")i=new Promise(s=>o().subscribe(()=>s()));else{let[s,...a]=(o||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=kw(+a[0]||0);break;case"registerWhenStable":i=Promise.race([r.whenStable(),kw(+a[0])]);break;default:throw new I(5600,!1)}}i.then(()=>{r.destroyed||navigator.serviceWorker.register(t,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(s=>console.error(pn(5604,!1)))})})}function kw(e){return new Promise(t=>setTimeout(t,e))}function KR(){let e=b(ia),t=b(at),n=!0;return new lo(n&&e.enabled!==!1?navigator.serviceWorker:void 0,t)}var ia=class{enabled;updateViaCache;type;scope;registrationStrategy};function Fw(e,t={}){return kt([zR,GR,{provide:Pw,useValue:e},{provide:ia,useValue:t},{provide:lo,useFactory:KR},Wc(WR)])}var Lw={providers:[rf(),ep(Ow),Ah(),Fw("ngsw-worker.js",{enabled:!xy(),registrationStrategy:"registerWhenStable:30000"})]};var YR=(e,t)=>t.id;function ZR(e,t){if(e&1){let n=Te();Di(0,"div",2)(1,"span",3),y(2),Ii(),Di(3,"button",4),Yc("click",function(){let i=$(n).$implicit,o=T();return H(o.toastService.remove(i.id))}),y(4,"\xD7"),Ii()()}if(e&2){let n=t.$implicit;ts("toast-"+n.type),E(2),X(n.message)}}var Tu=class e{toastService=b(co);static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-toast"]],decls:3,vars:0,consts:[[1,"toast-container"],[1,"toast",3,"class"],[1,"toast"],[1,"toast-message"],[1,"toast-close",3,"click"]],template:function(n,r){n&1&&(Di(0,"div",0),Je(1,ZR,5,3,"div",1,YR),Ii()),n&2&&(E(),Qe(r.toastService.toasts()))},dependencies:[It],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:12px}.toast[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 20px;border-radius:10px;box-shadow:0 4px 16px #0003;animation:_ngcontent-%COMP%_slideIn .3s ease;min-width:280px;max-width:400px}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}.toast-message[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}.toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:1.4rem;cursor:pointer;opacity:.7;padding:0;line-height:1}.toast-close[_ngcontent-%COMP%]:hover{opacity:1}.toast-success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border-left:4px solid #28a745}.toast-success[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]{color:#155724}.toast-error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border-left:4px solid #dc3545}.toast-error[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]{color:#721c24}.toast-info[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460;border-left:4px solid #17a2b8}.toast-info[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]{color:#0c5460}.toast-warning[_ngcontent-%COMP%]{background:#fff3cd;color:#856404;border-left:4px solid #ffc107}.toast-warning[_ngcontent-%COMP%]   .toast-close[_ngcontent-%COMP%]{color:#856404}"]})};var Mu=class e{title=B("inventario-frontend");static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Se({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(n,r){n&1&&Bn(0,"app-toast")(1,"router-outlet")},dependencies:[Ds,Tu],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,sans-serif;background-color:#f5f5f5;color:#333;line-height:1.6}"]})};Dh(Mu,Lw).catch(e=>console.error(e));
