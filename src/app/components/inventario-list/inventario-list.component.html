<div class="container">
  <header class="header">
    <div>
      <a routerLink="/menu" class="btn btn-secondary btn-sm">‚Üê Volver</a>
      <h1>Equipos</h1>
    </div>
    <a routerLink="/equipos/nuevo" class="btn btn-primary">
      + Agregar
    </a>
  </header>

  @if (loading()) {
    <div class="loading">Cargando equipos...</div>
  }

  @if (error()) {
    <div class="error">{{ error() }}</div>
  }

  @if (!loading() && !error()) {
    <!-- Vista de tabla para desktop -->
    <div class="table-container desktop-only">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre</th>
            <th>Marca</th>
            <th>Modelo</th>
            <th>Estado</th>
            <th>Ambiente</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (equipo of equipos(); track equipo.id) {
            <tr>
              <td>{{ equipo.id }}</td>
              <td>{{ equipo.nombre }}</td>
              <td>{{ equipo.marca }}</td>
              <td>{{ equipo.modelo }}</td>
              <td>{{ equipo.estado }}</td>
              <td>{{ equipo.ambientecodigo || 'Sin asignar' }}</td>
              <td class="actions">
                <a [routerLink]="['/equipos', equipo.id]" class="btn btn-sm btn-edit">
                  Editar
                </a>
                <button (click)="deleteEquipo(equipo.id!)" class="btn btn-sm btn-delete">
                  Eliminar
                </button>
              </td>
            </tr>
          } @empty {
            <tr>
              <td colspan="7" class="empty">No hay equipos</td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    <!-- Vista de tarjetas para mobile -->
    <div class="cards-container mobile-only">
      @for (equipo of equipos(); track equipo.id) {
        <div class="card">
          <div class="card-header">
            <span class="card-id">#{{ equipo.id }}</span>
            <span class="card-estado" [class]="equipo.estado?.toLowerCase()">{{ equipo.estado }}</span>
          </div>
          <div class="card-body" [routerLink]="['/equipos', equipo.id]">
            <h3>{{ equipo.nombre }}</h3>
            <p class="card-marca">{{ equipo.marca }} - {{ equipo.modelo }}</p>
            <p class="card-ambiente" *ngIf="equipo.ambientecodigo">
              üìç {{ equipo.ambientecodigo }}
            </p>
          </div>
          <div class="card-actions">
            <a [routerLink]="['/equipos', equipo.id]" class="btn btn-sm btn-edit">
              Editar
            </a>
            <button (click)="deleteEquipo(equipo.id!)" class="btn btn-sm btn-delete">
              Eliminar
            </button>
          </div>
        </div>
      } @empty {
        <div class="empty-card">No hay equipos registrados</div>
      }

      <!-- Controles de paginaci√≥n -->
      <div class="pagination">
        <button
          class="btn btn-sm btn-secondary"
          [disabled]="currentPage() === 1"
          (click)="prevPage()">
          ‚Üê Anterior
        </button>
        <span class="pagination-info">
          {{ equipos().length }} equipos - P√°gina {{ currentPage() }} de {{ totalPages() }}
        </span>
        <button
          class="btn btn-sm btn-secondary"
          [disabled]="currentPage() === totalPages()"
          (click)="nextPage()">
          Siguiente ‚Üí
        </button>
      </div>
    </div>
  }
</div>
